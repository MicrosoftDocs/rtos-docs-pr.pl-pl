---
title: Dodatek F-GUIX RTO Binding Services
description: Dowiedz się więcej na temat usług powiązań GUIX RTO.
author: philmea
ms.author: philmea
ms.date: 05/19/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 1d94dbb9d7d53ec3e1900188142974cc981dfea9
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/22/2021
ms.locfileid: "104823173"
---
# <a name="appendix-f---guix-rtos-binding-services"></a><span data-ttu-id="d4010-103">Dodatek F-GUIX RTO Binding Services</span><span class="sxs-lookup"><span data-stu-id="d4010-103">Appendix F - GUIX RTOS Binding Services</span></span>

<span data-ttu-id="d4010-104">GUIX wymaga usług wątków lub zadań, obiektu mutex, kolejki zdarzeń i usługi chronometrażu dostarczanych przez bazowe RTO.</span><span class="sxs-lookup"><span data-stu-id="d4010-104">GUIX requires thread or tasking services, mutex, event queue, and timing services providing by the underlying RTOS.</span></span> <span data-ttu-id="d4010-105">Domyślnie GUIX jest skonfigurowany do korzystania z systemu operacyjnego ThreadX w czasie rzeczywistym w celu świadczenia tych usług.</span><span class="sxs-lookup"><span data-stu-id="d4010-105">By default GUIX is configured to utilize the ThreadX real time operating system to provide these services.</span></span> <span data-ttu-id="d4010-106">Aby przenieść GUIX do innego systemu operacyjnego, deweloper powinien # zdefiniować dyrektywę preprocesora GX_DISABLE_THREADX_BINDING i ponownie skompilować bibliotekę GUIX, aby usunąć zależności ThreadX.</span><span class="sxs-lookup"><span data-stu-id="d4010-106">To port GUIX to another operating system, the developer should # define the pre-processor directive GX_DISABLE_THREADX_BINDING and rebuild the GUIX library to remove the ThreadX dependencies.</span></span> <span data-ttu-id="d4010-107">Ponadto Deweloper musi dostarczyć następujące definicje makr i funkcje pomocnicze.</span><span class="sxs-lookup"><span data-stu-id="d4010-107">In addition, the developer will need to provide the following macro definitions and supporting functions.</span></span> <span data-ttu-id="d4010-108">Przykłady tych definicji makr i funkcji pomocniczych można znaleźć w plikach gx_system_rtos_bind. h i gx_system_rtos_bind. c, które zapewniają przykładową rtoą integrację.</span><span class="sxs-lookup"><span data-stu-id="d4010-108">Examples of these macro definitions and supporting functions can be found in the files gx_system_rtos_bind.h and gx_system_rtos_bind.c, which provide an example generic rtos integration.</span></span>

<span data-ttu-id="d4010-109">Makra integracji systemu:</span><span class="sxs-lookup"><span data-stu-id="d4010-109">System Integration macros:</span></span>

<span data-ttu-id="d4010-110">**GX_RTOS_BINDING_INITIALIZE**</span><span class="sxs-lookup"><span data-stu-id="d4010-110">**GX_RTOS_BINDING_INITIALIZE**</span></span>

<span data-ttu-id="d4010-111">To makro jest wywoływane podczas inicjowania systemu.</span><span class="sxs-lookup"><span data-stu-id="d4010-111">This macro is invoked during system initialization.</span></span> <span data-ttu-id="d4010-112">Makro należy zdefiniować, aby wywołać dowolną funkcję potrzebną do przygotowania usług systemu RTO lub zasobów RTO przed użyciem.</span><span class="sxs-lookup"><span data-stu-id="d4010-112">The macro should be defined to call any function needed to prepare your rtos system services or rtos resources prior to use.</span></span> <span data-ttu-id="d4010-113">Jest to powiązanie umożliwiające przygotowanie zasobów RTO, które będą używane przez GUIX.</span><span class="sxs-lookup"><span data-stu-id="d4010-113">This is the binding’s opportunity to prepare the rtos resources that GUIX will use.</span></span>

<span data-ttu-id="d4010-114">**GX_SYSTEM_THREAD_START**</span><span class="sxs-lookup"><span data-stu-id="d4010-114">**GX_SYSTEM_THREAD_START**</span></span>

<span data-ttu-id="d4010-115">To makro jest wywoływane, gdy zostanie rozpoczęte wykonywanie zadania lub wątku GUIX.</span><span class="sxs-lookup"><span data-stu-id="d4010-115">This macro is invoked when the GUIX task or thread should start executing.</span></span> <span data-ttu-id="d4010-116">To makro należy zdefiniować, aby wywołać funkcję, która uruchomi wątek GUIX uruchomiony.</span><span class="sxs-lookup"><span data-stu-id="d4010-116">This macro should be defined to call a function which will start the GUIX thread running.</span></span> <span data-ttu-id="d4010-117">Punkt wejścia do wątku GUIX jest przesyłany do wywołanej funkcji.</span><span class="sxs-lookup"><span data-stu-id="d4010-117">The entry point to the GUIX thread is passed to the called function.</span></span> <span data-ttu-id="d4010-118">Sygnatura wywołanej funkcji musi być</span><span class="sxs-lookup"><span data-stu-id="d4010-118">The signature of the called function must be</span></span>

<span data-ttu-id="d4010-119">**UINT *function_name*(void (thread_entry_point) (void));**</span><span class="sxs-lookup"><span data-stu-id="d4010-119">**UINT *function_name*(VOID (thread_entry_point)(VOID));**</span></span>

<span data-ttu-id="d4010-120">Ta funkcja powinna zwracać GX_SUCCESS, jeśli wątek został pomyślnie uruchomiony lub GX_FAILURE.</span><span class="sxs-lookup"><span data-stu-id="d4010-120">This function should return GX_SUCCESS if the thread is successfully started, or GX_FAILURE.</span></span>

<span data-ttu-id="d4010-121">**GX_EVENT_PUSH**</span><span class="sxs-lookup"><span data-stu-id="d4010-121">**GX_EVENT_PUSH**</span></span>

<span data-ttu-id="d4010-122">To makro jest wywoływane w celu wypchnięcia zdarzenia do kolejki zdarzeń FIFO używanej przez GUIX.</span><span class="sxs-lookup"><span data-stu-id="d4010-122">This macro is invoked to push an event into the FIFO event queue used by GUIX.</span></span> <span data-ttu-id="d4010-123">W przypadku przenoszenia do nowego rtoa jest odpowiedzialna za wdrożenie tej kolejki zdarzeń w sposób bezpieczny dla wątków.</span><span class="sxs-lookup"><span data-stu-id="d4010-123">When porting to a new rtos, it is your responsibility to implement this event queue in a thread-safe manner.</span></span> <span data-ttu-id="d4010-124">Struktury GX_EVENT muszą być skopiowane do tej kolejki i skopiowane z tej kolejki, czyli kolejki wskaźników GX_EVENT nie będą działać, ponieważ zdarzenia GUIX mogą być automatycznie zmiennymi z widoku producenta zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="d4010-124">GX_EVENT structures must be copied into this queue and copied out of this queue, i.e. a queue of GX_EVENT pointers will not work, since GUIX events can be automatic variables from the view of the event producer.</span></span> <span data-ttu-id="d4010-125">Sygnatura funkcji wywoływanej przez to makro musi być:</span><span class="sxs-lookup"><span data-stu-id="d4010-125">The signature of the function called by this macro must be:</span></span>

<span data-ttu-id="d4010-126">\**UINT *function_name* (GX_EVENT *event_ptr);**</span><span class="sxs-lookup"><span data-stu-id="d4010-126">\**UINT *function_name* (GX_EVENT *event_ptr);**</span></span>

<span data-ttu-id="d4010-127">Ta funkcja powinna zwracać GX_SUCCESS, jeśli zdarzenie jest wypychane do kolejki zdarzeń, w przeciwnym razie powinna zwracać GX_FAILURE.</span><span class="sxs-lookup"><span data-stu-id="d4010-127">This function should return GX_SUCCESS if the event is pushed into the event queue, otherwise it should return GX_FAILURE.</span></span>

<span data-ttu-id="d4010-128">**GX_EVENT_POP**</span><span class="sxs-lookup"><span data-stu-id="d4010-128">**GX_EVENT_POP**</span></span>

<span data-ttu-id="d4010-129">To makro jest wywoływane, aby usunąć zdarzenie głowy (najstarsze) z kolejki zdarzeń GUIX i skopiować je do wybranej lokalizacji.</span><span class="sxs-lookup"><span data-stu-id="d4010-129">This macro is invoked to remove the head (oldest) event from the GUIX event queue and copy it into the requested location.</span></span> <span data-ttu-id="d4010-130">Ta funkcja musi mieć możliwość opcjonalnego blokowania lub oczekiwania na zdarzenie, jeśli w kolejce zdarzeń nie ma żadnych zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="d4010-130">This function must be able to optionally block or wait for an event if no events are currently in the event queue.</span></span> <span data-ttu-id="d4010-131">Sygnatura funkcji wywoływanej przez to makro musi być</span><span class="sxs-lookup"><span data-stu-id="d4010-131">The signature of the function invoked by this macro must be</span></span>

<span data-ttu-id="d4010-132">UINT function_name (GX_EVENT \* put_event, GX_BOOL oczekiwanie)</span><span class="sxs-lookup"><span data-stu-id="d4010-132">UINT function_name(GX_EVENT \*put_event, GX_BOOL wait)</span></span>

<span data-ttu-id="d4010-133">Jeśli parametr wait = = GX_TRUE, funkcja nie powinna zostać zwrócona, dopóki nie zostanie dostarczone zdarzenie.</span><span class="sxs-lookup"><span data-stu-id="d4010-133">If the wait parameter == GX_TRUE, the function should not return until an event is provided.</span></span> <span data-ttu-id="d4010-134">Jeśli parametr wait jest GX_FALSE, funkcja powinna zwrócić bezpośrednio z lub bez zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="d4010-134">If the wait parameter is GX_FALSE, the function should return immediately with or without an event.</span></span>

<span data-ttu-id="d4010-135">Jeśli zdarzenie jest pobierane z kolejki, powinno zostać skopiowane do lokalizacji put_event, a stan powrotu to GX_SUCCESS.</span><span class="sxs-lookup"><span data-stu-id="d4010-135">If an event is retrieved from the queue, it should copied into the put_event location and the return status is GX_SUCCESS.</span></span> <span data-ttu-id="d4010-136">W przeciwnym razie stan powrotu powinien być GX_FAILURE.</span><span class="sxs-lookup"><span data-stu-id="d4010-136">Otherwise the return status should be GX_FAILURE.</span></span>

<span data-ttu-id="d4010-137">**GX_EVENT_FOLD**</span><span class="sxs-lookup"><span data-stu-id="d4010-137">**GX_EVENT_FOLD**</span></span>

<span data-ttu-id="d4010-138">To makro jest wywoływane przez GUIX w celu złożenia zdarzenia w kolejce zdarzeń FIFO.</span><span class="sxs-lookup"><span data-stu-id="d4010-138">This macro is invoked by GUIX to fold an event into the FIFO event queue.</span></span> <span data-ttu-id="d4010-139">Złożenia zdarzenia oznacza, że jeśli zdarzenie tego samego typu już istnieje w kolejce, ten wpis jest aktualizowany, aby zawierał ładunek nowego zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="d4010-139">Folding an event means that if an event of the same type already exists in the queue, that entry is update to contain the payload of the new event.</span></span> <span data-ttu-id="d4010-140">Jeśli istniejące zdarzenie tego samego typu nie zostanie odnalezione w kolejce, nowe zdarzenie jest wypychane do kolejki.</span><span class="sxs-lookup"><span data-stu-id="d4010-140">If an existing event of the same type is not found in the queue, a new event is pushed into the queue.</span></span> 

<span data-ttu-id="d4010-141">W przypadku powiązań, które nie mogą implementować funkcji składania zdarzeń, można po prostu wywołać GX_EVENT_PUSH.</span><span class="sxs-lookup"><span data-stu-id="d4010-141">For bindings that cannot implement the event fold feature, it is acceptable to simply invoke the GX_EVENT_PUSH.</span></span>

<span data-ttu-id="d4010-142">**GX_TIMER_START**</span><span class="sxs-lookup"><span data-stu-id="d4010-142">**GX_TIMER_START**</span></span>

<span data-ttu-id="d4010-143">To makro jest wywoływane, gdy GUIX musi odbierać okresowe dane wejściowe czasomierza.</span><span class="sxs-lookup"><span data-stu-id="d4010-143">This macro is invoked when GUIX needs to receive periodic timer input.</span></span> <span data-ttu-id="d4010-144">To makro powinno wywołać usługę, która uruchamia usługę czasomierza okresowego RTO niskiego poziomu.</span><span class="sxs-lookup"><span data-stu-id="d4010-144">This macro should invoke a service that starts the low-level RTOS periodic timer service.</span></span> <span data-ttu-id="d4010-145">Jeśli usługa czasomierza RTO nie może być łatwo zatrzymywana i uruchomiona, jest akceptowalna, ale mniej wydajna w przypadku pozostawienia tej usługi przez cały czas.</span><span class="sxs-lookup"><span data-stu-id="d4010-145">If the RTOS timer service cannot be easily stopped and started, it is acceptable but less efficient to leave this service running at all times.</span></span>

<span data-ttu-id="d4010-146">Gdy usługa czasomierza RTO niskiego poziomu okresowo wygasa, powiązanie musi wywołać funkcję systemu GUIX _gx_system_timer_expiration (0); Okresowe wywoływanie tej funkcji polega na tym, co jest dyskiem usługi czasomierza widżetu GUIX wysokiego poziomu.</span><span class="sxs-lookup"><span data-stu-id="d4010-146">When the low-level RTOS timer service periodically expires, the binding must call the GUIX system function _gx_system_timer_expiration(0); Calling this function periodically is what drives the high-level GUIX timer widget timer services.</span></span>

<span data-ttu-id="d4010-147">**GX_TIMER_STOP**</span><span class="sxs-lookup"><span data-stu-id="d4010-147">**GX_TIMER_STOP**</span></span>

<span data-ttu-id="d4010-148">To makro jest wywoływane, gdy GUIX nie potrzebuje już czasomierza okresowego (tj. nie ma aktywnych czasomierzy GUIX uruchomionych).</span><span class="sxs-lookup"><span data-stu-id="d4010-148">This macro is invoked when GUIX no longer needs a periodic timer (i.e. there are no active GUIX timers running).</span></span> <span data-ttu-id="d4010-149">Jeśli usługa czasomierza RTO nie może być łatwo zatrzymywana i uruchomiona, jest akceptowalna, ale mniej wydajna, aby pozostawić tę usługę przez cały czas i zdefiniować to makro, aby nic nie robić.</span><span class="sxs-lookup"><span data-stu-id="d4010-149">If the RTOS timer service cannot be easily stopped and started, it is acceptable but less efficient to leave this service running at all times and define this macro to do nothing.</span></span>

<span data-ttu-id="d4010-150">**GX_SYSTEM_MUTEX_LOCK**</span><span class="sxs-lookup"><span data-stu-id="d4010-150">**GX_SYSTEM_MUTEX_LOCK**</span></span>

<span data-ttu-id="d4010-151">To makro jest wywoływane przez GUIX podczas krytycznych sekcji kodu, aby zapobiec wystąpieniu innego zadania sprzed Empting i modyfikacji wspólnych struktur danych, co może spowodować uszkodzenie.</span><span class="sxs-lookup"><span data-stu-id="d4010-151">This macro is invoked by GUIX during critical code sections to prevent another task from  pre-empting and modifying common data structures, potentially causing corruption.</span></span> <span data-ttu-id="d4010-152">To makro powinno wywołać funkcję implementującą odpowiednią usługę blokowania zasobów RTO.</span><span class="sxs-lookup"><span data-stu-id="d4010-152">This macro should call a function that implements the suitable RTOS resource locking service.</span></span>

<span data-ttu-id="d4010-153">Jeśli nie korzystasz z żadnych usług interfejsu API GUIX poza wątkiem GUIX, możesz zdefiniować to makro, aby nic nie robić.</span><span class="sxs-lookup"><span data-stu-id="d4010-153">If you never utilize any GUIX API services outside of the GUIX thread, you can define this macro to do nothing.</span></span>

<span data-ttu-id="d4010-154">**GX_SYSTEM_MUTEX_UNLOCK**</span><span class="sxs-lookup"><span data-stu-id="d4010-154">**GX_SYSTEM_MUTEX_UNLOCK**</span></span>

<span data-ttu-id="d4010-155">To makro jest wywoływane na końcu krytycznych sekcji kodu i należy odblokować zasób GUIX przy użyciu odpowiedniej usługi RTO.</span><span class="sxs-lookup"><span data-stu-id="d4010-155">This macro is invoked at the end of critical code sections, and should unlock the GUIX resource using the suitable underlying RTOS service.</span></span> <span data-ttu-id="d4010-156">Jeśli nie korzystasz z żadnych usług interfejsu API GUIX poza wątkiem GUIX, możesz zdefiniować to makro, aby nic nie robić.</span><span class="sxs-lookup"><span data-stu-id="d4010-156">If you never utilize any GUIX API services outside of the GUIX thread, you can define this macro to do nothing.</span></span>

<span data-ttu-id="d4010-157">**GX_SYSTEM_TIME_GET**</span><span class="sxs-lookup"><span data-stu-id="d4010-157">**GX_SYSTEM_TIME_GET**</span></span>

<span data-ttu-id="d4010-158">To makro powinno wywołać funkcję, która zwraca bieżący czas systemowy to "cykle systemu", która zazwyczaj jest liczbą przerwań czasomierza niskiego poziomu, które wystąpiły od momentu uruchomienia systemu.</span><span class="sxs-lookup"><span data-stu-id="d4010-158">This macro should call a function that returns the current system time is “system ticks”, which is usually the number of low-level timer interrupts that have occurred since system startup.</span></span> <span data-ttu-id="d4010-159">Ta usługa służy do obliczania szybkości pióra zdarzeń dotykowych dla gestów wprowadzania dotykowego.</span><span class="sxs-lookup"><span data-stu-id="d4010-159">This service is used to calculate touch event pen speed for touch input gestures.</span></span> <span data-ttu-id="d4010-160">Sygnatura funkcji wywoływanej przez to makro musi być:</span><span class="sxs-lookup"><span data-stu-id="d4010-160">The signature of the function invoked by this macro must be:</span></span>

<span data-ttu-id="d4010-161">**ULONG *function_name*(void);**</span><span class="sxs-lookup"><span data-stu-id="d4010-161">**ULONG *function_name*(VOID);**</span></span>

<span data-ttu-id="d4010-162">**GX_CURRENT_THREAD**</span><span class="sxs-lookup"><span data-stu-id="d4010-162">**GX_CURRENT_THREAD**</span></span>

<span data-ttu-id="d4010-163">To makro jest wywoływane, aby zidentyfikować aktualnie wykonywany wątek.</span><span class="sxs-lookup"><span data-stu-id="d4010-163">This macro is invoked to identify the currently executing thread.</span></span> <span data-ttu-id="d4010-164">Usługa wywołana przez to makro musi zwrócić wartość void \*, co oznacza, że typ danych używany przez system operacyjny do identyfikowania bieżącego wątku wykonywania musi być rzutowany na wartość typu void \*, aby można było zwrócić do GUX.</span><span class="sxs-lookup"><span data-stu-id="d4010-164">The service called by this macro must return a void \*, meaning that the data type used by your operating system to identify the current execution thread must be cast to a void \* to be returned to GUX.</span></span>

<span data-ttu-id="d4010-165">Kompletny przykład ogólnego powiązania RTO jest implementowany w zachowanych gx_system_rtos_bind. h i gx_system_rtos_bind. c</span><span class="sxs-lookup"><span data-stu-id="d4010-165">A complete example of a generic RTOS binding is implemented in the filed gx_system_rtos_bind.h and gx_system_rtos_bind.c</span></span>