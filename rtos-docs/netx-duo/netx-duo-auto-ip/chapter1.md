---
title: Rozdział 1 — wprowadzenie do usługi Azure RTO NetX Duo AutoIP
description: Protokół AutoIP jest protokołem zaprojektowanym do dynamicznego konfigurowania adresów IPv4 w sieci lokalnej. Aby zapewnić prawidłowe działanie, pakiet Azure RTO NetX Duo AutoIP wymaga, aby wystąpienie NetX IP zostało już utworzone.
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 7f756f0e9f4ab1bddd6c28449dbd695e23758b16
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/22/2021
ms.locfileid: "104822915"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-duo-autoip"></a><span data-ttu-id="03c13-104">Rozdział 1 — wprowadzenie do usługi Azure RTO NetX Duo AutoIP</span><span class="sxs-lookup"><span data-stu-id="03c13-104">Chapter 1 - Introduction to Azure RTOS NetX Duo AutoIP</span></span>

<span data-ttu-id="03c13-105">Protokół AutoIP jest protokołem zaprojektowanym do dynamicznego konfigurowania adresów IPv4 w sieci lokalnej.</span><span class="sxs-lookup"><span data-stu-id="03c13-105">The AutoIP Protocol is a protocol designed for dynamically configuring IPv4 addresses on a local network.</span></span> <span data-ttu-id="03c13-106">AutoIP to prosty protokół, który wykorzystuje funkcje ARP do wykonywania funkcji automatycznego przypisywania adresów IP.</span><span class="sxs-lookup"><span data-stu-id="03c13-106">AutoIP is a simple protocol that utilizes ARP capabilities to perform its automatic IP address assignment function.</span></span> <span data-ttu-id="03c13-107">AutoIP przydziela adresy z zakresu od 169.254.1.0 do 169.254.254.255.</span><span class="sxs-lookup"><span data-stu-id="03c13-107">AutoIP allocates addresses in the range of 169.254.1.0 through 169.254.254.255.</span></span>

## <a name="autoip-requirements"></a><span data-ttu-id="03c13-108">Wymagania AutoIP</span><span class="sxs-lookup"><span data-stu-id="03c13-108">AutoIP Requirements</span></span>

<span data-ttu-id="03c13-109">Aby zapewnić prawidłowe działanie, pakiet Azure RTO NetX Duo AutoIP wymaga, aby wystąpienie NetX IP zostało już utworzone.</span><span class="sxs-lookup"><span data-stu-id="03c13-109">In order to function properly, the Azure RTOS NetX Duo AutoIP package requires that a NetX IP instance has already been created.</span></span> <span data-ttu-id="03c13-110">Ponadto należy włączyć protokół ARP dla tego samego wystąpienia IP.</span><span class="sxs-lookup"><span data-stu-id="03c13-110">In addition, ARP must be enabled on that same IP instance.</span></span> <span data-ttu-id="03c13-111">Pakiet AutoIP NetX nie ma żadnych dalszych wymagań.</span><span class="sxs-lookup"><span data-stu-id="03c13-111">The NetX AutoIP package has no further requirements.</span></span>

## <a name="autoip-constraints"></a><span data-ttu-id="03c13-112">Ograniczenia AutoIP</span><span class="sxs-lookup"><span data-stu-id="03c13-112">AutoIP Constraints</span></span>

<span data-ttu-id="03c13-113">Protokół NetX AutoIP implementuje wymagania standardu RFC3927.</span><span class="sxs-lookup"><span data-stu-id="03c13-113">The NetX AutoIP protocol implements the requirements of the RFC3927 standard.</span></span> <span data-ttu-id="03c13-114">Istnieją jednak następujące ograniczenia:</span><span class="sxs-lookup"><span data-stu-id="03c13-114">However, there are the following constraints:</span></span>

1. <span data-ttu-id="03c13-115">Jeśli używany jest protokół DHCP NetX, należy utworzyć wątek DHCP z wyższym priorytetem niż zarówno wątek wystąpienia adresu IP NetX, jak i wątek AutoIP.</span><span class="sxs-lookup"><span data-stu-id="03c13-115">If NetX DHCP is used, the DHCP thread must be created with a higher priority than both the NetX IP instance thread and the AutoIP thread.</span></span>

1. <span data-ttu-id="03c13-116">NetX AutoIP nie zapewnia mechanizmu dla starych adresów IP do dalszego użycia.</span><span class="sxs-lookup"><span data-stu-id="03c13-116">NetX AutoIP does not provide a mechanism for old IP addresses to continue being used.</span></span>

1. <span data-ttu-id="03c13-117">Gdy adres IP ulegnie zmianie, aplikacja jest odpowiedzialna za rozbicie istniejących połączeń TCP i ponowne ich ustanowienie na nowym adresie IP.</span><span class="sxs-lookup"><span data-stu-id="03c13-117">When the IP address changes, the application is responsible for tearing down any existing TCP connections and re-establishing them on the new IP address.</span></span>

## <a name="autoip-protocol-implementation"></a><span data-ttu-id="03c13-118">Implementacja protokołu AutoIP</span><span class="sxs-lookup"><span data-stu-id="03c13-118">AutoIP Protocol Implementation</span></span>

<span data-ttu-id="03c13-119">Protokół NetX AutoIP najpierw wybiera adres losowy w zakresie adresów IPv4 AutoIP 169.254.1.0 za pomocą 169.254.254.255.</span><span class="sxs-lookup"><span data-stu-id="03c13-119">The NetX AutoIP protocol first selects a random address within the AutoIP IPv4 address range of 169.254.1.0 through 169.254.254.255.</span></span> <span data-ttu-id="03c13-120">Alternatywnie aplikacja może wymusić początkowy adres IP, dostarczając go do funkcji ***nx_auto_ip_start*** .</span><span class="sxs-lookup"><span data-stu-id="03c13-120">Alternatively, the application may force a starting IP address by providing it to the ***nx_auto_ip_start*** function.</span></span> <span data-ttu-id="03c13-121">Jest to przydatne w sytuacjach, gdy adres AutoIP został pomyślnie użyty w poprzednim uruchomieniu.</span><span class="sxs-lookup"><span data-stu-id="03c13-121">This is useful in situations where an AutoIP address was successfully used in a prior run.</span></span>

<span data-ttu-id="03c13-122">Po wybraniu adresu AutoIP, NetX AutoIP wysyła serię sond ARP dla wybranego adresu.</span><span class="sxs-lookup"><span data-stu-id="03c13-122">Once an AutoIP address is selected, NetX AutoIP sends out a series of ARP probes for the selected address.</span></span> <span data-ttu-id="03c13-123">Sonda ARP składa się z komunikatu żądania ARP z adresem nadawcy ustawionym na wartość 0.0.0.0 i adresem docelowym ustawionym na żądany adres AutoIP.</span><span class="sxs-lookup"><span data-stu-id="03c13-123">An ARP probe consists of an ARP request message with the sender address set to 0.0.0.0 and the target address set to the desired AutoIP address.</span></span> <span data-ttu-id="03c13-124">Są wysyłane serie tych sond ARP (rzeczywista liczba jest określana przez Definiuj NX_AUTO_IP_PROBE_NUM).</span><span class="sxs-lookup"><span data-stu-id="03c13-124">A series of these ARP probes are sent (the actual number is determined by the define NX_AUTO_IP_PROBE_NUM).</span></span> <span data-ttu-id="03c13-125">Jeśli inny węzeł sieci odpowiada na tę sondę lub wysyła identyczną sondę dla tego samego adresu, nowy adres AutoIP jest losowo wybierany w ramach zakresu adresów IPv4 AutoIP i powtarzające się przetwarzanie sondy.</span><span class="sxs-lookup"><span data-stu-id="03c13-125">If another network node responds to this probe or sends an identical probe for the same address, a new AutoIP address is randomly selected within the AutoIP IPv4 address range and the probe processing repeats.</span></span>

<span data-ttu-id="03c13-126">Jeśli NX_AUTO_IP_PROBE_NUM sondy są wysyłane bez odpowiedzi, NetX AutoIP wystawia listę anonsów ARP dla wybranego adresu.</span><span class="sxs-lookup"><span data-stu-id="03c13-126">If NX_AUTO_IP_PROBE_NUM probes are sent without any responses, NetX AutoIP issues a series of ARP announcements for the selected address.</span></span> <span data-ttu-id="03c13-127">Anons protokołu ARP składa się z komunikatu żądania ARP z adresem nadawcy i docelowym w wiadomości ARP ustawionym na wybrany adres AutoIP.</span><span class="sxs-lookup"><span data-stu-id="03c13-127">An ARP announcement consists of an ARP request message with both the sender and target address in the ARP message set to the selected AutoIP address.</span></span> <span data-ttu-id="03c13-128">Zostanie wysłany szereg komunikatów anonsu ARP odpowiadających Definiuj NX_AUTO_IP_ANNOUNCE_NUM.</span><span class="sxs-lookup"><span data-stu-id="03c13-128">A series of ARP announcement messages are sent, corresponding to the define NX_AUTO_IP_ANNOUNCE_NUM.</span></span> <span data-ttu-id="03c13-129">Jeśli inny węzeł sieci odpowiada na wiadomość anonsu lub wysyła identyczny anons dla tego samego adresu, nowy adres AutoIP jest losowo wybierany w ramach zakresu adresów IPv4 AutoIP, a przetwarzanie sondy zaczyna się od początku.</span><span class="sxs-lookup"><span data-stu-id="03c13-129">If another network node responds to an announce message or sends an identical announcement for the same address, a new AutoIP address is randomly selected within the AutoIP IPv4 address range and the probe processing starts over.</span></span>

<span data-ttu-id="03c13-130">Gdy sonda i powiadomienie zakończą się bez wykrytych konfliktów, wybrany adres AutoIP jest uznawany za prawidłowy, a skojarzone wystąpienie adresu IP jest skonfigurowane z tym adresem.</span><span class="sxs-lookup"><span data-stu-id="03c13-130">When the probe and announcement completes without any detected conflicts, the selected AutoIP address is considered valid and the associated IP instance is setup with this address.</span></span>

## <a name="autoip-address-change"></a><span data-ttu-id="03c13-131">Zmiana adresu AutoIP</span><span class="sxs-lookup"><span data-stu-id="03c13-131">AutoIP Address Change</span></span>

<span data-ttu-id="03c13-132">Jak wspomniano wcześniej, NetX AutoIP zmienia adres wystąpienia adresu IP po pomyślnym przeprowadzeniu sondowania i przetworzeniu anonsu.</span><span class="sxs-lookup"><span data-stu-id="03c13-132">As mentioned before, NetX AutoIP changes the IP instance address after successful probe and announcement processing.</span></span> <span data-ttu-id="03c13-133">Monitorowanie w tym przypadku nie jest poważny ważne.</span><span class="sxs-lookup"><span data-stu-id="03c13-133">Monitoring for this case is not terribly important.</span></span> <span data-ttu-id="03c13-134">Jednak w przyszłości można zmienić adres AutoIP.</span><span class="sxs-lookup"><span data-stu-id="03c13-134">However, it is possible to have the AutoIP address change in the future.</span></span> <span data-ttu-id="03c13-135">Potencjalnymi przyczynami są konflikty w przyszłości, a także rozpoznawanie adresów DHCP.</span><span class="sxs-lookup"><span data-stu-id="03c13-135">Potential causes include future AutoIP address conflicts as well as DHCP address resolution.</span></span> <span data-ttu-id="03c13-136">Aby prawidłowo przetwarzać te potencjalne sytuacje, aplikacja powinna używać następującego interfejsu API NetX w celu wysyłania alertów o wszelkich zmianach adresu IP i wszystkich:</span><span class="sxs-lookup"><span data-stu-id="03c13-136">In order to process these potential situations properly, the application should use the following NetX API to alert it of any and all IP address changes:</span></span>

```c
nx_ip_address_change_notify(NX_IP *ip_ptr,
            VOID (*ip_address_change_notify)(NX_IP *,VOID*),
            VOID *additional_info);
```

<span data-ttu-id="03c13-137">W przypadku przetwarzania w podanej funkcji *ip_address_change_notify* należy ponownie uruchomić procesor NetX AutoIP lub go wyłączyć, jeśli protokół DHCP następnie rozpoznał adres IP.</span><span class="sxs-lookup"><span data-stu-id="03c13-137">The processing in the supplied *ip_address_change_notify* function must either restart the NetX AutoIP processor or disable it if DHCP has subsequently resolved the IP address.</span></span> <span data-ttu-id="03c13-138">Przykład przetwarzania przykładowego zapoznaj się z małą sekcją *systemu* .</span><span class="sxs-lookup"><span data-stu-id="03c13-138">Please refer to the *Small Example System* section for sample processing.</span></span>

## <a name="autoip-rfcs"></a><span data-ttu-id="03c13-139">AutoIP specyfikacje RFC</span><span class="sxs-lookup"><span data-stu-id="03c13-139">AutoIP RFCs</span></span>

<span data-ttu-id="03c13-140">NetX AutoIP jest zgodny z RFC3927 i pokrewnymi specyfikacjami RFC.</span><span class="sxs-lookup"><span data-stu-id="03c13-140">NetX AutoIP is compliant with RFC3927 and related RFCs.</span></span>