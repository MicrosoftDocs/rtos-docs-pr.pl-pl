---
title: Rozdział 1 — wprowadzenie do serwera DHCPv6 usługi Azure RTO NetX Duo
description: W tym dokumencie opisano szczegółowo, w jaki sposób serwer DHCPv6 NetX Duo przypisuje adresy IPv6 klientom DHCPv6.
author: philmea
ms.author: philmea
ms.date: 06/08/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 6cf7baa91b1804876b97b1d75d1872d1120ad028
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/22/2021
ms.locfileid: "104821948"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-duo-dhcpv6-server"></a><span data-ttu-id="84ceb-103">Rozdział 1 — wprowadzenie do serwera DHCPv6 usługi Azure RTO NetX Duo</span><span class="sxs-lookup"><span data-stu-id="84ceb-103">Chapter 1 - Introduction to Azure RTOS NetX Duo DHCPv6 server</span></span>

<span data-ttu-id="84ceb-104">W przypadku sieci IPv6 do uzyskiwania adresów IPv6 klienci muszą mieć protokół DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-104">In IPv6 networks, DHCPv6is required for Clients to obtain IPv6 addresses.</span></span> <span data-ttu-id="84ceb-105">Nie zastępuje protokołu DHCP, który jest ograniczony do protokołu IPv4, ponieważ nie oferuje on adresów IPv4.</span><span class="sxs-lookup"><span data-stu-id="84ceb-105">It does not replace DHCP which is limited to IPv4in that it does not offer IPv4 addresses.</span></span> <span data-ttu-id="84ceb-106">Protokół DHCPv6 ma podobne funkcje do protokołu DHCP, a także wiele ulepszeń.</span><span class="sxs-lookup"><span data-stu-id="84ceb-106">DHCPv6 has similar features to DHCP as well as many enhancements.</span></span> <span data-ttu-id="84ceb-107">Klient, który nie ma lub nie może użyć automatycznej konfiguracji adresu IPv6, może używać protokołu DHCPv6 do przypisywania unikatowego globalnego adresu IPv6 z serwera DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-107">A Client who does not or cannot use IPv6 stateless address auto-configuration can use DHCPv6 to be assigned a unique global IPv6 address from a DHCPv6 Server.</span></span>

<span data-ttu-id="84ceb-108">NetX Duo został opracowany z myślą o obsłudze aplikacji opartych na sieci IPv6 i protokołów sieciowych, takich jak DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-108">NetX Duo was developed to support IPv6 network based applications and network protocols such as DHCPv6.</span></span> <span data-ttu-id="84ceb-109">W tym dokumencie opisano szczegółowo, w jaki sposób serwer DHCPv6 NetX Duo przypisuje adresy IPv6 klientom DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-109">This document will explain in detail how the NetX Duo DHCPv6 Server assigns IPv6 addresses to DHCPv6 Clients.</span></span>

## <a name="dhcpv6-communication"></a><span data-ttu-id="84ceb-110">Komunikacja DHCPv6</span><span class="sxs-lookup"><span data-stu-id="84ceb-110">DHCPv6 Communication</span></span>

<span data-ttu-id="84ceb-111">**Struktura komunikatu protokołu DHCPv6**</span><span class="sxs-lookup"><span data-stu-id="84ceb-111">**DHCPv6 Message structure**</span></span>

<span data-ttu-id="84ceb-112">Zawartość komunikatu jest zasadniczo nagłówkiem komunikatu, po którym następuje co najmniej jeden blok opcji (zwykle więcej).</span><span class="sxs-lookup"><span data-stu-id="84ceb-112">Message content is basically a message header followed by one or more (usually more) option blocks.</span></span> <span data-ttu-id="84ceb-113">Poniżej znajduje się podstawowa struktura, w której każdy blok reprezentuje jeden bajt:</span><span class="sxs-lookup"><span data-stu-id="84ceb-113">Below is the basic structure where each block represents one byte:</span></span>

![Diagram przedstawiający strukturę bloku komunikatów i opcji.](media/image2.jpg)

<span data-ttu-id="84ceb-115">**Rysunek 1. Struktura bloku komunikatów i opcji komunikatu protokołu DHCPv6**</span><span class="sxs-lookup"><span data-stu-id="84ceb-115">**Figure 1. DHCPv6 message and option block structure**</span></span>

<span data-ttu-id="84ceb-116">Pole 1-bajtowe Msg-Type wskazuje typ komunikatu protokołu DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-116">The 1-byte Msg-Type field indicates the type of DHCPv6 message.</span></span> <span data-ttu-id="84ceb-117">3-bajtowe pole identyfikatora transakcji jest ustawiane przez klienta.</span><span class="sxs-lookup"><span data-stu-id="84ceb-117">The 3-byte Transaction-ID field is set by the Client.</span></span> <span data-ttu-id="84ceb-118">Może on mieć dowolną sekwencję znaków, ale musi być unikatowy dla każdego komunikatu klienta na serwerze (jest on obsługiwany przez zduplikowane komunikaty wysyłane przez klienta).</span><span class="sxs-lookup"><span data-stu-id="84ceb-118">It can by any sequence of characters but must be unique for each Client message to the Server (conserved across duplicate messages sent by the Client).</span></span> <span data-ttu-id="84ceb-119">Serwer używa tego identyfikatora transakcji dla każdej odpowiedzi dla klienta, aby umożliwić klientowi dopasowanie komunikatów serwera w przypadku pakietów, które są opóźnione lub opuszczone w sieci.</span><span class="sxs-lookup"><span data-stu-id="84ceb-119">The Server uses that Transaction-ID for each response to the Client to enable the Client to match up Server messages in the event of packets that are delayed or dropped on the network.</span></span> <span data-ttu-id="84ceb-120">Następujące opcje protokołu DHCPv6 są używane do wskazywania, do czego klient żąda.</span><span class="sxs-lookup"><span data-stu-id="84ceb-120">Following the Transaction-ID field, are one or more DHCPv6 options used to indicate what the Client is requesting.</span></span>

<span data-ttu-id="84ceb-121">Struktura opcji protokołu DHCPv6 składa się z kodu opcji, pola długości opcji, które nie zawiera pól Długość lub kod i na koniec danych opcji, które są co najmniej jednym polem kodu opcji 2 bajty dla danych, których żąda klient.</span><span class="sxs-lookup"><span data-stu-id="84ceb-121">The DHCPv6 option structure is composed of an option code, an option length field, which does not include the length or code fields, and finally the option data itself which is one or more 2 byte option code fields for the data the Client is requesting.</span></span>

<span data-ttu-id="84ceb-122">Niektóre bloki opcji mają opcje zagnieżdżone.</span><span class="sxs-lookup"><span data-stu-id="84ceb-122">Some option blocks have nested options.</span></span> <span data-ttu-id="84ceb-123">Na przykład *skojarzenie tożsamości dla opcji nietymczasowy adres (IANA)* zawiera jedną lub więcej opcji *SKOJARZENIA tożsamości (IA)* , aby zażądać adresów IPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-123">For example, an *Identity Association for Non Temporary Address (IANA)* option contains one or more *Identity Association (IA)* options to request IPv6 addresses.</span></span> <span data-ttu-id="84ceb-124">Opcja programu *Iana* zwrócona w komunikacie odpowiedzi serwera zawiera te same opcje *IA* z adresem IPv6 i czasami dzierżawy przyznanymi przez serwer, a także opcję *stanu* wskazującą, czy wystąpił błąd żądania adresu klienta.</span><span class="sxs-lookup"><span data-stu-id="84ceb-124">The *IANA* option returned in the Server Reply message contains the same *IA* option(s) with the IPv6 address and lease times granted by the Server, as well as a *Status* option indicating if there is an error with the Client address request.</span></span>

<span data-ttu-id="84ceb-125">Lista wszystkich bloków opcji wraz z ich opisem znajduje się w **dodatku A**.</span><span class="sxs-lookup"><span data-stu-id="84ceb-125">A list of all option blocks and their description is provided in **Appendix A**.</span></span>

<span data-ttu-id="84ceb-126">**Typy komunikatów protokołu DHCPv6**</span><span class="sxs-lookup"><span data-stu-id="84ceb-126">**DHCPv6 Message Types**</span></span>

<span data-ttu-id="84ceb-127">Mimo że protokół DHCPv6 znacznie rozszerza funkcjonalność protokołu DHCP, używa tej samej liczby komunikatów co serwer DHCP i obsługuje te same opcje dostawcy co serwer DHCP.</span><span class="sxs-lookup"><span data-stu-id="84ceb-127">Although DHCPv6 greatly enhances the functionality of DHCP, it uses the same number of messages as DHCP and supports the same vendor options as DHCP.</span></span> <span data-ttu-id="84ceb-128">Lista komunikatów protokołu DHCPv6 jest następująca:</span><span class="sxs-lookup"><span data-stu-id="84ceb-128">The list of DHCPv6 messages are as follows:</span></span>

- <span data-ttu-id="84ceb-129">SOLICT (1) (wysłane przez klienta)</span><span class="sxs-lookup"><span data-stu-id="84ceb-129">SOLICT (1) (sent by Client)</span></span>
- <span data-ttu-id="84ceb-130">ANONSowanie (2) (wysyłane przez serwer)</span><span class="sxs-lookup"><span data-stu-id="84ceb-130">ADVERTISE (2) (sent by Server)</span></span>
- <span data-ttu-id="84ceb-131">ŻĄDANIE (3) (wysłane przez klienta)</span><span class="sxs-lookup"><span data-stu-id="84ceb-131">REQUEST (3) (sent by Client)</span></span>
- <span data-ttu-id="84ceb-132">ODPOWIEDŹ (7) (wysłana przez serwer)</span><span class="sxs-lookup"><span data-stu-id="84ceb-132">REPLY (7) (sent by Server)</span></span>
- <span data-ttu-id="84ceb-133">POTWIERDZENIE (4) (wysłane przez klienta)</span><span class="sxs-lookup"><span data-stu-id="84ceb-133">CONFIRM (4) (sent by Client)</span></span>
- <span data-ttu-id="84ceb-134">Odnów (5) (Wysłany przez klienta)</span><span class="sxs-lookup"><span data-stu-id="84ceb-134">RENEW (5) (sent by Client)</span></span>
- <span data-ttu-id="84ceb-135">Rebind (6) (wysłane przez klienta)</span><span class="sxs-lookup"><span data-stu-id="84ceb-135">REBIND (6) (sent by Client)</span></span>
- <span data-ttu-id="84ceb-136">WYDANIE (8) (wysyłane przez klienta)</span><span class="sxs-lookup"><span data-stu-id="84ceb-136">RELEASE (8) (sent by Client)</span></span>
- <span data-ttu-id="84ceb-137">Odrzuć (9) (Wysłany przez klienta)</span><span class="sxs-lookup"><span data-stu-id="84ceb-137">DECLINE (9) (sent by Client)</span></span>
- <span data-ttu-id="84ceb-138">INFORM_REQUEST (11) (wysyłane przez klienta)</span><span class="sxs-lookup"><span data-stu-id="84ceb-138">INFORM_REQUEST (11) (sent by Client)</span></span>
- <span data-ttu-id="84ceb-139">Zmień konfigurację \* (10) (wysyłanych przez serwer)</span><span class="sxs-lookup"><span data-stu-id="84ceb-139">RECONFIGURE\* (10) (sent by Server)</span></span>

<span data-ttu-id="84ceb-140">\* Ponowne konfigurowanie nie jest obsługiwane przez serwer DHCPv6 NetX Duo.</span><span class="sxs-lookup"><span data-stu-id="84ceb-140">\*RECONFIGURE is not supported by the NetX Duo DHCPv6 Server.</span></span>

<span data-ttu-id="84ceb-141">Podstawowa sekwencja żądań DHCPv6 z odpowiednikiem typu komunikatu protokołu DHCPv4 w nawiasie jest następująca:</span><span class="sxs-lookup"><span data-stu-id="84ceb-141">The basic DHCPv6 request sequence, with the equivalent DHCPv4 message type in parenthesis, is as follows:</span></span>

<span data-ttu-id="84ceb-142">Klient \***żądanie** _ (_Discovery *) **anons** serwera*(Oferta *) **żądanie** klienta (* żądanie *) **odpowiedź** serwera (* DHCPACK \*)</span><span class="sxs-lookup"><span data-stu-id="84ceb-142">Client ***Solicit** _ (_Discovery *) Server **Advertisement** (* Offer *) Client **Request** (* Request *) Server **Reply** (* DHCPAck*)</span></span>

<span data-ttu-id="84ceb-143">**Odnowienie** klienta (ta sama) **odpowiedź** z serwera (*DHCPACK*)</span><span class="sxs-lookup"><span data-stu-id="84ceb-143">Client **Renew**(same) Server **Reply** (*DHCPAck*)</span></span>

## <a name="dhcpv6-message-validation"></a><span data-ttu-id="84ceb-144">Sprawdzanie poprawności komunikatu protokołu DHCPv6</span><span class="sxs-lookup"><span data-stu-id="84ceb-144">DHCPv6 Message Validation</span></span>

<span data-ttu-id="84ceb-145">Identyfikator transakcji: Klient musi wygenerować identyfikator transakcji dla każdej wysyłanej wiadomości na serwer.</span><span class="sxs-lookup"><span data-stu-id="84ceb-145">Transaction ID: The Client must generate a transaction ID for each message it sends to the Server.</span></span> <span data-ttu-id="84ceb-146">Serwer DHCPv6 odrzuci komunikat od klienta, który nie pasuje do tego identyfikatora transakcji.</span><span class="sxs-lookup"><span data-stu-id="84ceb-146">The DHCPv6 Server will reject any message from the Client not matching this transaction ID.</span></span> <span data-ttu-id="84ceb-147">Serwer z kolei musi używać tego samego identyfikatora transakcji w odpowiedzi z powrotem do klienta.</span><span class="sxs-lookup"><span data-stu-id="84ceb-147">The Server in turn must use the same transaction ID in its responses back to the Client.</span></span>

<span data-ttu-id="84ceb-148">**Unikatowe identyfikatory protokołu DHCPv6 (DUIDs)**</span><span class="sxs-lookup"><span data-stu-id="84ceb-148">**DHCPv6 unique Identifiers (DUIDs)**</span></span>

<span data-ttu-id="84ceb-149">Wszystkie komunikaty serwera muszą zawierać również unikatowy identyfikator protokołu DHCPv6 (DUID) w każdym komunikacie lub klient DHCPv6 nie powinien akceptować wiadomości.</span><span class="sxs-lookup"><span data-stu-id="84ceb-149">All Server messages must also include a DHCPv6 unique Identifier (DUID) in each message or the DHCPv6 Client should not accept the message.</span></span> <span data-ttu-id="84ceb-150">Identyfikator DUID warstwy łączy to blok sterowania zawierający adres MAC klienta, typ sprzętu i Typ identyfikatora DUID.</span><span class="sxs-lookup"><span data-stu-id="84ceb-150">A Link Layer (LL) DUID is a control block containing client MAC address, hardware type, and DUID type.</span></span> <span data-ttu-id="84ceb-151">Identyfikator DUID czasu warstwy linku (LLT) dodatkowo zawiera pole czasu, które zmniejsza prawdopodobieństwo, że identyfikator DUID nie będzie unikatowy w sieci hosta.</span><span class="sxs-lookup"><span data-stu-id="84ceb-151">A Link Layer Time (LLT) DUID additionally contains a time field which decreases the chances the DUID will not be unique on the host network.</span></span> <span data-ttu-id="84ceb-152">Z tego powodu Specyfikacja RFC 3315 zaleca LLT DUIDs przez wszystkie DUIDs.</span><span class="sxs-lookup"><span data-stu-id="84ceb-152">For that reason RFC 3315 recommends LLT DUIDs over LL DUIDs.</span></span> <span data-ttu-id="84ceb-153">Jeśli aplikacja hosta nie utworzy własnej unikatowej wartości czasu, NetX Duo DHCPv6 udostępni domyślny.</span><span class="sxs-lookup"><span data-stu-id="84ceb-153">If the host application does not create its own unique time value, NetX Duo DHCPv6 will provide a default one.</span></span> <span data-ttu-id="84ceb-154">Trzeci Typ identyfikatora DUID to numer DUID przedsiębiorstwa (przypisany przez dostawcę), który zawiera zarejestrowany Identyfikator przedsiębiorstwa (jako zarejestrowany w organizacji IANA) i dane prywatne, które są zmienne w typie i długości, na przykład na podstawie rozmiaru pamięci, typu systemu operacyjnego innej konfiguracji sprzętowej.</span><span class="sxs-lookup"><span data-stu-id="84ceb-154">The third type of DUID is the Enterprise (Vendor assigned) DUID which contains a registered Enterprise ID (as in registered with IANA) and private data that is variable in type and length e.g. based on memory size, operating system type of other hardware configuration.</span></span> <span data-ttu-id="84ceb-155">Zapoznaj się z listą opcji konfiguracji w innym miejscu w tym dokumencie, aby skonfigurować przypisane wartości dostawcy serwera i identyfikator prywatny.</span><span class="sxs-lookup"><span data-stu-id="84ceb-155">See the list of Configuration Options elsewhere in this document for setting up the Server vendor assigned and private ID values.</span></span>

<span data-ttu-id="84ceb-156">Klient musi również uwzględnić jego identyfikator DUID w swoich komunikatach na serwerze z wyjątkiem INFORM_REQUEST lub serwer odrzuci je.</span><span class="sxs-lookup"><span data-stu-id="84ceb-156">The Client must also include its DUID in its messages to the Server except for INFORM_REQUEST, or the Server will reject them.</span></span>

<span data-ttu-id="84ceb-157">**Sesje serwera klienta DHCPv6**</span><span class="sxs-lookup"><span data-stu-id="84ceb-157">**DHCPv6 Client Server Sessions**</span></span>

<span data-ttu-id="84ceb-158">Klienci i serwery programu DHCPv6 wymieniają komunikaty za pośrednictwem protokołu UDP.</span><span class="sxs-lookup"><span data-stu-id="84ceb-158">DHCPv6 Clients and Servers exchange messages over UDP.</span></span> <span data-ttu-id="84ceb-159">Klient używa portu 546 do wysyłania i odbierania komunikatów DHCPv6, a serwer używa portu 547.</span><span class="sxs-lookup"><span data-stu-id="84ceb-159">The Client uses port 546 to send and receive DHCPv6 messages and the Server uses port 547.</span></span> <span data-ttu-id="84ceb-160">Klient początkowo używa swojego adresu lokalnego łącza do przesyłania i otrzymywania komunikatów DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-160">The Client initially uses its link-local address for transmitting and receiving DHCPv6 messages.</span></span> <span data-ttu-id="84ceb-161">Wysyła wszystkie komunikaty do serwerów DHCPv6 przy użyciu zastrzeżonego, w zakresie linku adresu multiemisji znanego jako *All_DHCP_Relay_Agents_and_Servers* adres multiemisji *(FF02:: 01:02)*.</span><span class="sxs-lookup"><span data-stu-id="84ceb-161">It sends all messages to DHCPv6 servers using a reserved, link-scoped multicast address known as the *All_DHCP_Relay_Agents_and_Servers* multicast address *(FF02::01:02)*.</span></span>

<span data-ttu-id="84ceb-162">Żądania przypisywania adresów ForIPv6, serwer DHCPv6 nasłuchuje komunikatów *żądania* wysyłanych do adresu *All_DHCP_Relay_Agents_and_Servers* .</span><span class="sxs-lookup"><span data-stu-id="84ceb-162">ForIPv6 address assignment requests, the DHCPv6 Server listens for *Solicit* messages sent to the *All_DHCP_Relay_Agents_and_Servers* address.</span></span> <span data-ttu-id="84ceb-163">*W żądaniu żądania* klient może zażądać przypisania określonego adresu IPv6 lub pozwolić serwerowi na wybranie jednego z nich.</span><span class="sxs-lookup"><span data-stu-id="84ceb-163">In the *Solicit* request, the Client can request the assignment of specific IPv6 address or let the Server choose one.</span></span> <span data-ttu-id="84ceb-164">Może również zażądać innych informacji o konfiguracji sieci z serwera.</span><span class="sxs-lookup"><span data-stu-id="84ceb-164">It can also request other network configuration information from the Server.</span></span>

<span data-ttu-id="84ceb-165">Jeśli DHCPv6Server wyodrębnia prawidłowy komunikat *żądania* i może przypisać do klienta adres IPv6, reaguje na wiadomość *anonsu* zawierającą adres IPv6, który zostanie udzielony klientowi, czas dzierżawy adresu IPv6 i wszelkie dodatkowe informacje wymagane przez klienta.</span><span class="sxs-lookup"><span data-stu-id="84ceb-165">If the DHCPv6Server extracts a valid *Solicit* message and can assign an IPv6 address to the Client, it responds with an *Advertise* message containing the IPv6 address it will grant to the Client, the IPv6 address lease time and any additional information requested by the Client.</span></span> <span data-ttu-id="84ceb-166">Jeśli klient zaakceptuje ofertę serwera, reaguje na komunikat *żądania* , co pozwoli serwerowi, że zaakceptuje adres IPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-166">If the Client accepts the Server offer it responds with a *Request* message letting the Server know it will accept the IPv6 address.</span></span> <span data-ttu-id="84ceb-167">Serwer potwierdza, że klient jest powiązany z adresem IPv6 z komunikatem *odpowiedzi* .</span><span class="sxs-lookup"><span data-stu-id="84ceb-167">The Server confirms the Client is bound to the IPv6 address with a *Reply* message.</span></span>

<span data-ttu-id="84ceb-168">Jeśli komunikat protokołu DHCPv6 klienta jest nieprawidłowy, serwer odrzuci komunikat w trybie dyskretnym.</span><span class="sxs-lookup"><span data-stu-id="84ceb-168">If the Client DHCPv6 message is invalid, the Server will discard the message silently.</span></span> <span data-ttu-id="84ceb-169">Jeśli serwer nie jest w stanie udzielić żądania, wyśle komunikat *odpowiedzi* z informacją o problemie w polu stan w programie Iana adresów IP.</span><span class="sxs-lookup"><span data-stu-id="84ceb-169">If the Server is unable to grant the request it will send a *Reply* message with an indication of the problem in the status field of the IP address IANA option.</span></span> <span data-ttu-id="84ceb-170">Jeśli otrzymano zduplikowane żądania klienta, serwer ponownie wyśle poprzednią odpowiedź DHCPv6, zakładając, że klient po prostu nie otrzymał tego pakietu.</span><span class="sxs-lookup"><span data-stu-id="84ceb-170">If duplicate Client requests are received the Server resends its previous DHCPv6 response, assuming the Client simply did not receive the packet.</span></span>

<span data-ttu-id="84ceb-171">Klient sprawdza, czy przypisany do niego adres IPv6 z serwera nie jest przypisany do innego hosta w systemie przy użyciu różnych protokołów IPv6, takich jak wykrywanie zduplikowanych adresów.</span><span class="sxs-lookup"><span data-stu-id="84ceb-171">It is up to the Client to verify that its assigned IPv6 address from the Server is not assigned to another host on the system by using various IPv6 protocols such as Duplicate Address Detection.</span></span> <span data-ttu-id="84ceb-172">Jeśli adres nie jest unikatowy, klient wyśle komunikat o *odrzuceniu* serwera.</span><span class="sxs-lookup"><span data-stu-id="84ceb-172">If the address is not unique, the Client will send the Server a *Decline* message.</span></span> <span data-ttu-id="84ceb-173">Serwer aktualizuje swoją tabelę dzierżaw IP przy użyciu tych informacji, co spowoduje nagranie przypisanego adresu.</span><span class="sxs-lookup"><span data-stu-id="84ceb-173">The Server updates its IP lease table with this information, recording that the address is already assigned.</span></span> <span data-ttu-id="84ceb-174">W międzyczasie klient musi ponownie uruchomić proces żądania protokołu DHCPv6 z innym komunikatem *żądania* .</span><span class="sxs-lookup"><span data-stu-id="84ceb-174">Meanwhile the Client must restart the DHCPv6 request process with another *Solicit* message.</span></span>

<span data-ttu-id="84ceb-175">Oprócz adresu IPv6 klient może również znać serwer DNS i inne informacje o sieci, takie jak nazwa domeny sieciowej.</span><span class="sxs-lookup"><span data-stu-id="84ceb-175">In addition to an IPv6 address, a Client will likely also need to know the DNS server and possibly other network information such as the network domain name.</span></span> <span data-ttu-id="84ceb-176">Protokół DHCPv6 udostępnia środki do żądania tych informacji przy użyciu żądań opcji w komunikatach *żądania i* *żądań* lub oddzielnie w komunikatach z *żądaniem informacji* .</span><span class="sxs-lookup"><span data-stu-id="84ceb-176">DHCPv6 provides the means to request this information using either the use of Option Requests in the *Solicit* and *Request* messages, or separately in *Information Request* messages.</span></span> <span data-ttu-id="84ceb-177">Opcje protokołu DHCPv6 zostały omówione w dalszej części tego rozdziału.</span><span class="sxs-lookup"><span data-stu-id="84ceb-177">DHCPv6 options are explained later in this chapter.</span></span>

<span data-ttu-id="84ceb-178">**Czas trwania dzierżawy protokołu IPv6**</span><span class="sxs-lookup"><span data-stu-id="84ceb-178">**IPv6 Lease Duration**</span></span>

<span data-ttu-id="84ceb-179">Gdy serwer przypisze klientowi adres IPv6, przypisuje mu również czas trwania dzierżawy (okres istnienia) w obszarze IANA, w którym klient ma rozpocząć odnawianie (T1) lub ponowne wiązanie (T2) jego adresu IPv6 przy użyciu funkcji *Odnów* i ponownie *powiązać* komunikaty.</span><span class="sxs-lookup"><span data-stu-id="84ceb-179">When the Server grants an IPv6 address to a Client, it also assigns the lease duration (lifetime)in the IANA option for when it recommends the Client to start renewing (T1) or rebinding (T2) its IPv6 address using *Renew* and *Rebind* messages.</span></span> <span data-ttu-id="84ceb-180">Różnica między nimi polega na tym, że klient kieruje komunikat *odnowienia* do serwera przez uwzględnienie identyfikatora DUID serwera w żądaniu *odnowienia* .</span><span class="sxs-lookup"><span data-stu-id="84ceb-180">The difference between the two is the Client directs the *Renew* message to the Server by including the Server DUID in the *Renew* request.</span></span> <span data-ttu-id="84ceb-181">Nie określa jednak żadnego serwera, w związku z czym nie zawiera identyfikatora DUID serwera w komunikacie *rebind* do adresu *All_DHCP_Relay_Agents_and_Servers* .</span><span class="sxs-lookup"><span data-stu-id="84ceb-181">However, it does not specify any server, and hence does not include a Server DUID, in the *Rebind* message to the *All_DHCP_Relay_Agents_and_Servers* address.</span></span> <span data-ttu-id="84ceb-182">Opcja IA, która zawiera rzeczywisty adres IPv6, który serwer przydaje klientowi, zawiera również preferowane i prawidłowe okresy istnienia, gdy dzierżawiony adres IPv6 staje się przestarzały lub przestarzały (nieprawidłowy).</span><span class="sxs-lookup"><span data-stu-id="84ceb-182">The IA option which contains the actual IPv6 address the Server grants the Client also contains the preferred and valid lifetimes when the leased IPv6 address becomes deprecated or obsolete (invalid), respectively.</span></span>

<span data-ttu-id="84ceb-183">Serwer DHCPv6 NetX Duo utrzymuje limit czasu sesji dla każdego klienta, aby śledzić czas między komunikatami klienta.</span><span class="sxs-lookup"><span data-stu-id="84ceb-183">The NetX Duo DHCPv6 Server maintains a session timeout for each Client to track the time between Client messages.</span></span> <span data-ttu-id="84ceb-184">Jest to konieczne w przypadku, gdy host klienta utraci łączność lub sieć nie działa.</span><span class="sxs-lookup"><span data-stu-id="84ceb-184">This is necessary in the event of a Client host losing connectivity or the network doing down.</span></span> <span data-ttu-id="84ceb-185">Po upływie limitu czasu sesji zakłada się, że klient nie jest już zainteresowany ani nie może wykonywać żądań protokołu DHCPv6 serwera.</span><span class="sxs-lookup"><span data-stu-id="84ceb-185">When the session timeout expires, it is assumed the Client is either no longer interested or able to make DHCPv6 requests of the Server.</span></span> <span data-ttu-id="84ceb-186">Serwer usuwa rekord klienta i zwraca dowolny wstępnie przypisany adres IPv6 z powrotem do dostępnej puli.</span><span class="sxs-lookup"><span data-stu-id="84ceb-186">The Server deletes the Client record and returns any tentatively assigned IPv6 address back to the available pool.</span></span> <span data-ttu-id="84ceb-187">Czas oczekiwania sesji to konfigurowalna opcja użytkownika.</span><span class="sxs-lookup"><span data-stu-id="84ceb-187">The session timeout wait is a user configurable option.</span></span>

<span data-ttu-id="84ceb-188">Jeśli klient chce zwolnić adres IPv6 lub odnajduje, że adres IPv6 przypisany do niego przez serwer DHCPv6 jest już używany, wysyła odpowiednio komunikat *Release* lub *Odrzuć* .</span><span class="sxs-lookup"><span data-stu-id="84ceb-188">If the Client wishes to release its IPv6 address, or discovers that the IPv6 address assigned to it by the DHCPv6 Server is already in use, it send a *Release* or *Decline* message respectively.</span></span> <span data-ttu-id="84ceb-189">W przypadku komunikatu o *wersji* serwer zwraca stan adresu IPv6 z powrotem do dostępnej puli.</span><span class="sxs-lookup"><span data-stu-id="84ceb-189">In the case of a *Release* message, the Server returns that IPv6 address status back to the available pool.</span></span> <span data-ttu-id="84ceb-190">W przypadku komunikatu o *odrzuceniu* aktualizuje on tabelę dzierżaw IP, aby wskazać, że ten adres IPv6 nie jest dostępny (własnością innej jednostki w innym miejscu w sieci).</span><span class="sxs-lookup"><span data-stu-id="84ceb-190">In the case of the *Decline* message, it updates its IP lease table to indicate this IPv6 address is not available (owned by another entity elsewhere on the network).</span></span>

<span data-ttu-id="84ceb-191">**Dane rekordu dzierżawy IPv6 i klienta**</span><span class="sxs-lookup"><span data-stu-id="84ceb-191">**IPv6 Lease and Client Record Data**</span></span>

<span data-ttu-id="84ceb-192">Gdy serwer DHCPv6 rozpocznie akceptowanie żądań klienta, zachowuje listę aktywnych klientów, którzy żądają lub mają przypisane adresy IPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-192">When the DHCPv6 Server starts accepting Client requests it maintains a list of active Clients who are requesting or have been assigned IPv6 addresses.</span></span> <span data-ttu-id="84ceb-193">Serwer sprawdza wygaśnięcie dzierżawy adresów IP za pomocą czasomierza dzierżawy, który okresowo aktualizuje czas trwania dzierżawy klienta.</span><span class="sxs-lookup"><span data-stu-id="84ceb-193">The Server checks for IP lease expiration by means of a lease timer that periodically updates the Client lease duration.</span></span> <span data-ttu-id="84ceb-194">Gdy czas trwania przekroczy prawidłowy okres istnienia, serwer wyczyści rekord klienta i zwróci jego adres IPv6 z powrotem do dostępnej puli.</span><span class="sxs-lookup"><span data-stu-id="84ceb-194">When the duration exceeds the valid lifetime, the Server clears the Client record and returns its IPv6 address back to the available pool.</span></span> <span data-ttu-id="84ceb-195">Klient może rozpocząć proces odnawiania/ponownego wiązania, aby to zrobić.</span><span class="sxs-lookup"><span data-stu-id="84ceb-195">It is up to the Client to start the renewal/rebinding process before this happens!</span></span>

<span data-ttu-id="84ceb-196">Tabela rekordu klienta serwera DHCPv6 NetX Duo zawiera informacje identyfikujące klientów i informacje o stanie dotyczące sprawdzania poprawności żądań klientów DHCPv6 oraz przypisywania lub ponownego przypisywania adresów IPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-196">The NetX Duo DHCPv6 Server client record table contains information to identify Clients, and ‘state’ information for validating DHCPv6 Client requests and assigning or re-assigning IPv6 addresses.</span></span> <span data-ttu-id="84ceb-197">Takie informacje obejmują:</span><span class="sxs-lookup"><span data-stu-id="84ceb-197">Such information includes:</span></span>

- <span data-ttu-id="84ceb-198">Unikatowy identyfikator protokołu DHCPv6 klienta (DUID), który jednoznacznie definiuje każdy host klienta w sieci.</span><span class="sxs-lookup"><span data-stu-id="84ceb-198">The Client DHCPv6 Unique Identifier (DUID) which uniquely defines each Client host on a network.</span></span> <span data-ttu-id="84ceb-199">Klient musi zawsze używać tego samego identyfikatora DUID dla wszystkich komunikatów protokołu DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-199">The Client must always use this same DUID for all its DHCPv6 messages.</span></span>

- <span data-ttu-id="84ceb-200">Skojarzenie tożsamości klienta dla adresów innych niż adresy tymczasowe (IANA) i adres IPv6 skojarzenia tożsamości (IA) łącznie, które definiują parametry przypisania adresu IPv6 klienta.</span><span class="sxs-lookup"><span data-stu-id="84ceb-200">The Client Identity Association for Non Temporary Addresses (IANA) and Identity Association IPv6 address (IA) cumulatively which define the Client IPv6 address assignment parameters.</span></span>

- <span data-ttu-id="84ceb-201">Żądania opcji klienta (serwer DNS, nazwa domeny itp.).</span><span class="sxs-lookup"><span data-stu-id="84ceb-201">Client option requests (DNS server, domain name, etc).</span></span>

- <span data-ttu-id="84ceb-202">Adres źródłowy IPv6 klienta (jeśli jest ustawiony) i adres docelowy (jeśli nie multiemisji) ostatniego żądania protokołu DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-202">The Client IPv6 source address (if set) and destination address (if not multicast) of its most recent DHCPv6 request.</span></span>

- <span data-ttu-id="84ceb-203">Klient jest ostatnim typem komunikatów i stanem DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-203">The Client’s most recent message type and DHCPv6 ‘state’.</span></span>

## <a name="netx-duo-dhcpv6-server-requirements-and-constraints"></a><span data-ttu-id="84ceb-204">Wymagania i ograniczenia dotyczące serwera DHCPv6 NetX Duo</span><span class="sxs-lookup"><span data-stu-id="84ceb-204">NetX Duo DHCPv6 Server Requirements and Constraints</span></span>

<span data-ttu-id="84ceb-205">Interfejs API serwera DHCPv6 NetX Duo wymaga ThreadX 5,1 lub nowszego, a NetX Duo 5,5 lub nowszego.</span><span class="sxs-lookup"><span data-stu-id="84ceb-205">The NetX Duo DHCPv6 Server API requires ThreadX 5.1 or later, and NetX Duo 5.5 or later.</span></span>

<span data-ttu-id="84ceb-206">**Wymagania**</span><span class="sxs-lookup"><span data-stu-id="84ceb-206">**Requirements**</span></span>

<span data-ttu-id="84ceb-207">***Konfiguracja zadania wątku IP***</span><span class="sxs-lookup"><span data-stu-id="84ceb-207">***IP Thread Task Setup***</span></span>

<span data-ttu-id="84ceb-208">Serwer DHCPv6 NetX Duo wymaga utworzenia wystąpienia IP na potrzeby wysyłania i otrzymywania komunikatów do protokołu DHCPv6 w jego łączech sieciowych.</span><span class="sxs-lookup"><span data-stu-id="84ceb-208">The NetX Duo DHCPv6 Server requires a creation of an IP instance for sending and receiving messages to DHCPv6 on its network link.</span></span> <span data-ttu-id="84ceb-209">Odbywa się to za pomocą usługi *nx_ip_create* .</span><span class="sxs-lookup"><span data-stu-id="84ceb-209">This is done using the *nx_ip_create* service.</span></span> <span data-ttu-id="84ceb-210">Należy utworzyć sam serwer DHCPv6 NetX Duo.</span><span class="sxs-lookup"><span data-stu-id="84ceb-210">The NetX Duo DHCPv6 Server itself must be created.</span></span> <span data-ttu-id="84ceb-211">Odbywa się to za pomocą usługi *nx_dhcpv6_server_create* .</span><span class="sxs-lookup"><span data-stu-id="84ceb-211">This is done using the *nx_dhcpv6_server_create* service.</span></span>

<span data-ttu-id="84ceb-212">Protokół DHCPv6 wykorzystuje NetX Duo, ICMPv6 i UDP.</span><span class="sxs-lookup"><span data-stu-id="84ceb-212">DHCPv6 utilizes NetX Duo, ICMPv6 and UDP.</span></span> <span data-ttu-id="84ceb-213">W związku z tym przed użyciem serwera DHCPv6 należy najpierw włączyć protokół IPv6, wywołując następujące usługi NetX Duo:</span><span class="sxs-lookup"><span data-stu-id="84ceb-213">Therefore IPv6 must first be enabled prior to using DHCPv6 Server by calling the following NetX Duo services:</span></span>

- <span data-ttu-id="84ceb-214">*nx_udp_enable*</span><span class="sxs-lookup"><span data-stu-id="84ceb-214">*nx_udp_enable*</span></span>
- <span data-ttu-id="84ceb-215">*nxd_ipv6_enable*</span><span class="sxs-lookup"><span data-stu-id="84ceb-215">*nxd_ipv6_enable*</span></span>
- <span data-ttu-id="84ceb-216">*nxd_icmp_enable*</span><span class="sxs-lookup"><span data-stu-id="84ceb-216">*nxd_icmp_enable*</span></span>

<span data-ttu-id="84ceb-217">Ponadto, aby można było uruchomić serwer DHCPv6, będzie on miał kilka zadań konfiguracji do wykonania:</span><span class="sxs-lookup"><span data-stu-id="84ceb-217">Further, before the DHCPv6 Server can be started, it has a number of set up tasks to perform:</span></span>

- <span data-ttu-id="84ceb-218">Utwórz i sprawdź poprawność swoich linków lokalnych i adresów globalnych IPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-218">Create and validate its link local and IPv6 global addresses.</span></span> <span data-ttu-id="84ceb-219">Sprawdzanie poprawności adresu jest wykonywane automatycznie przez NetX Duo przy użyciu wykrywania duplikatów adresów, jeśli jest włączone.</span><span class="sxs-lookup"><span data-stu-id="84ceb-219">Address validation is performed automatically by NetX Duo using Duplicate Address Detection if it is enabled.</span></span> <span data-ttu-id="84ceb-220">Zobacz *Podręcznik użytkownika programu NetX Duo* , aby uzyskać szczegółowe informacje na temat weryfikacji lokalnych i globalnych adresów IP.</span><span class="sxs-lookup"><span data-stu-id="84ceb-220">See the *NetX Duo User Manual* for details on link local and global IP address validation.</span></span>

- <span data-ttu-id="84ceb-221">Ustaw indeks interfejsu sieciowego dla jego interfejsu DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-221">Set the network interface index for its DHCPv6 interface.</span></span>

- <span data-ttu-id="84ceb-222">Utwórz zakres adresów IP dla adresów IPv6, które można przypisać.</span><span class="sxs-lookup"><span data-stu-id="84ceb-222">Create an IP address range for assignable IPv6 addresses.</span></span> <span data-ttu-id="84ceb-223">Lub jeśli dane istnieją z poprzedniej sesji protokołu DHCPv6 serwera, tabela dzierżawy IPv6 i rekordy klienta z tej sesji muszą zostać przekazane z nietrwałej pamięci do serwera DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-223">Or, if data exists from a previous Server DHCPv6 session, IPv6 lease table and client records from that session must be uploaded from non volatile memory to the DHCPv6 Server.</span></span> <span data-ttu-id="84ceb-224">Mały przykładowy system w innym miejscu w tym dokumencie przedstawia usługi serwera DHCPv6 do realizacji tego wymagania.</span><span class="sxs-lookup"><span data-stu-id="84ceb-224">The small example system elsewhere in this document will demonstrate the DHCPv6 Server services for accomplishing this requirement.</span></span>

- <span data-ttu-id="84ceb-225">Ustaw identyfikator DUID serwera.</span><span class="sxs-lookup"><span data-stu-id="84ceb-225">Set the Server DUID.</span></span> <span data-ttu-id="84ceb-226">Jeśli serwer utworzył swój identyfikator DUID w poprzedniej sesji, musi użyć tych samych danych do utworzenia tego samego identyfikatora DUID dla komunikatów dla klientów.</span><span class="sxs-lookup"><span data-stu-id="84ceb-226">If the Server has created its DUID in a previous session it must use the same data to create the same DUID for messages to its Clients.</span></span> <span data-ttu-id="84ceb-227">Mały przykładowy system w innym miejscu w tym dokumencie pokazuje, jak to wymaganie jest spełnione.</span><span class="sxs-lookup"><span data-stu-id="84ceb-227">The small example system elsewhere in this document will demonstrate how this requirement is accomplished.</span></span>

<span data-ttu-id="84ceb-228">W tym momencie serwer DHCPv6 jest gotowy do uruchomienia.</span><span class="sxs-lookup"><span data-stu-id="84ceb-228">At this point the DHCPv6 Server is ready to run.</span></span> <span data-ttu-id="84ceb-229">Wewnętrznie serwer DHCPv6 NetX Duo utworzy gniazdo UDP powiązane z portem 547 i zacznie nasłuchiwanie żądań klientów.</span><span class="sxs-lookup"><span data-stu-id="84ceb-229">Internally the NetX Duo DHCPv6 Server will create a UDP socket bound to port 547, and starts listening for Client requests.</span></span>

<span data-ttu-id="84ceb-230">***Wymagania dotyczące puli pakietów***</span><span class="sxs-lookup"><span data-stu-id="84ceb-230">***Packet Pool Requirements***</span></span>

<span data-ttu-id="84ceb-231">Serwer DHCPv6 NetX Duo wymaga puli pakietów do wysyłania komunikatów protokołu DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-231">NetX Duo DHCPv6 Server requires a packet pool for sending DHCPv6 messages.</span></span> <span data-ttu-id="84ceb-232">Rozmiar puli pakietów pod względem ładunku pakietu i liczby dostępnych pakietów jest konfigurowany przez użytkownika i zależy od przewidywanej ilości komunikatów protokołu DHCPv6 i innych przesyłania aplikacji hosta.</span><span class="sxs-lookup"><span data-stu-id="84ceb-232">The size of the packet pool in terms of packet payload and number of packets available is user configurable, and depends on the anticipated volume of DHCPv6 messages and other transmissions the host application will be sending.</span></span>

<span data-ttu-id="84ceb-233">Typowy komunikat protokołu DHCPv6 to około 200-300 bajtów w zależności od liczby dodatkowych opcji zażądanych przez klienta oraz informacji dostępnych na serwerze.</span><span class="sxs-lookup"><span data-stu-id="84ceb-233">A typical DHCPv6 message is about 200-300 bytes depending on the number of additional options requested by the Client, and information available from the Server.</span></span>

<span data-ttu-id="84ceb-234">***Ustawianie interfejsu serwera DHCPv6***</span><span class="sxs-lookup"><span data-stu-id="84ceb-234">***Setting the DHCPv6 Server interface***</span></span>

<span data-ttu-id="84ceb-235">Serwer DHCPv6 domyślnie przyjmuje podstawowy interfejs sieciowy jako interfejs, na którym będą akceptowane żądania klientów.</span><span class="sxs-lookup"><span data-stu-id="84ceb-235">The DHCPv6 Server defaults to the primary network interface as the interface it will accept Client requests on.</span></span> <span data-ttu-id="84ceb-236">Jednak aplikacja hosta musi nadal ustawić indeks adresów globalnych, który został użyty do utworzenia adresu globalnego serwera.</span><span class="sxs-lookup"><span data-stu-id="84ceb-236">However, the host application must still set the global address index which it used to create the Server global address.</span></span> <span data-ttu-id="84ceb-237">Indeks interfejsu protokołu DHCPv6 i globalny indeks adresów są ustawiane za pomocą usługi *nx_dhcpv6_server_interface_set* .</span><span class="sxs-lookup"><span data-stu-id="84ceb-237">The DHCPv6 interface index and global address index are set using the *nx_dhcpv6_server_interface_set* service.</span></span> <span data-ttu-id="84ceb-238">Przedstawiono to również w "małych przykładach" w tym dokumencie.</span><span class="sxs-lookup"><span data-stu-id="84ceb-238">This is also demonstrated in the “small example” in this document.</span></span>

<span data-ttu-id="84ceb-239">***Zapisywanie identyfikatora DUID protokołu DHCPv6 między ponownymi uruchomieniami serwera***</span><span class="sxs-lookup"><span data-stu-id="84ceb-239">***Saving DHCPv6 DUID across Server Reboots***</span></span>

<span data-ttu-id="84ceb-240">Protokół DHCPv6 wymaga, aby serwer używał tego samego identyfikatora DUID dla wielu ponownych uruchomień.</span><span class="sxs-lookup"><span data-stu-id="84ceb-240">The DHCPv6 protocol requires the Server to use the same DUID across multiple reboots.</span></span> <span data-ttu-id="84ceb-241">Wszystkie dane używane do tworzenia identyfikatora DUID muszą być przechowywane i pobierane z pamięci nieulotnej na potrzeby tego wymagania.</span><span class="sxs-lookup"><span data-stu-id="84ceb-241">Any data used to create the DUID must therefore be stored and retrieved from nonvolatile memory for this requirement.</span></span> <span data-ttu-id="84ceb-242">Dla hostów, które używają warstwy linku i identyfikatora DUID czasu, który wymaga dostępu do zegara w czasie rzeczywistym.</span><span class="sxs-lookup"><span data-stu-id="84ceb-242">For hosts that use the Link Layer Plus Time DUID which requires access to a real time clock.</span></span> <span data-ttu-id="84ceb-243">Aplikacja hosta DHCPv6 NetX Duo powinna obejmować dostęp do danych w czasie rzeczywistym w celu wygenerowania wartości czasu dla początkowego tworzenia identyfikatora DUID serwera i przechowywania tych danych do ponownego użycia na kolejnych sesjach serwera.</span><span class="sxs-lookup"><span data-stu-id="84ceb-243">The NetX Duo DHCPv6 host application should include real time data access for generating a time value for the initial Server DUID creation, and store that data for reuse on subsequent Server sessions.</span></span> <span data-ttu-id="84ceb-244">*Nx_dhcpv6_set_server_duid* następnie pobiera dane identyfikatora DUID jako ich argumenty, a także opcje konfiguracji, w zależności od typu identyfikatora DUID, do produkcji (lub odtworzenia) własnego identyfikatora DUID.</span><span class="sxs-lookup"><span data-stu-id="84ceb-244">The *nx_dhcpv6_set_server_duid* then takes DUID data as its arguments, as well as configuration options depending on DUID type, to produce (or reproduce) its own DUID.</span></span>

<span data-ttu-id="84ceb-245">***Tworzenie listy adresów IPv6 do przypisania***</span><span class="sxs-lookup"><span data-stu-id="84ceb-245">***Assignable IPv6 Address List Creation***</span></span>

<span data-ttu-id="84ceb-246">Po utworzeniu serwera DHCPv6 aplikacja hosta serwera musi utworzyć zakres możliwych do przypisania adresów IPv6, jeśli nie ma wcześniej przechowywanych danych listy adresów IP.</span><span class="sxs-lookup"><span data-stu-id="84ceb-246">After creation of the DHCPv6 Server, the Server host application must create a range of assignable IPv6 global addresses if there is no previously stored IP address list data.</span></span> <span data-ttu-id="84ceb-247">Jest to realizowane za pomocą usługi *nx_dhcpv6_create_ip_address_range*, która przyjmuje jako wejściowy i końcowy adres IPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-247">This is done using the *nx_dhcpv6_create_ip_address_range* service which takes as input a starting and ending IPv6 address.</span></span>

<span data-ttu-id="84ceb-248">***Zapisywanie danych o adresie i kliencie przypisanych do protokołu DHCPv6***</span><span class="sxs-lookup"><span data-stu-id="84ceb-248">***Saving DHCPv6 Assignable Address and Client data***</span></span>

<span data-ttu-id="84ceb-249">Protokół DHCPv6 wymaga, aby serwer DHCPv6 zapisywał dane klienta i adresu IPv6 w magazynie nietrwałym w przypadku ponownego rozruchu serwera.</span><span class="sxs-lookup"><span data-stu-id="84ceb-249">The DHCPv6 protocol requires that the DHCPv6 Server save its Client and IPv6 address data in nonvolatile storage in the event of rebooting the server.</span></span> <span data-ttu-id="84ceb-250">Serwer DHCPv6 NetX Duo zawiera kilka interfejsów API do przekazywania i pobierania danych adresów klienta i IPv6 do i z serwera DHCPv6 odpowiednio:</span><span class="sxs-lookup"><span data-stu-id="84ceb-250">The NetX Duo DHCPv6 Server has several API for uploading and downloading Client and IPv6 address data to and from the DHCPv6 Server, respectively:</span></span>

<span data-ttu-id="84ceb-251">*nx_dhcpv6_add_client_record*</span><span class="sxs-lookup"><span data-stu-id="84ceb-251">*nx_dhcpv6_add_client_record*</span></span>

<span data-ttu-id="84ceb-252">*nx_dhcpv6_add_ip_address_lease*</span><span class="sxs-lookup"><span data-stu-id="84ceb-252">*nx_dhcpv6_add_ip_address_lease*</span></span>

<span data-ttu-id="84ceb-253">*nx_dhcpv6_retrieve_client_record*</span><span class="sxs-lookup"><span data-stu-id="84ceb-253">*nx_dhcpv6_retrieve_client_record*</span></span>

<span data-ttu-id="84ceb-254">*nx_dhcpv6_retrieve_ip_address_lease*</span><span class="sxs-lookup"><span data-stu-id="84ceb-254">*nx_dhcpv6_retrieve_ip_address_lease*</span></span>

<span data-ttu-id="84ceb-255">Przed ponownym uruchomieniem serwera należy wykonać przekazywanie danych na serwer.</span><span class="sxs-lookup"><span data-stu-id="84ceb-255">Uploading data to the Server must be done before restarting the Server.</span></span> <span data-ttu-id="84ceb-256">Pobieranie danych należy wykonać tylko po zatrzymaniu lub wstrzymaniu serwera DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-256">Downloading the data should be done only after the DHCPv6 Server is stopped (or suspended).</span></span> <span data-ttu-id="84ceb-257">Usługi do wykonania te zostały szczegółowo opisane w dalszej części tego dokumentu.</span><span class="sxs-lookup"><span data-stu-id="84ceb-257">The services for doing so are described in detail later in this document.</span></span> <span data-ttu-id="84ceb-258">Jednak protokół DHCPv6 NetX Duo nie określa dostępu do magazynu nietrwałego.</span><span class="sxs-lookup"><span data-stu-id="84ceb-258">However, the NetX Duo DHCPv6 provides does not define an access to nonvolatile storage.</span></span> <span data-ttu-id="84ceb-259">Ta wartość musi być obsługiwana przez aplikację hosta.</span><span class="sxs-lookup"><span data-stu-id="84ceb-259">This must be handled by the host application.</span></span> <span data-ttu-id="84ceb-260">Niewielki przykład pokazuje, jak działa aplikacja hosta.</span><span class="sxs-lookup"><span data-stu-id="84ceb-260">The small example demonstrates how the host application does this.</span></span>

<span data-ttu-id="84ceb-261">***Unikatowy identyfikator DHCP serwera (DUID)***</span><span class="sxs-lookup"><span data-stu-id="84ceb-261">***Server DHCP Unique Identifier (DUID)***</span></span>

<span data-ttu-id="84ceb-262">Identyfikator DUID serwera jednoznacznie definiuje hosta serwera DHCPv6 w sieci.</span><span class="sxs-lookup"><span data-stu-id="84ceb-262">The Server DUID uniquely defines the DHCPv6 Server host on the network.</span></span> <span data-ttu-id="84ceb-263">Jeśli serwer nie utworzył wcześniej identyfikatora DUID, można go utworzyć przy użyciu *nx_dhcpv6_server_set_duid* .</span><span class="sxs-lookup"><span data-stu-id="84ceb-263">If a Server has not previously created its DUID, it can use the *nx_dhcpv6_server_set_duid* to create one.</span></span> <span data-ttu-id="84ceb-264">Zgodnie z dokumentem RFC 3315 serwer DHCPv6 musi zapisać ten identyfikator DUID w pamięci nieulotnej, aby mógł go pobrać po ponownym uruchomieniu serwera.</span><span class="sxs-lookup"><span data-stu-id="84ceb-264">As per RFC 3315, the DHCPv6 Server must save this DUID to nonvolatile memory to be able to retrieve it after Server reboots.</span></span> <span data-ttu-id="84ceb-265">Serwer DHCPv6 obsługuje warstwy linków, łącznego czasu warstwy i jednostki (przypisane przez dostawcę).</span><span class="sxs-lookup"><span data-stu-id="84ceb-265">The DHCPv6 Server supports the Link Layer, Link Layer Time and Enterprise (Vendor assigned) DUID types.</span></span> <span data-ttu-id="84ceb-266">Należy pamiętać, że klient musi bezpośrednio wysłać w typie DUID dostawcy.</span><span class="sxs-lookup"><span data-stu-id="84ceb-266">Note that the Client must send in the Vendor type DUID directly.</span></span> <span data-ttu-id="84ceb-267">Opcja dla typu dostawcy DUIDs (17) nie jest bezpośrednio obsługiwana przez serwer NetX Duo DHPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-267">The option for Vendor type DUIDs (17) is not directly supported by the NetX Duo DHPv6 Server.</span></span>

<span data-ttu-id="84ceb-268">Aplikacja hosta serwera DHCPv6 ma domyślne wartości przypisywania adresów IPv6, w tym limit czasu dzierżawy.</span><span class="sxs-lookup"><span data-stu-id="84ceb-268">The DHCPv6 Server host application has default values for IPv6 address assignment including lease timeout.</span></span> <span data-ttu-id="84ceb-269">Zobacz sekcję konfigurowalne opcje w dalszej części tego dokumentu, aby dowiedzieć się, jak ustawić te opcje.</span><span class="sxs-lookup"><span data-stu-id="84ceb-269">See Configurable Options later in this document for how to set these options.</span></span> <span data-ttu-id="84ceb-270">:</span><span class="sxs-lookup"><span data-stu-id="84ceb-270">:</span></span>

<span data-ttu-id="84ceb-271">Blok sterowania *Iana* zawiera pola T1 i T2.</span><span class="sxs-lookup"><span data-stu-id="84ceb-271">The *IANA* control block contains the T1 and T2 fields.</span></span> <span data-ttu-id="84ceb-272">Blok *IA* w bloku sterowania *Iana* zawiera pola preferowany i prawidłowy okres istnienia.</span><span class="sxs-lookup"><span data-stu-id="84ceb-272">The *IA* block in the *IANA* control block contains the preferred and valid lifetime fields.</span></span> <span data-ttu-id="84ceb-273">Aplikacja hosta ma konfigurowalne opcje zdefiniowane w innym miejscu w tym dokumencie, aby ustawić te opcje.</span><span class="sxs-lookup"><span data-stu-id="84ceb-273">The host application has configurable options defined elsewhere in this document for setting these options.</span></span> <span data-ttu-id="84ceb-274">Są one przypisane do wszystkich żądań adresów IPv6 klienta.</span><span class="sxs-lookup"><span data-stu-id="84ceb-274">They are assigned to all Client IPv6 address requests.</span></span>

<span data-ttu-id="84ceb-275">Te parametry dzierżawy adresów IP protokołu DHCPv6 są zdefiniowane poniżej.</span><span class="sxs-lookup"><span data-stu-id="84ceb-275">These DHCPv6 IP lease parameters are defined below.</span></span>

<span data-ttu-id="84ceb-276">T1 — czas w sekundach, po którym klient musi rozpocząć Odnawianie adresu IPv6 z serwera, który go przypisał.</span><span class="sxs-lookup"><span data-stu-id="84ceb-276">T1 – time in seconds when the Client must start renewing its IPv6 address from the Server that assigned it.</span></span>

<span data-ttu-id="84ceb-277">T2 — czas w sekundach, po którym klient musi rozpocząć ponowne wiązanie adresu IPv6, jeśli odnowienie nie powiodło się, z dowolnym serwerem w jego łączu.</span><span class="sxs-lookup"><span data-stu-id="84ceb-277">T2 – time in seconds when the Client must start rebinding the IPv6 address, if renewal failed, with any Server on its link.</span></span>

<span data-ttu-id="84ceb-278">Preferowany okres istnienia — czas w sekundach, po którym adres klienta staje się przestarzały, jeśli klient nie zostanie odnowiony ani odwiązany.</span><span class="sxs-lookup"><span data-stu-id="84ceb-278">Preferred lifetime – time in seconds when the Client address becomes deprecated if the Client has not renewed or rebound it.</span></span> <span data-ttu-id="84ceb-279">Klient nadal może używać tego adresu.</span><span class="sxs-lookup"><span data-stu-id="84ceb-279">The Client can still use this address.</span></span>

<span data-ttu-id="84ceb-280">Prawidłowy okres istnienia — czas w sekundach, po upływie którego wygasł adres IP klienta i nie może używać tego adresu w transmisjach sieciowych.</span><span class="sxs-lookup"><span data-stu-id="84ceb-280">Valid lifetime – time in seconds when the Client IP address is expired and MUST not use this address in its network transmissions.</span></span>

<span data-ttu-id="84ceb-281">Specyfikacja RFC zaleca użycie czasu T1 i T2 odpowiednio 0,5 i 0,8 z preferowanym okresem istnienia w opcji programu Client *Iana* .</span><span class="sxs-lookup"><span data-stu-id="84ceb-281">The RFC recommends T1 and T2 times that are 0.5 and 0.8, respectively, of the preferred lifetime in the Client *IANA* option.</span></span> <span data-ttu-id="84ceb-282">Jeśli serwer nie ma preferencji, należy ustawić te czasy na zero.</span><span class="sxs-lookup"><span data-stu-id="84ceb-282">If the Server has no preference, it should set these times to zero.</span></span> <span data-ttu-id="84ceb-283">Jeśli odpowiedź serwera zawiera czas T1 i T2 ustawiony na zero, pozwala klientowi ustawić własne czasy T1 i T2.</span><span class="sxs-lookup"><span data-stu-id="84ceb-283">If a Server reply contains T1 and T2 times set to zero, it is letting the Client set its own T1 and T2 times.</span></span>

<span data-ttu-id="84ceb-284">**Ograniczenia**</span><span class="sxs-lookup"><span data-stu-id="84ceb-284">**Constraints**</span></span>

<span data-ttu-id="84ceb-285">Serwer DHCPv6 NetX Duo nie obsługuje następujących opcji protokołu DHCPv6:</span><span class="sxs-lookup"><span data-stu-id="84ceb-285">NetX Duo DHCPv6 Server does not support the following DHCPv6 options:</span></span>

  - <span data-ttu-id="84ceb-286">Opcja szybkiego zatwierdzania, która optymalizuje proces żądania adresu DHCPv6 tylko do wymiany wiadomości na żądanie i odpowiedź</span><span class="sxs-lookup"><span data-stu-id="84ceb-286">Rapid Commit option which optimizes the DHCPv6 address request process to just the Solicit and Reply message exchange</span></span>

  - <span data-ttu-id="84ceb-287">Opcja Zmień konfigurację, która pozwala serwerowi inicjować zmiany stanu adresu IP klienta.</span><span class="sxs-lookup"><span data-stu-id="84ceb-287">Reconfigure option which allows the Server can initiate changes to the Client’s IP address status.</span></span>

  - <span data-ttu-id="84ceb-288">Opcja emisji pojedynczej; wszystkie komunikaty klienta muszą być wysyłane na adres *All_DHCP_Relay_Agents_and_Servers* multiemisji, a nie bezpośrednio do serwera DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-288">Unicast option; all Client messages must be sent to the *All_DHCP_Relay_Agents_and_Servers* multicast address rather than to the DHCPv6 Server directly.</span></span>

  - <span data-ttu-id="84ceb-289">Skojarzenie tożsamości dla opcji adresy tymczasowe (IA_TA), która jest tymczasowym adresem IP przyznanym klientowi.</span><span class="sxs-lookup"><span data-stu-id="84ceb-289">Identity Association for the Temporary Addresses(IA_TA)option which is a temporary IP address granted to a Client.</span></span>

  - <span data-ttu-id="84ceb-290">Wiele opcji IA (IPv6 addresss) na żądanie klienta</span><span class="sxs-lookup"><span data-stu-id="84ceb-290">Multiple IA (IPv6 addresses) options per Client Request</span></span>

  - <span data-ttu-id="84ceb-291">Host przekazywania między klientem i serwerem DHCPv6, np. klientem i serwerem, musi znajdować się w tej samej sieci.</span><span class="sxs-lookup"><span data-stu-id="84ceb-291">Relay host between DHCPv6 Client and Server e.g. Client and Server must be on the same network.</span></span>

  - <span data-ttu-id="84ceb-292">Protokół IPSec i uwierzytelnianie nie są obsługiwane w komunikatach protokołu DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-292">IPSec and Authentication are not supported in DHCPv6 messaging.</span></span> <span data-ttu-id="84ceb-293">Jednak wystąpienie protokołu IP może być włączone IPSec w zależności od używanej wersji programu NetX Duo.</span><span class="sxs-lookup"><span data-stu-id="84ceb-293">However, the IP instance may be IPSec enabled depending on the version of NetX Duo in use.</span></span>

  - <span data-ttu-id="84ceb-294">Serwer DHCPv6 NetX Duo bezpośrednio obsługuje tylko żądanie opcji serwera DNS.</span><span class="sxs-lookup"><span data-stu-id="84ceb-294">The NetX Duo DHCPv6 Server directly supports only the DNS server option request.</span></span> <span data-ttu-id="84ceb-295">Może to ulec zmianie w przyszłych wersjach.</span><span class="sxs-lookup"><span data-stu-id="84ceb-295">This may change in future releases.</span></span>

  - <span data-ttu-id="84ceb-296">Opcja delegowania prefiksu nie jest obsługiwana.</span><span class="sxs-lookup"><span data-stu-id="84ceb-296">The Prefix Delegation option is not supported.</span></span>

  - <span data-ttu-id="84ceb-297">Uwierzytelnianie komunikatów protokołu DHCPv6, chociaż można je włączyć w źródłowym środowisku NetX Duo.</span><span class="sxs-lookup"><span data-stu-id="84ceb-297">Authentication of DHCPv6 messages although IPSec can be enabled in the underlying NetX Duo environment.</span></span> <span data-ttu-id="84ceb-298">Serwer DHCPv6 NetX Duo nie obsługuje połączeń przekaźników z klientami.</span><span class="sxs-lookup"><span data-stu-id="84ceb-298">Neither does the NetX Duo DHCPv6 Server support relay connections to the Clients.</span></span> <span data-ttu-id="84ceb-299">Przyjmuje się, że wszystkie żądania klientów pochodzą z hostów w sieci serwerów.</span><span class="sxs-lookup"><span data-stu-id="84ceb-299">It is assumed all Client requests originate from hosts on the Server network.</span></span>

## <a name="netx-duo-dhcpv6-server-callback-functions"></a><span data-ttu-id="84ceb-300">Funkcje wywołania zwrotnego serwera DHCPv6 NetX Duo</span><span class="sxs-lookup"><span data-stu-id="84ceb-300">NetX Duo DHCPv6 Server Callback Functions</span></span>

<span data-ttu-id="84ceb-301">*nx_dhcpv6_IP_address_declined_handler*</span><span class="sxs-lookup"><span data-stu-id="84ceb-301">*nx_dhcpv6_IP_address_declined_handler*</span></span>

<span data-ttu-id="84ceb-302">Gdy klient DHCPv6 wyśle komunikat o odrzuceniu, serwer DHCPv6 NetX Duo oznaczy adres jako niedostępny w swoich tabelach adresów IPv6.</span><span class="sxs-lookup"><span data-stu-id="84ceb-302">When the DHCPv6 Client sends a Decline message, the NetX Duo DHCPv6 Server marks the address as not available in its IPv6 address tables.</span></span> <span data-ttu-id="84ceb-303">Aby można było dostosować obsługę serwera w tym komunikacie, zostanie udostępniona *nx_dhcpv6_IP_address_declined_handler* *.*</span><span class="sxs-lookup"><span data-stu-id="84ceb-303">To have the ability to customize the Server handling of this message, the *nx_dhcpv6_IP_address_declined_handler* is provided *.*</span></span> <span data-ttu-id="84ceb-304">Jednak to wywołanie zwrotne nie jest obecnie zaimplementowane.</span><span class="sxs-lookup"><span data-stu-id="84ceb-304">However, this callback is not currently implemented.</span></span>

<span data-ttu-id="84ceb-305">*nx_dhcpv6_server_option_request_handler*</span><span class="sxs-lookup"><span data-stu-id="84ceb-305">*nx_dhcpv6_server_option_request_handler*</span></span>

<span data-ttu-id="84ceb-306">Gdy komunikat klienta DHCPv6 zawiera dane żądania opcji, serwer DHCPv6 NetX Duo przekazuje każdy kod opcji żądania do tego wywołania zwrotnego użytkownika, jeśli jest zdefiniowany.</span><span class="sxs-lookup"><span data-stu-id="84ceb-306">When the DHCPv6 Client message contains option request data, the NetX Duo DHCPv6 Server forwards each option request option code to this user callback, if defined.</span></span> <span data-ttu-id="84ceb-307">Dzięki temu serwer NetX Duo może umożliwić użytkownikowi wypełnienie danych za pomocą wywołania zwrotnego zdefiniowanego przez użytkownika.</span><span class="sxs-lookup"><span data-stu-id="84ceb-307">This gives the NetX Duo Server the capability to let the user defined callback fill in the data.</span></span> <span data-ttu-id="84ceb-308">Jednak ta funkcja nie jest obecnie zaimplementowana.</span><span class="sxs-lookup"><span data-stu-id="84ceb-308">However this functionality is not currently implemented.</span></span>

## <a name="supported-dhcpv6-rfcs"></a><span data-ttu-id="84ceb-309">Obsługiwane specyfikacje RFC protokołu DHCPv6</span><span class="sxs-lookup"><span data-stu-id="84ceb-309">Supported DHCPv6 RFCs</span></span>

<span data-ttu-id="84ceb-310">Protokół DHCPv6 NetX Duo jest zgodny z RFC3315, RFC3646 i powiązanymi specyfikacjami RFC.</span><span class="sxs-lookup"><span data-stu-id="84ceb-310">NetX Duo DHCPv6 is compliant with RFC3315, RFC3646, and related RFCs.</span></span>