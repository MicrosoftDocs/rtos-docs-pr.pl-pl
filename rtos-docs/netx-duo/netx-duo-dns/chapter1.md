---
title: Rozdział 1 — wprowadzenie do klienta DNS usługi Azure RTO NetX Duo
description: System DNS udostępnia rozproszoną bazę danych, która zawiera mapowanie między nazwami domen i fizycznymi adresami IP.
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 4c07d6e3183d421c637874dcdeff3767554fca78
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/22/2021
ms.locfileid: "104821930"
---
# <a name="chapter-1---introduction-to-the-azure-rtos-netx-duo-dns-client"></a><span data-ttu-id="2f142-103">Rozdział 1 — wprowadzenie do klienta DNS usługi Azure RTO NetX Duo</span><span class="sxs-lookup"><span data-stu-id="2f142-103">Chapter 1 - Introduction to the Azure RTOS NetX Duo DNS Client</span></span>

<span data-ttu-id="2f142-104">System DNS udostępnia rozproszoną bazę danych, która zawiera mapowanie między nazwami domen i fizycznymi adresami IP.</span><span class="sxs-lookup"><span data-stu-id="2f142-104">The DNS provides a distributed database that contains mapping between domain names and physical IP addresses.</span></span> <span data-ttu-id="2f142-105">Baza danych jest określana jako *dystrybuowana* , ponieważ nie ma żadnej pojedynczej jednostki w Internecie zawierającej kompletne mapowanie.</span><span class="sxs-lookup"><span data-stu-id="2f142-105">The database is referred to as *distributed* because there is no single entity on the Internet that contains the complete mapping.</span></span> <span data-ttu-id="2f142-106">Jednostka, która utrzymuje część mapowania, nazywa się serwerem DNS.</span><span class="sxs-lookup"><span data-stu-id="2f142-106">An entity that maintains a portion of the mapping is called a DNS Server.</span></span> <span data-ttu-id="2f142-107">Internet składa się z wielu serwerów DNS, z których każdy zawiera podzestaw bazy danych.</span><span class="sxs-lookup"><span data-stu-id="2f142-107">The Internet is composed of numerous DNS Servers, each of which contains a subset of the database.</span></span> <span data-ttu-id="2f142-108">Serwery DNS odpowiadają również na żądania klientów DNS dotyczące informacji o mapowaniu nazw domen, tylko jeśli serwer ma żądane mapowanie.</span><span class="sxs-lookup"><span data-stu-id="2f142-108">DNS Servers also respond to DNS Client requests for domain name mapping information, only if the server has the requested mapping.</span></span>

<span data-ttu-id="2f142-109">Protokół klienta DNS dla NetX Duo udostępnia aplikację z usługami do żądania informacji o mapowaniu z jednego lub większej liczby serwerów DNS.</span><span class="sxs-lookup"><span data-stu-id="2f142-109">The DNS Client protocol for NetX Duo provides the application with services to request mapping information from one or more DNS Servers.</span></span>

## <a name="dns-client-setup"></a><span data-ttu-id="2f142-110">Konfiguracja klienta DNS</span><span class="sxs-lookup"><span data-stu-id="2f142-110">DNS Client Setup</span></span>

<span data-ttu-id="2f142-111">Aby zapewnić prawidłowe działanie, pakiet klienta DNS wymaga, aby wystąpienie adresu IP NetX Duo zostało już utworzone.</span><span class="sxs-lookup"><span data-stu-id="2f142-111">In order to function properly, the DNS Client package requires that a NetX Duo IP instance has already been created.</span></span>

<span data-ttu-id="2f142-112">Po utworzeniu klienta DNS aplikacja musi dodać jeden lub więcej serwerów DNS do listy serwerów obsługiwanej przez klienta DNS.</span><span class="sxs-lookup"><span data-stu-id="2f142-112">After creating the DNS Client, the application must add one or more DNS servers to the server list maintained by the DNS Client.</span></span> <span data-ttu-id="2f142-113">Aby dodać serwery DNS, aplikacja używa usługi *nxd_dns_server_add* .</span><span class="sxs-lookup"><span data-stu-id="2f142-113">To add DNS servers, the application uses the *nxd_dns_server_add* service.</span></span> <span data-ttu-id="2f142-114">*Nx_dns_server_add* usługi klienta DNS NetX Duo można także użyć do dodawania serwerów.</span><span class="sxs-lookup"><span data-stu-id="2f142-114">The NetX Duo DNS Client service *nx_dns_server_add* can also be used to add servers.</span></span> <span data-ttu-id="2f142-115">Jednak akceptuje tylko adresy IPv4 i zaleca się, aby deweloperzy używali usługi *nxd_dns_server_add* .</span><span class="sxs-lookup"><span data-stu-id="2f142-115">However it only accepts IPv4 addresses and it is recommended that developers use the *nxd_dns_server_add* service instead.</span></span>

<span data-ttu-id="2f142-116">Jeśli opcja NX_DNS_IP_GATEWAY_SERVER jest włączona, a adres bramy wystąpienia IP jest różny od zera, Brama wystąpienia IP jest automatycznie dodawana jako podstawowy serwer DNS.</span><span class="sxs-lookup"><span data-stu-id="2f142-116">If the NX_DNS_IP_GATEWAY_SERVER option is enabled, and the IP instance gateway address is non zero, the IP instance gateway is automatically added as the primary DNS server.</span></span> <span data-ttu-id="2f142-117">Jeśli informacje o serwerze DNS nie są identyfikowane statycznie, mogą również pochodzić z Dynamic Host Configuration Protocol (DHCP) dla NetX Duo.</span><span class="sxs-lookup"><span data-stu-id="2f142-117">If DNS server information is not statically known, it may also be derived through the Dynamic Host Configuration Protocol (DHCP) for NetX Duo.</span></span> <span data-ttu-id="2f142-118">Aby uzyskać więcej informacji, zapoznaj się z podręcznikiem użytkownika DHCP NetX Duo.</span><span class="sxs-lookup"><span data-stu-id="2f142-118">Please refer to the NetX Duo DHCP User Guide for more information.</span></span>

<span data-ttu-id="2f142-119">Klient DNS wymaga puli pakietów do przesyłania komunikatów DNS.</span><span class="sxs-lookup"><span data-stu-id="2f142-119">The DNS Client requires a packet pool for transmitting DNS messages.</span></span> <span data-ttu-id="2f142-120">Domyślnie klient DNS tworzy tę pulę pakietów, gdy zostanie wywołana usługa *nx_dns_create* .</span><span class="sxs-lookup"><span data-stu-id="2f142-120">By default, the DNS Client creates this packet pool when the *nx_dns_create* service is called.</span></span> <span data-ttu-id="2f142-121">Opcje konfiguracji NX_DNS_PACKET_PAYLOAD_UNALIGNED i NX_DNS_PACKET_POOL_SIZE umożliwiają aplikacji określenie rozmiaru ładunku pakietu i puli pakietów (np. liczby pakietów) odpowiednio do tej puli pakietów.</span><span class="sxs-lookup"><span data-stu-id="2f142-121">The configuration options NX_DNS_PACKET_PAYLOAD_UNALIGNED and NX_DNS_PACKET_POOL_SIZE allow the application to determine the packet payload and packet pool size (e.g. number of packets) of this packet pool respectively.</span></span> <span data-ttu-id="2f142-122">Te opcje są opisane w sekcji "Opcje konfiguracji" w rozdziale dwa.</span><span class="sxs-lookup"><span data-stu-id="2f142-122">These options are described in section “Configuration Options” in Chapter Two.</span></span>

<span data-ttu-id="2f142-123">Alternatywą dla klienta DNS tworzenia własnej puli pakietów jest utworzenie puli pakietów przez aplikację i ustawienie jej jako puli pakietów klienta DNS przy użyciu usługi *nx_dns_packet_pool_set* .</span><span class="sxs-lookup"><span data-stu-id="2f142-123">An alternative to the DNS Client creating its own packet pool is for the application to create the packet pool and set it as the DNS Client’s packet pool using the *nx_dns_packet_pool_set* service.</span></span> <span data-ttu-id="2f142-124">Aby to zrobić, należy zdefiniować opcję NX_DNS_CLIENT_USER_CREATE_PACKET_POOL.</span><span class="sxs-lookup"><span data-stu-id="2f142-124">To do so, the NX_DNS_CLIENT_USER_CREATE_PACKET_POOL option must be defined.</span></span> <span data-ttu-id="2f142-125">Ta opcja wymaga również, aby wcześniej utworzona Pula pakietów była używana *nx_packet_pool_create* jako dane wejściowe wskaźnika puli pakietów do *nx_dns_packet_pool_set* .</span><span class="sxs-lookup"><span data-stu-id="2f142-125">This option also requires a previously created packet pool using *nx_packet_pool_create* as the packet pool pointer input to *nx_dns_packet_pool_set* .</span></span> <span data-ttu-id="2f142-126">Po usunięciu wystąpienia klienta DNS aplikacja jest odpowiedzialna za usunięcie puli pakietów klienta DNS, jeśli NX_DNS_CLIENT_USER_CREATE_PACKET_POOL jest włączona, jeśli nie jest już potrzebne.</span><span class="sxs-lookup"><span data-stu-id="2f142-126">When the DNS Client instance is deleted, the application is responsible for deleting the DNS Client packet pool if NX_DNS_CLIENT_USER_CREATE_PACKET_POOL is enabled if it is no longer needed.</span></span>

> [!NOTE] 
> <span data-ttu-id="2f142-127">W przypadku aplikacji, które umożliwiają udostępnienie własnej puli pakietów przy użyciu opcji NX_DNS_CLIENT_USER_CREATE_PACKET_POOL, rozmiar pakietu musi mieć możliwość przechowywania maksymalnego rozmiaru Massage systemu DNS (512 bajtów) oraz pokojów dla nagłówka UDP, adresu IPv4 lub IPv6 oraz nagłówka MAC.</span><span class="sxs-lookup"><span data-stu-id="2f142-127">For applications choosing to provide its own packet pool using the NX_DNS_CLIENT_USER_CREATE_PACKET_POOL option, the packet size needs to be able to hold the DNS maximum massage size (512 bytes) plus rooms for UDP header, IPv4 or IPv6 header, and the MAC header.</span></span>

## <a name="dns-messages"></a><span data-ttu-id="2f142-128">Komunikaty DNS</span><span class="sxs-lookup"><span data-stu-id="2f142-128">DNS Messages</span></span>

<span data-ttu-id="2f142-129">System DNS ma bardzo prosty mechanizm uzyskiwania mapowania między nazwami hostów i adresami IP.</span><span class="sxs-lookup"><span data-stu-id="2f142-129">The DNS has a very simple mechanism for obtaining mapping between host names and IP addresses.</span></span> <span data-ttu-id="2f142-130">Aby uzyskać mapowanie, klient DNS przygotuje komunikat zapytania DNS zawierający nazwę lub adres IP, który musi zostać rozpoznany.</span><span class="sxs-lookup"><span data-stu-id="2f142-130">To obtain a mapping, the DNS Client prepares a DNS query message containing the name or the IP address that needs to be resolved.</span></span> <span data-ttu-id="2f142-131">Wiadomość jest następnie wysyłana do pierwszego serwera DNS na liście serwerów.</span><span class="sxs-lookup"><span data-stu-id="2f142-131">The message is then sent to the first DNS server in the server list.</span></span> <span data-ttu-id="2f142-132">Jeśli serwer ma takie mapowanie, wysyła odpowiedź do klienta DNS przy użyciu komunikatu odpowiedzi DNS zawierającego żądane informacje mapowania.</span><span class="sxs-lookup"><span data-stu-id="2f142-132">If the server has such a mapping, it replies to the DNS Client using a DNS response message that contains the requested mapping information.</span></span> <span data-ttu-id="2f142-133">Jeśli serwer nie odpowiada, klient DNS wysyła zapytanie do następnego serwera na jego liście do momentu, gdy wszystkie jego serwery DNS nie zostały zbadane.</span><span class="sxs-lookup"><span data-stu-id="2f142-133">If the server does not respond, the DNS Client queries the next server on its list until all its DNS servers have been queried.</span></span> <span data-ttu-id="2f142-134">Jeśli nie otrzymasz odpowiedzi ze wszystkich serwerów DNS, klient DNS ma logikę ponowień, aby ponownie przesłać komunikat DNS.</span><span class="sxs-lookup"><span data-stu-id="2f142-134">If no response from all its DNS servers is received, the DNS Client has retry logic to retransmit the DNS message.</span></span> <span data-ttu-id="2f142-135">Po ponownym wysłaniu zapytania DNS zostaje podwojony limit czasu retransmisji.</span><span class="sxs-lookup"><span data-stu-id="2f142-135">On resending a DNS query, the retransmission timeout is doubled.</span></span> <span data-ttu-id="2f142-136">Ten proces jest kontynuowany do momentu osiągnięcia maksymalnego limitu czasu transmisji (zdefiniowanego jako NX_DNS_MAX_RETRANS_TIMEOUT w *nxd_dns. h*) lub do momentu otrzymania pomyślnej odpowiedzi z tego serwera.</span><span class="sxs-lookup"><span data-stu-id="2f142-136">This process continues until the maximum transmission timeout (defined as NX_DNS_MAX_RETRANS_TIMEOUT in *nxd_dns.h*) is reached or until a successful response is received from that server is obtained.</span></span>

<span data-ttu-id="2f142-137">Klient DNS NetX Duo może wykonywać operacje wyszukiwania adresów IPv6 (typu AAAA) i wyszukiwania adresów IPv4 (typ A), określając wersję adresu IP w wywołaniu *nxd_dns_host_by_name_get* .</span><span class="sxs-lookup"><span data-stu-id="2f142-137">NetX Duo DNS Client can perform both IPv6 address lookups (type AAAA) and IPv4 address lookups (type A) by specifying the version of the IP address in the *nxd_dns_host_by_name_get* call.</span></span> <span data-ttu-id="2f142-138">Klient DNS może wykonywać odwrotne wyszukiwania adresów IP (typ zapytania PTR), aby uzyskać nazwy hostów sieci Web przy użyciu *nxd_dns_host_by_address_get*.</span><span class="sxs-lookup"><span data-stu-id="2f142-138">The DNS Client can perform reverse lookups of IP addresses (type PTR queries) to obtain web host names using *nxd_dns_host_by_address_get*.</span></span> <span data-ttu-id="2f142-139">Klient DNS NetX Duo nadal obsługuje *nx_dns_host_by_name_get* i *nx_dns_host_by_address_get* , które są równoważnymi usługami, ale które są ograniczone do komunikacji sieciowej IPv4.</span><span class="sxs-lookup"><span data-stu-id="2f142-139">The NetX Duo DNS Client still supports the *nx_dns_host_by_name_get* and *nx_dns_host_by_address_get* which are the equivalent services but which are limited to IPv4 network communication.</span></span> <span data-ttu-id="2f142-140">Jednak deweloperzy są zachęcani do portów istniejących aplikacji klienckich DNS do *nxd_dns_host_by_name_get* i *nxd_dns_host_by_address_get* usług.</span><span class="sxs-lookup"><span data-stu-id="2f142-140">However, developers are encouraged to port existing DNS Client applications to the *nxd_dns_host_by_name_get* and *nxd_dns_host_by_address_get* services.</span></span>

<span data-ttu-id="2f142-141">Obsługa komunikatów DNS wykorzystuje protokół UDP do wysyłania żądań i odpowiedzi pól.</span><span class="sxs-lookup"><span data-stu-id="2f142-141">DNS messaging utilizes the UDP protocol to send requests and field responses.</span></span> <span data-ttu-id="2f142-142">Serwer DNS nasłuchuje na porcie numer 53 dla zapytań od klientów.</span><span class="sxs-lookup"><span data-stu-id="2f142-142">A DNS Server listens on port number 53 for queries from clients.</span></span> <span data-ttu-id="2f142-143">W związku z tym usługi UDP muszą być włączone w NetX Duo przy użyciu usługi \***nx_udp_enable** _ dla utworzonego wcześniej wystąpienia adresu IP (_ *_nx_ip_create_* \*).</span><span class="sxs-lookup"><span data-stu-id="2f142-143">Therefore UDP services must be enabled in NetX Duo using the ***nx_udp_enable** _ service on a previously created IP instance (_*_nx_ip_create_\*\*).</span></span>

<span data-ttu-id="2f142-144">W tym momencie klient DNS jest gotowy do akceptowania żądań z aplikacji i wysyłania zapytań DNS.</span><span class="sxs-lookup"><span data-stu-id="2f142-144">At this point, the DNS Client is ready to accept requests from the application and send out DNS queries.</span></span>

## <a name="extended-dns-resource-record-types"></a><span data-ttu-id="2f142-145">Rozszerzone typy rekordów zasobów DNS</span><span class="sxs-lookup"><span data-stu-id="2f142-145">Extended DNS Resource Record Types</span></span>

<span data-ttu-id="2f142-146">Jeśli NX_DNS_ENABLE_EXTENDED_RR_TYPES jest włączona, klient DNS NetX Duo obsługuje również następujące zapytania dotyczące typu rekordu:</span><span class="sxs-lookup"><span data-stu-id="2f142-146">If NX_DNS_ENABLE_EXTENDED_RR_TYPES is enabled, NetX Duo DNS Client also supports the following record type queries:</span></span>

- <span data-ttu-id="2f142-147">CNAME: zawiera nazwę kanoniczną aliasu</span><span class="sxs-lookup"><span data-stu-id="2f142-147">CNAME: contains the canonical name for an alias</span></span>
- <span data-ttu-id="2f142-148">TXT: zawiera ciąg tekstowy</span><span class="sxs-lookup"><span data-stu-id="2f142-148">TXT: contains a text string</span></span>
- <span data-ttu-id="2f142-149">NS: zawiera autorytatywny serwer nazw</span><span class="sxs-lookup"><span data-stu-id="2f142-149">NS: contains an authoritative name server</span></span>
- <span data-ttu-id="2f142-150">SOA: zawiera początek strefy urzędu</span><span class="sxs-lookup"><span data-stu-id="2f142-150">SOA: contains the start of a zone of authority</span></span>
- <span data-ttu-id="2f142-151">MX: używany do wymiany poczty</span><span class="sxs-lookup"><span data-stu-id="2f142-151">MX: used for mail exchange</span></span>
- <span data-ttu-id="2f142-152">SRV: zawiera informacje o usłudze oferowanej przez domenę</span><span class="sxs-lookup"><span data-stu-id="2f142-152">SRV: contains information on the service offered by the domain</span></span>

<span data-ttu-id="2f142-153">Z wyjątkiem typów rekordów CNAME i TXT aplikacja musi dostarczyć bufor wyrównany z 4 bajtami, aby otrzymać rekord danych DNS.</span><span class="sxs-lookup"><span data-stu-id="2f142-153">With the exception of CNAME and TXT record types, the application must supply a 4-byte aligned buffer to receive the DNS data record.</span></span>

<span data-ttu-id="2f142-154">W przypadku klienta DNS w systemie NetX Duo dane rekordów są przechowywane w taki sposób, aby najbardziej efektywnie wykorzystać miejsce w buforze.</span><span class="sxs-lookup"><span data-stu-id="2f142-154">In NetX Duo DNS Client, record data is stored in such a way to make most efficient use of buffer space.</span></span>

<span data-ttu-id="2f142-155">Poniżej przedstawiono przykład buforu rekordu o stałej długości (typ rekordu AAAA):</span><span class="sxs-lookup"><span data-stu-id="2f142-155">An example of a record buffer of fixed length (type AAAA record) is shown below:</span></span>

![Bufor rekordu o stałej długości](media/image2.png)

<span data-ttu-id="2f142-157">Dla tych zapytań, których typy rekordów mają zmienną długość danych, taką jak rekordy NS, których nazwy hostów mają zmienną długość, klient DNS NetX Duo zapisuje dane w następujący sposób.</span><span class="sxs-lookup"><span data-stu-id="2f142-157">For those queries whose record types have variable data length, such as NS records whose host names are of variable length, NetX Duo DNS Client saves the data as follows.</span></span> <span data-ttu-id="2f142-158">Bufor podany w zapytaniu klienta DNS jest zorganizowany w obszarze danych o stałej długości i w obszarze pamięci bez struktury.</span><span class="sxs-lookup"><span data-stu-id="2f142-158">The buffer supplied in the DNS Client query is organized into an area of fixed length data and an area of unstructured memory.</span></span> <span data-ttu-id="2f142-159">Górna część buforu pamięci jest zorganizowana w 4-bajtowe wpisy rekordów.</span><span class="sxs-lookup"><span data-stu-id="2f142-159">The top of the memory buffer is organized into 4-byte aligned record entries.</span></span> <span data-ttu-id="2f142-160">Każdy wpis rekordu zawiera adres IP i wskaźnik do danych o zmiennej długości dla tego adresu IP.</span><span class="sxs-lookup"><span data-stu-id="2f142-160">Each record entry contains the IP address and a pointer to the variable length data for that IP address.</span></span> <span data-ttu-id="2f142-161">Dane o zmiennej długości dla każdego adresu IP są przechowywane w pamięci obszaru niestrukturalnego, rozpoczynając od końca bufora pamięci.</span><span class="sxs-lookup"><span data-stu-id="2f142-161">The variable length data for each IP address are stored in the unstructured area memory starting at the end of the memory buffer.</span></span> <span data-ttu-id="2f142-162">Dane o zmiennej długości dla każdego kolejnego wpisu rekordu są zapisywane w następnej pamięci obszaru sąsiadującej z poprzednimi pozycjami rekordów.</span><span class="sxs-lookup"><span data-stu-id="2f142-162">The variable length data for each successive record entry is saved in the next area memory adjacent to the previous record entries variable data.</span></span> <span data-ttu-id="2f142-163">W związku z tym dane zmiennych "zwiększają się" do obszaru strukturalnego pamięci zawierającej wpisy rekordu do momentu braku wystarczającej ilości pamięci do przechowywania innego wpisu rekordu i danych zmiennych.</span><span class="sxs-lookup"><span data-stu-id="2f142-163">Hence, the variable data ‘grows’ towards the structured area of memory containing the record entries until there is insufficient memory to store another record entry and variable data.</span></span>

<span data-ttu-id="2f142-164">Jest to pokazane na poniższym rysunku:</span><span class="sxs-lookup"><span data-stu-id="2f142-164">This is shown in the figure below:</span></span>

![Rysunek 2](media/image3.png)

<span data-ttu-id="2f142-166">Przykład przechowywania danych nazwy domeny DNS (NS) znajduje się powyżej.</span><span class="sxs-lookup"><span data-stu-id="2f142-166">The example of the DNS domain name (NS) data storage is shown above.</span></span>

<span data-ttu-id="2f142-167">Zapytania klienta DNS NetX Duo przy użyciu formatu magazynu rekordów zwracają liczbę rekordów zapisanych w buforze rekordów.</span><span class="sxs-lookup"><span data-stu-id="2f142-167">NetX Duo DNS Client queries using the record storage format return the number of records saved to the record buffer.</span></span> <span data-ttu-id="2f142-168">Te informacje umożliwiają aplikacji wyodrębnianie rekordów NS z bufora rekordów.</span><span class="sxs-lookup"><span data-stu-id="2f142-168">This information enables the application to extract NS records from the record buffer.</span></span>

<span data-ttu-id="2f142-169">Przykładem kwerendy klienta DNS, która przechowuje dane DNS o zmiennej długości przy użyciu tego formatu przechowywania rekordów, przedstawiono poniżej:</span><span class="sxs-lookup"><span data-stu-id="2f142-169">An example of a DNS Client query that stores variable length DNS data using this record storage format is shown below:</span></span>

```C
UINT  _nx_dns_domain_name_server_get(NX_DNS *dns_ptr, 
                    UCHAR *host_name, VOID *record_buffer, 
                    UINT buffer_size, UINT *record_count, 
                    ULONG wait_option);
```


<span data-ttu-id="2f142-170">Więcej szczegółów można znaleźć w rozdziale 3, "Opis usług klienta DNS".</span><span class="sxs-lookup"><span data-stu-id="2f142-170">More details are available in Chapter 3, “Description of DNS Client Services”.</span></span>

## <a name="dns-cache"></a><span data-ttu-id="2f142-171">Pamięć podręczna DNS</span><span class="sxs-lookup"><span data-stu-id="2f142-171">DNS Cache</span></span>

<span data-ttu-id="2f142-172">Jeśli NX_DNS_CACHE_ENABLE jest włączona, klient DNS NetX Duo obsługuje funkcję pamięci podręcznej systemu DNS.</span><span class="sxs-lookup"><span data-stu-id="2f142-172">If NX_DNS_CACHE_ENABLE is enabled, NetX Duo DNS Client supports the DNS Cache feature.</span></span> <span data-ttu-id="2f142-173">Po utworzeniu klienta DNS aplikacja może wywołać interfejs API *nx_dns_cache_initialize ()* , aby ustawić specjalną pamięć podręczną DNS.</span><span class="sxs-lookup"><span data-stu-id="2f142-173">After creating the DNS Client, the application can call the API *nx_dns_cache_initialize()* to set the special DNS Cache.</span></span> <span data-ttu-id="2f142-174">W przypadku włączenia funkcji pamięci podręcznej DNS klient DNS znajdzie dostępną odpowiedź z pamięci podręcznej DNS przed rozpoczęciem wysyłania zapytania DNS, jeśli znajdziesz dostępną odpowiedź, bezpośrednio Zwróć odpowiedź do aplikacji, w przeciwnym razie klient DNS wysyła komunikat zapytania do serwera DNS i czeka na odpowiedź.</span><span class="sxs-lookup"><span data-stu-id="2f142-174">If enable DNS Cache feature, DNS Client will find the available answer from DNS Cache before starts to send DNS query, if find the available answer, directly return the answer to application, otherwise DNS Client sends out query message to DNS server and waits for the reply.</span></span> <span data-ttu-id="2f142-175">Gdy klient DNS otrzymuje komunikat odpowiedzi i dostępna jest bezpłatna pamięć podręczna, klient DNS zwróci odpowiedź do aplikacji, a także dodaje odpowiedź jako rekord zasobu do pamięci podręcznej DNS.</span><span class="sxs-lookup"><span data-stu-id="2f142-175">When DNS Client gets the response message and there is free cache available, DNS Client returns the answer to the application and also adds the answer as resource record into DNS cache.</span></span>

<span data-ttu-id="2f142-176">Każda odpowiedź na strukturę danych *NX_DNS_RR* (rekord zasobu) w pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="2f142-176">Each answer a data structure *NX_DNS_RR* (Resource Record) in the cache.</span></span> <span data-ttu-id="2f142-177">Ciągi (nazwa rekordu zasobu i dane) w rekordach są długością zmiennej, dlatego nie są przechowywane w strukturze NX_DNS_RR.</span><span class="sxs-lookup"><span data-stu-id="2f142-177">Strings (resource record name and data) in Records are variable length, therefore are not stored in the NX_DNS_RR structure.</span></span> <span data-ttu-id="2f142-178">Rekord zawiera wskaźniki do rzeczywistej lokalizacji pamięci, w której są przechowywane ciągi.</span><span class="sxs-lookup"><span data-stu-id="2f142-178">The Record contains pointers to the actual memory location where the strings are stored.</span></span> <span data-ttu-id="2f142-179">Tabela ciągów i rekordy współużytkują pamięć podręczną.</span><span class="sxs-lookup"><span data-stu-id="2f142-179">The string table and the Records share the cache.</span></span> <span data-ttu-id="2f142-180">Rekordy są przechowywane na początku pamięci podręcznej i rosną do końca pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="2f142-180">Records are stored from the beginning of the cache, and grow towards the end of the cache.</span></span> <span data-ttu-id="2f142-181">Tabela ciągów rozpoczyna się od końca pamięci podręcznej i powiększa się do początku pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="2f142-181">The string table starts from the end of the cache and grows towards the beginning of the cache.</span></span> <span data-ttu-id="2f142-182">Każdy ciąg w tabeli ciągów ma pole długości i pole licznika.</span><span class="sxs-lookup"><span data-stu-id="2f142-182">Each string in the string table has a length field and a counter field.</span></span> <span data-ttu-id="2f142-183">Gdy ciąg zostanie dodany do tabeli ciągów, jeśli ten sam ciąg już występuje w tabeli, wartość licznika jest zwiększana i nie jest przydzielono żadnej pamięci dla ciągu.</span><span class="sxs-lookup"><span data-stu-id="2f142-183">When a string is added to the string table, if the same string is already present in the table, the counter value is incremented and no memory is allocated for the string.</span></span> <span data-ttu-id="2f142-184">Pamięć podręczna jest traktowana jako pełna, jeśli do pamięci podręcznej nie można dodać więcej rekordów zasobów lub nowych ciągów.</span><span class="sxs-lookup"><span data-stu-id="2f142-184">The cache is considered full if no more resource records or new strings can be added to the cache.</span></span>

## <a name="dns-client-limitations"></a><span data-ttu-id="2f142-185">Ograniczenia klienta DNS</span><span class="sxs-lookup"><span data-stu-id="2f142-185">DNS Client Limitations</span></span>

<span data-ttu-id="2f142-186">Klient DNS obsługuje jedno żądanie DNS jednocześnie.</span><span class="sxs-lookup"><span data-stu-id="2f142-186">The DNS Client supports one DNS request at a time.</span></span> <span data-ttu-id="2f142-187">Wątki próbujące wprowadzić inne żądanie DNS są tymczasowo blokowane do momentu ukończenia poprzedniego żądania DNS.</span><span class="sxs-lookup"><span data-stu-id="2f142-187">Threads attempting to make another DNS request are temporarily blocked until the previous DNS request is complete.</span></span>

<span data-ttu-id="2f142-188">Klient DNS NetX Duo nie używa danych z odpowiedzi autorytatywnych do przesyłania dalej dodatkowych zapytań DNS do innych serwerów DNS.</span><span class="sxs-lookup"><span data-stu-id="2f142-188">The NetX Duo DNS Client does not use data from authoritative answers to forward additional DNS queries to other DNS servers.</span></span>

## <a name="dns-rfcs"></a><span data-ttu-id="2f142-189">Specyfikacje RFC systemu DNS</span><span class="sxs-lookup"><span data-stu-id="2f142-189">DNS RFCs</span></span>

<span data-ttu-id="2f142-190">System DNS NetX Duo jest zgodny z następującymi specyfikacjami RFC:</span><span class="sxs-lookup"><span data-stu-id="2f142-190">NetX Duo DNS is compliant with the following RFCs:</span></span>

- <span data-ttu-id="2f142-191">RFC1034 NAZWY DOMEN — KONCEPCJE I UDOGODNIENIA</span><span class="sxs-lookup"><span data-stu-id="2f142-191">RFC1034 DOMAIN NAMES - CONCEPTS AND FACILITIES</span></span>
- <span data-ttu-id="2f142-192">RFC1035 NAZWY DOMEN — IMPLEMENTACJA I SPECYFIKACJA</span><span class="sxs-lookup"><span data-stu-id="2f142-192">RFC1035 DOMAIN NAMES - IMPLEMENTATION AND SPECIFICATION</span></span>
- <span data-ttu-id="2f142-193">RFC1480 domenę US</span><span class="sxs-lookup"><span data-stu-id="2f142-193">RFC1480 The US Domain</span></span>
- <span data-ttu-id="2f142-194">RFC 2782 A RR DNS do określania lokalizacji usług (DNS SRV)</span><span class="sxs-lookup"><span data-stu-id="2f142-194">RFC 2782 A DNS RR for specifying the location of services (DNS SRV)</span></span>
- <span data-ttu-id="2f142-195">Rozszerzenia DNS RFC 3596 do obsługi protokołu IP w wersji 6</span><span class="sxs-lookup"><span data-stu-id="2f142-195">RFC 3596 DNS Extensions to Support IP Version 6</span></span>