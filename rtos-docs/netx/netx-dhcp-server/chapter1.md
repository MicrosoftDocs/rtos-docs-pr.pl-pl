---
title: Rozdział 1 — wprowadzenie do usługi Azure RTO NetX serwer DHCP
description: Aplikacja nawiązuje komunikację ze swoim serwerem DHCP usługi Azure RTO NetX w celu dynamicznego żądania i uzyskiwania adresu IP.
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 17438a20ad3da64c88c3d6bb19a4887c2c6e354e
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/22/2021
ms.locfileid: "104822698"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-dhcp-server"></a><span data-ttu-id="d7fa8-103">Rozdział 1 — wprowadzenie do usługi Azure RTO NetX serwer DHCP</span><span class="sxs-lookup"><span data-stu-id="d7fa8-103">Chapter 1 - Introduction to Azure RTOS NetX DHCP Server</span></span>

<span data-ttu-id="d7fa8-104">W NetX adres IP aplikacji jest jednym z podanych parametrów wywołania usługi *nx_ip_create* .</span><span class="sxs-lookup"><span data-stu-id="d7fa8-104">In NetX, the application's IP address is one of the supplied parameters to the *nx_ip_create* service call.</span></span> <span data-ttu-id="d7fa8-105">Dostarczenie adresu IP nie powoduje żadnych problemów, jeśli adres IP jest znany aplikacji, statycznie lub przez konfigurację użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-105">Supplying the IP address poses no problem if the IP address is known to the application, either statically or through user configuration.</span></span> <span data-ttu-id="d7fa8-106">Istnieją jednak pewne wystąpienia, w których aplikacja nie wie ani nie ponosi jego adresu IP.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-106">However, there are some instances where the application doesn't know or care what its IP address is.</span></span> <span data-ttu-id="d7fa8-107">W takich sytuacjach do funkcji *nx_ip_create* należy dostarczyć zerowy adres IP, a aplikacja nawiązuje komunikację ze swoim serwerem DHCP NetX usługi Azure RTO, aby dynamicznie żądać i uzyskać adres IP.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-107">In such situations, a zero IP address should be supplied to the *nx_ip_create* function and the application establishes communication with its Azure RTOS NetX DHCP server to dynamically request and obtain an IP address.</span></span>

## <a name="dynamic-ip-address-assignment"></a><span data-ttu-id="d7fa8-108">Dynamiczne przypisywanie adresów IP</span><span class="sxs-lookup"><span data-stu-id="d7fa8-108">Dynamic IP Address Assignment</span></span>

<span data-ttu-id="d7fa8-109">Podstawowa usługa używana do uzyskiwania dynamicznego adresu IP z sieci to protokół odwrotnego rozpoznawania adresów (RARP).</span><span class="sxs-lookup"><span data-stu-id="d7fa8-109">The basic service used to obtain a dynamic IP address from the network is the Reverse Address Resolution Protocol (RARP).</span></span> <span data-ttu-id="d7fa8-110">Ten protokół jest podobny do protokołu ARP, z tą różnicą, że został zaprojektowany w celu uzyskania adresu IP dla samego siebie zamiast wyszukiwania adresu MAC dla innego węzła sieci.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-110">This protocol is similar to ARP, except it is designed to obtain an IP address for itself instead of finding the MAC address for another network node.</span></span> <span data-ttu-id="d7fa8-111">Komunikat RARP niskiego poziomu jest emitowany w sieci lokalnej i jest odpowiedzialny za serwer w sieci, aby odpowiedzieć na odpowiedź z RARP, która zawiera dynamicznie przydzieloną adres IP.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-111">The low-level RARP message is broadcast on the local network and it is the responsibility of a server on the network to respond with an RARP response, which contains a dynamically allocated IP address.</span></span>

<span data-ttu-id="d7fa8-112">Mimo że usługa RARP udostępnia usługę dynamicznego przydzielania adresów IP, ma kilka wad.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-112">Although RARP provides a service for dynamic allocation of IP addresses, it has several shortcomings.</span></span> <span data-ttu-id="d7fa8-113">Większość niedoborów odblasku polega na tym, że RARP zapewnia tylko dynamiczną alokację adresu IP.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-113">The most glaring deficiency is that RARP only provides dynamic allocation of the IP address.</span></span> <span data-ttu-id="d7fa8-114">W większości sytuacji więcej informacji jest konieczna, aby urządzenie mogło prawidłowo uczestniczyć w sieci.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-114">In most situations, more information is necessary in order for a device to properly participate on a network.</span></span> <span data-ttu-id="d7fa8-115">Oprócz adresu IP większość urządzeń wymaga maski sieci i adresu IP bramy.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-115">In addition to an IP address, most devices need the network mask and the gateway IP address.</span></span> <span data-ttu-id="d7fa8-116">Może być również wymagany adres IP serwera DNS i inne informacje o sieci.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-116">The IP address of a DNS server and other network information may also be needed.</span></span> <span data-ttu-id="d7fa8-117">RARP nie ma możliwości podania tych informacji.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-117">RARP does not have the ability to provide this information.</span></span>

## <a name="rarp-alternatives"></a><span data-ttu-id="d7fa8-118">RARP alternatywy</span><span class="sxs-lookup"><span data-stu-id="d7fa8-118">RARP Alternatives</span></span>

<span data-ttu-id="d7fa8-119">W celu pokonania wad RARP pracownicy opracowanli bardziej kompleksowy mechanizm alokacji adresów IP o nazwie protokół Bootstrap (BOOTP).</span><span class="sxs-lookup"><span data-stu-id="d7fa8-119">In order to overcome the deficiencies of RARP, researchers developed a more comprehensive IP address allocation mechanism called the Bootstrap Protocol (BOOTP).</span></span> <span data-ttu-id="d7fa8-120">Ten protokół ma możliwość dynamicznego przydzielenia adresu IP, a także zapewnienia dodatkowych ważnych informacji o sieci.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-120">This protocol has the ability to dynamically allocate an IP address and also provide additional important network information.</span></span> <span data-ttu-id="d7fa8-121">Jednak protokół BOOTP ma wady, które są przeznaczone do konfiguracji sieci statycznych.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-121">However, BOOTP has the drawback of being designed for static network configurations.</span></span> <span data-ttu-id="d7fa8-122">Nie zezwala na szybkie lub automatyczne przypisywanie adresów.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-122">It does not allow for quick or automated address assignment.</span></span>

<span data-ttu-id="d7fa8-123">Jest to miejsce, w którym Dynamic Host Configuration Protocol (DHCP) jest niezwykle przydatna.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-123">This is where the Dynamic Host Configuration Protocol (DHCP) is extremely useful.</span></span> <span data-ttu-id="d7fa8-124">Usługa DHCP została zaprojektowana w celu rozbudowania podstawowych funkcji protokołu BOOTP w taki sposób, aby obejmowały całkowicie zautomatyzowaną alokację serwera IP i całkowicie dynamiczną alokację adresów IP za pomocą "dzierżawy" adresu IP do klienta przez określony czas.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-124">DHCP is designed to extend the basic functionality of BOOTP to include completely automated IP server allocation and completely dynamic IP address allocation through "leasing" an IP address to a client for a specified period of time.</span></span> <span data-ttu-id="d7fa8-125">Protokół DHCP można również skonfigurować tak, aby przydzielał adresy IP w sposób statyczny, jak w przypadku protokołu BOOTP.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-125">DHCP can also be configured to allocate IP addresses in a static manner like BOOTP.</span></span>

## <a name="dhcp-messages"></a><span data-ttu-id="d7fa8-126">Komunikaty DHCP</span><span class="sxs-lookup"><span data-stu-id="d7fa8-126">DHCP Messages</span></span>

<span data-ttu-id="d7fa8-127">Mimo że usługa DHCP znacznie rozszerza funkcjonalność protokołu BOOTP, protokół DHCP używa tego samego formatu komunikatów co BOOTP i obsługuje te same opcje dostawcy co protokół BOOTP.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-127">Although DHCP greatly enhances the functionality of BOOTP, DHCP uses the same message format as BOOTP and supports the same vendor options as BOOTP.</span></span> <span data-ttu-id="d7fa8-128">Aby można było wykonać swoją funkcję, usługa DHCP wprowadza siedem nowych opcji specyficznych dla protokołu DHCP w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="d7fa8-128">In order to perform its function, DHCP introduces seven new DHCP-specific options, as follows:</span></span>

| <span data-ttu-id="d7fa8-129">Opcja</span><span class="sxs-lookup"><span data-stu-id="d7fa8-129">Option</span></span>     | <span data-ttu-id="d7fa8-130">Wartość</span><span class="sxs-lookup"><span data-stu-id="d7fa8-130">Value</span></span> | <span data-ttu-id="d7fa8-131">Origin</span><span class="sxs-lookup"><span data-stu-id="d7fa8-131">Origin</span></span>                |
| ---------- | ----- | --------------------- |
| <span data-ttu-id="d7fa8-132">Odnajdywanie</span><span class="sxs-lookup"><span data-stu-id="d7fa8-132">DISCOVER</span></span>   | <span data-ttu-id="d7fa8-133">jedno</span><span class="sxs-lookup"><span data-stu-id="d7fa8-133">(1)</span></span>   | <span data-ttu-id="d7fa8-134">(wysyłane przez klienta DHCP)</span><span class="sxs-lookup"><span data-stu-id="d7fa8-134">(sent by DHCP Client)</span></span> |
| <span data-ttu-id="d7fa8-135">SPRZEDAŻY</span><span class="sxs-lookup"><span data-stu-id="d7fa8-135">OFFER</span></span>      | <span data-ttu-id="d7fa8-136">(2)</span><span class="sxs-lookup"><span data-stu-id="d7fa8-136">(2)</span></span>   | <span data-ttu-id="d7fa8-137">(wysyłane przez serwer DHCP)</span><span class="sxs-lookup"><span data-stu-id="d7fa8-137">(sent by DHCP Server)</span></span> |
| <span data-ttu-id="d7fa8-138">ŻĄDAJĄC</span><span class="sxs-lookup"><span data-stu-id="d7fa8-138">REQUEST</span></span>    | <span data-ttu-id="d7fa8-139">r.3</span><span class="sxs-lookup"><span data-stu-id="d7fa8-139">(3)</span></span>   | <span data-ttu-id="d7fa8-140">(wysyłane przez klienta DHCP)</span><span class="sxs-lookup"><span data-stu-id="d7fa8-140">(sent by DHCP Client)</span></span> |
| <span data-ttu-id="d7fa8-141">ZAPROSZENIE</span><span class="sxs-lookup"><span data-stu-id="d7fa8-141">DECLINE</span></span>    | <span data-ttu-id="d7fa8-142">czwart</span><span class="sxs-lookup"><span data-stu-id="d7fa8-142">(4)</span></span>   | <span data-ttu-id="d7fa8-143">(wysyłane przez klienta DHCP)</span><span class="sxs-lookup"><span data-stu-id="d7fa8-143">(sent by DHCP Client)</span></span> |
| <span data-ttu-id="d7fa8-144">KOMUNIKATY</span><span class="sxs-lookup"><span data-stu-id="d7fa8-144">ACK</span></span>        | <span data-ttu-id="d7fa8-145">5000</span><span class="sxs-lookup"><span data-stu-id="d7fa8-145">(5)</span></span>   | <span data-ttu-id="d7fa8-146">(wysyłane przez serwer DHCP)</span><span class="sxs-lookup"><span data-stu-id="d7fa8-146">(sent by DHCP Server)</span></span> |
| <span data-ttu-id="d7fa8-147">KOMUNIKAT</span><span class="sxs-lookup"><span data-stu-id="d7fa8-147">NACK</span></span>       | <span data-ttu-id="d7fa8-148">ust</span><span class="sxs-lookup"><span data-stu-id="d7fa8-148">(6)</span></span>   | <span data-ttu-id="d7fa8-149">(wysyłane przez serwer DHCP)</span><span class="sxs-lookup"><span data-stu-id="d7fa8-149">(sent by DHCP Server)</span></span> |
| <span data-ttu-id="d7fa8-150">Usuwanie</span><span class="sxs-lookup"><span data-stu-id="d7fa8-150">RELEASE</span></span>    | <span data-ttu-id="d7fa8-151">(7)</span><span class="sxs-lookup"><span data-stu-id="d7fa8-151">(7)</span></span>   | <span data-ttu-id="d7fa8-152">(wysyłane przez klienta DHCP)</span><span class="sxs-lookup"><span data-stu-id="d7fa8-152">(sent by DHCP Client)</span></span> |
| <span data-ttu-id="d7fa8-153">POINFORMOWAĆ</span><span class="sxs-lookup"><span data-stu-id="d7fa8-153">INFORM</span></span>     | <span data-ttu-id="d7fa8-154">(8)</span><span class="sxs-lookup"><span data-stu-id="d7fa8-154">(8)</span></span>   | <span data-ttu-id="d7fa8-155">(wysyłane przez klienta DHCP)</span><span class="sxs-lookup"><span data-stu-id="d7fa8-155">(sent by DHCP Client)</span></span> |
| <span data-ttu-id="d7fa8-156">FORCERENEW</span><span class="sxs-lookup"><span data-stu-id="d7fa8-156">FORCERENEW</span></span> | <span data-ttu-id="d7fa8-157">9</span><span class="sxs-lookup"><span data-stu-id="d7fa8-157">(9)</span></span>   | <span data-ttu-id="d7fa8-158">(wysyłane przez klienta DHCP)</span><span class="sxs-lookup"><span data-stu-id="d7fa8-158">(sent by DHCP Client)</span></span> |

## <a name="dhcp-communication"></a><span data-ttu-id="d7fa8-159">Komunikacja DHCP</span><span class="sxs-lookup"><span data-stu-id="d7fa8-159">DHCP Communication</span></span>

<span data-ttu-id="d7fa8-160">Serwer DHCP korzysta z protokołu UDP do odbierania żądań klientów DHCP i przesyłania odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-160">The DHCP Server utilizes the UDP protocol to receive DHCP Client requests and transmit responses.</span></span> <span data-ttu-id="d7fa8-161">Przed przystąpieniem do adresu IP komunikaty UDP przenoszące informacje DHCP są wysyłane i odbierane przy użyciu adresu IP o wartości 255.255.255.255.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-161">Prior to having an IP address, UDP messages carrying the DHCP information are sent and received by utilizing the IP broadcast address of 255.255.255.255.</span></span> <span data-ttu-id="d7fa8-162">Jeśli jednak klient zna adres serwera DHCP, może wysyłać komunikaty protokołu DHCP przy użyciu komunikatów emisji pojedynczej.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-162">However, if the Client knows the address of the DHCP Server it may send DHCP messages using unicast messages.</span></span>

## <a name="dhcp-server-state-machine"></a><span data-ttu-id="d7fa8-163">Komputer stanu serwera DHCP</span><span class="sxs-lookup"><span data-stu-id="d7fa8-163">DHCP Server State Machine</span></span>

<span data-ttu-id="d7fa8-164">Serwer DHCP jest zaimplementowany jako wieloetapowy komputer stanu przetworzony przez wewnętrzny wątek DHCP, który jest tworzony podczas przetwarzania *nx_dhcp_server_create* .</span><span class="sxs-lookup"><span data-stu-id="d7fa8-164">The DHCP Server is implemented as a two-step state machine processed by an internal DHCP thread that is created during *nx_dhcp_server_create* processing.</span></span> <span data-ttu-id="d7fa8-165">Główne Stany serwera DHCP to 1) otrzymywanie komunikatu ODNAJDOWAnia od klienta DHCP i 2) otrzymującego komunikat żądania.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-165">The main states of DHCP Server are 1) receiving a DISCOVER message from a DHCP client and 2) receiving a REQUEST message.</span></span>

<span data-ttu-id="d7fa8-166">Poniżej znajdują się odpowiednie Stany klienta DHCP:</span><span class="sxs-lookup"><span data-stu-id="d7fa8-166">Below are the corresponding DHCP Client states:</span></span>

- <span data-ttu-id="d7fa8-167">**NX_DHCP_STATE_BOOT**: Rozpoczynanie pracy z poprzednim adresem IP</span><span class="sxs-lookup"><span data-stu-id="d7fa8-167">**NX_DHCP_STATE_BOOT**: Starting with a previous IP address</span></span>
- <span data-ttu-id="d7fa8-168">**NX_DHCP_STATE_INIT**: rozpoczynanie od braku poprzedniej wartości adresu IP</span><span class="sxs-lookup"><span data-stu-id="d7fa8-168">**NX_DHCP_STATE_INIT**: Starting with no previous IP address value</span></span>
- <span data-ttu-id="d7fa8-169">**NX_DHCP_STATE_SELECTING**: oczekiwanie na odpowiedź z dowolnego serwera DHCP</span><span class="sxs-lookup"><span data-stu-id="d7fa8-169">**NX_DHCP_STATE_SELECTING**: Waiting for a response from any DHCP server</span></span>
- <span data-ttu-id="d7fa8-170">**NX_DHCP_STATE_REQUESTING**: zidentyfikowano serwer DHCP, wysłane żądanie adresu IP</span><span class="sxs-lookup"><span data-stu-id="d7fa8-170">**NX_DHCP_STATE_REQUESTING**: DHCP Server identified, IP address request sent</span></span>
- <span data-ttu-id="d7fa8-171">**NX_DHCP_STATE_BOUND**: ustanowiono dzierżawę adresu IP DHCP</span><span class="sxs-lookup"><span data-stu-id="d7fa8-171">**NX_DHCP_STATE_BOUND**: DHCP IP Address lease established</span></span>
- <span data-ttu-id="d7fa8-172">**NX_DHCP_STATE_RENEWING**: upłynął czas odnawiania dzierżawy adresu IP DHCP, żądanie odnowienia</span><span class="sxs-lookup"><span data-stu-id="d7fa8-172">**NX_DHCP_STATE_RENEWING**: DHCP IP Address lease renewal time elapsed, renewal requested</span></span>
- <span data-ttu-id="d7fa8-173">**NX_DHCP_STATE_REBINDING**: upłynął czas ponownego wiązania dzierżawy adresu IP DHCP, żądanie odnowienia</span><span class="sxs-lookup"><span data-stu-id="d7fa8-173">**NX_DHCP_STATE_REBINDING**: DHCP IP Address lease rebind time elapsed, renewal requested</span></span>
- <span data-ttu-id="d7fa8-174">**NX_DHCP_STATE_FORCERENEW**: ustanowiono dzierżawę adresu IP DHCP, Wymuś odnowienie przez serwer lub aplikację</span><span class="sxs-lookup"><span data-stu-id="d7fa8-174">**NX_DHCP_STATE_FORCERENEW**: DHCP IP Address lease established, force renewal by server or by application</span></span>
- <span data-ttu-id="d7fa8-175">**NX_DHCP_STATE_FAILED**: nie znaleziono serwera lub nie odebrano odpowiedzi z serwera</span><span class="sxs-lookup"><span data-stu-id="d7fa8-175">**NX_DHCP_STATE_FAILED**: No server found or no response from server received</span></span>

## <a name="dhcp-additional-parameters"></a><span data-ttu-id="d7fa8-176">Dodatkowe parametry protokołu DHCP</span><span class="sxs-lookup"><span data-stu-id="d7fa8-176">DHCP Additional Parameters</span></span>

<span data-ttu-id="d7fa8-177">Serwer DHCP NetX ma domyślną listę parametrów opcji ustawionych w opcji konfigurowalne NX_DHCP_DEFAULT_SERVER_OPTION_LISTin *nx_dhcp_server. h* , aby udostępnić klientom DHCP typowe/krytyczne parametry konfiguracji sieci, np. router lub adres bramy oraz serwer DNS dla klienta DHCP.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-177">The NetX DHCP Server has a default list of option parameters which is set in the configurable option NX_DHCP_DEFAULT_SERVER_OPTION_LISTin *nx_dhcp_server.h* to supply DHCP Clients with common/critical network configuration parameters e.g. router or gateway address and DNS server for the DHCP Client.</span></span>

## <a name="dhcp-rfcs"></a><span data-ttu-id="d7fa8-178">Specyfikacje RFC protokołu DHCP</span><span class="sxs-lookup"><span data-stu-id="d7fa8-178">DHCP RFCs</span></span>

<span data-ttu-id="d7fa8-179">NetX serwer DHCP jest zgodny z RFC2132, RFC2131 i powiązanymi specyfikacjami RFC.</span><span class="sxs-lookup"><span data-stu-id="d7fa8-179">NetX DHCP Server is compliant with RFC2132, RFC2131, and related RFCs.</span></span>
