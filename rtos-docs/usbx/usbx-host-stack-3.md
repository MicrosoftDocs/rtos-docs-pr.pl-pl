---
title: Rozdział 3-funkcjonalne składniki stosu hosta USBX
description: Ten rozdział zawiera opis stosu o wysokiej wydajności USBX osadzonych portów USB z perspektywy funkcjonalnej.
author: philmea
ms.author: philmea
ms.date: 5/19/2020
ms.service: rtos
ms.topic: article
ms.openlocfilehash: 17b8d884dd2c71d60e91f5fcec40c360060f4fe8
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/22/2021
ms.locfileid: "104824271"
---
# <a name="chapter-3---functional-components-of-usbx-host-stack"></a><span data-ttu-id="a80f5-103">Rozdział 3-funkcjonalne składniki stosu hosta USBX</span><span class="sxs-lookup"><span data-stu-id="a80f5-103">Chapter 3 - Functional Components of USBX Host Stack</span></span>

<span data-ttu-id="a80f5-104">Ten rozdział zawiera opis stosu o wysokiej wydajności USBX osadzonych portów USB z perspektywy funkcjonalnej.</span><span class="sxs-lookup"><span data-stu-id="a80f5-104">This chapter contains a description of the high performance USBX embedded USB host stack from a functional perspective.</span></span>

## <a name="execution-overview"></a><span data-ttu-id="a80f5-105">Przegląd wykonywania</span><span class="sxs-lookup"><span data-stu-id="a80f5-105">Execution Overview</span></span>

<span data-ttu-id="a80f5-106">USBX składa się z kilku składników:</span><span class="sxs-lookup"><span data-stu-id="a80f5-106">USBX is composed of several components:</span></span>

- <span data-ttu-id="a80f5-107">Inicjalizacja</span><span class="sxs-lookup"><span data-stu-id="a80f5-107">Initialization</span></span>
- <span data-ttu-id="a80f5-108">Wywołania interfejsu aplikacji</span><span class="sxs-lookup"><span data-stu-id="a80f5-108">Application interface calls</span></span>
- <span data-ttu-id="a80f5-109">Główny koncentrator</span><span class="sxs-lookup"><span data-stu-id="a80f5-109">Root Hub</span></span>
- <span data-ttu-id="a80f5-110">Hub — Klasa</span><span class="sxs-lookup"><span data-stu-id="a80f5-110">Hub Class</span></span>
- <span data-ttu-id="a80f5-111">Klasy hostów</span><span class="sxs-lookup"><span data-stu-id="a80f5-111">Host Classes</span></span>
- <span data-ttu-id="a80f5-112">Stos hosta USB</span><span class="sxs-lookup"><span data-stu-id="a80f5-112">USB Host Stack</span></span>
- <span data-ttu-id="a80f5-113">Kontroler hosta</span><span class="sxs-lookup"><span data-stu-id="a80f5-113">Host controller</span></span>

<span data-ttu-id="a80f5-114">Na poniższym diagramie przedstawiono stos hosta USBX.</span><span class="sxs-lookup"><span data-stu-id="a80f5-114">The following diagram illustrates the USBX host stack.</span></span>

![Stos hosta USBX](./media/usbx-host-stack/usbx-host-stack.png)

### <a name="initialization"></a><span data-ttu-id="a80f5-116">Inicjalizacja</span><span class="sxs-lookup"><span data-stu-id="a80f5-116">Initialization</span></span>

<span data-ttu-id="a80f5-117">W celu aktywowania USBX należy wywołać funkcję ***ux_system_initialize*** .</span><span class="sxs-lookup"><span data-stu-id="a80f5-117">In order to activate USBX, the function ***ux_system_initialize*** must be called.</span></span> <span data-ttu-id="a80f5-118">Ta funkcja inicjuje zasoby pamięci z USBX.</span><span class="sxs-lookup"><span data-stu-id="a80f5-118">This function initializes the memory resources of USBX.</span></span>

<span data-ttu-id="a80f5-119">W celu aktywowania obiektów hosta USBX należy wywołać funkcję ***ux_host_stack_initialize*** .</span><span class="sxs-lookup"><span data-stu-id="a80f5-119">In order to activate USBX host facilities, the function ***ux_host_stack_initialize*** must be called.</span></span> <span data-ttu-id="a80f5-120">Ta funkcja spowoduje zainicjowanie wszystkich zasobów używanych przez stos hosta USBX, takich jak wątki ThreadX, muteksy i semafory.</span><span class="sxs-lookup"><span data-stu-id="a80f5-120">This function will in turn initialize all the resources used by the USBX host stack such as ThreadX threads, mutexes, and semaphores.</span></span>

<span data-ttu-id="a80f5-121">Aby aktywować co najmniej jeden kontroler hosta USB i co najmniej jedną klasę USB, należy do inicjowania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a80f5-121">It is up to the application initialization to activate at least one USB host controller and one or more USB classes.</span></span> <span data-ttu-id="a80f5-122">Gdy klasy zostały zarejestrowane na stosie, a funkcja inicjowania kontrolerów hosta została wywołana, magistrala jest aktywna i można uruchomić odnajdowanie urządzeń.</span><span class="sxs-lookup"><span data-stu-id="a80f5-122">When the classes have been registered to the stack and the host controller(s) initialization function has been called the bus is active and device discovery can start.</span></span> <span data-ttu-id="a80f5-123">Jeśli główny koncentrator kontrolera hosta wykryje dołączone urządzenie, wątek wyliczania USB, który jest odpowiedzialny za topologię USB, zostanie wznowiony i będzie mógł wyliczyć urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-123">If the root hub of the host controller detects an attached device, the USB enumeration thread, in charge of the USB topology, will be wake up and proceed to enumerate the device(s).</span></span>

<span data-ttu-id="a80f5-124">Istnieje możliwość, ze względu na charakter koncentratora głównego i koncentratorów podrzędnych, że wszystkie dołączone urządzenia USB mogą nie zostać skonfigurowane w całości, gdy funkcja inicjowania kontrolera hosta zwróci wartość.</span><span class="sxs-lookup"><span data-stu-id="a80f5-124">It is possible, due to the nature of the root hub and downstream hubs, that all attached USB devices may not have been configured completely when the host controller initialization function returns.</span></span> <span data-ttu-id="a80f5-125">Wyliczenie wszystkich urządzeń USB może potrwać kilka sekund, zwłaszcza jeśli istnieje co najmniej jeden koncentrator między głównym koncentratorem a urządzeniami USB.</span><span class="sxs-lookup"><span data-stu-id="a80f5-125">It can take several seconds to enumerate all USB devices, especially if there are one or more hubs between the root hub and USB devices.</span></span>

### <a name="application-interface-calls"></a><span data-ttu-id="a80f5-126">Wywołania interfejsu aplikacji</span><span class="sxs-lookup"><span data-stu-id="a80f5-126">Application Interface Calls</span></span>

<span data-ttu-id="a80f5-127">Istnieją dwa poziomy interfejsów API w USBX.</span><span class="sxs-lookup"><span data-stu-id="a80f5-127">There are two levels of APIs in USBX.</span></span>

- <span data-ttu-id="a80f5-128">Interfejsy API stosu hosta USB</span><span class="sxs-lookup"><span data-stu-id="a80f5-128">USB Host Stack APIs</span></span>
- <span data-ttu-id="a80f5-129">Interfejsy API klasy hosta USB</span><span class="sxs-lookup"><span data-stu-id="a80f5-129">USB Host Class APIs</span></span>

<span data-ttu-id="a80f5-130">Zwykle aplikacja USBX nie powinna wywołać żadnych funkcji interfejsu API stosu hosta USB.</span><span class="sxs-lookup"><span data-stu-id="a80f5-130">Normally, a USBX application should not have to call any of the USB host stack API functions.</span></span> <span data-ttu-id="a80f5-131">Większość aplikacji będzie uzyskiwać dostęp tylko do funkcji interfejsu API klasy USB.</span><span class="sxs-lookup"><span data-stu-id="a80f5-131">Most applications will only access the USB Class API functions.</span></span>

### <a name="usb-host-stack-apis"></a><span data-ttu-id="a80f5-132">Interfejsy API stosu hosta USB</span><span class="sxs-lookup"><span data-stu-id="a80f5-132">USB Host Stack APIs</span></span>

<span data-ttu-id="a80f5-133">Funkcje interfejsu API stosu hosta są odpowiedzialne za rejestrację składników USBX (klasy hosta i kontrolery hosta), konfigurację urządzeń oraz żądania transferu dla dostępnych punktów końcowych urządzeń.</span><span class="sxs-lookup"><span data-stu-id="a80f5-133">The host stack API functions are responsible for the registration of USBX components (host classes and host controllers), configuration of devices, and the transfer requests for available device endpoints.</span></span>

### <a name="usb-host-class-api"></a><span data-ttu-id="a80f5-134">Interfejs API klasy hosta USB</span><span class="sxs-lookup"><span data-stu-id="a80f5-134">USB Host Class API</span></span>

<span data-ttu-id="a80f5-135">Interfejsy API klas są bardzo specyficzne dla każdej klasy USB.</span><span class="sxs-lookup"><span data-stu-id="a80f5-135">The Class APIs are very specific to each USB class.</span></span> <span data-ttu-id="a80f5-136">Większość typowych funkcji interfejsu API dla klas USB zapewnia usługi, takie jak otwieranie/zamykanie urządzenia oraz odczytywanie i zapisywanie na urządzeniu.</span><span class="sxs-lookup"><span data-stu-id="a80f5-136">Most of the common API functions for USB classes provide services such as opening/closing a device and reading from and writing to a device.</span></span>

### <a name="root-hub"></a><span data-ttu-id="a80f5-137">Główny koncentrator</span><span class="sxs-lookup"><span data-stu-id="a80f5-137">Root Hub</span></span>

<span data-ttu-id="a80f5-138">Każde wystąpienie kontrolera hosta ma jeden lub więcej głównych koncentratorów USB.</span><span class="sxs-lookup"><span data-stu-id="a80f5-138">Each host controller instance has one or more USB root hubs.</span></span> <span data-ttu-id="a80f5-139">Liczba centrów głównych jest określana przez charakter kontrolera lub może być pobierana przez odczytanie określonych rejestrów z kontrolera.</span><span class="sxs-lookup"><span data-stu-id="a80f5-139">The number of root hubs is either determined by the nature of the controller or can be retrieved by reading specific registers from the controller.</span></span>

### <a name="hub-class"></a><span data-ttu-id="a80f5-140">Hub — Klasa</span><span class="sxs-lookup"><span data-stu-id="a80f5-140">Hub Class</span></span>

<span data-ttu-id="a80f5-141">Klasa Hub jest odpowiedzialna za kierowanie koncentratorów USB.</span><span class="sxs-lookup"><span data-stu-id="a80f5-141">The hub class is in charge of driving USB hubs.</span></span> <span data-ttu-id="a80f5-142">Koncentrator USB może być koncentratorem autonomicznym lub w ramach urządzenia złożonego, takiego jak klawiatura lub monitor.</span><span class="sxs-lookup"><span data-stu-id="a80f5-142">A USB hub can either be a stand-alone hub or as part of a compound device such as a keyboard or a monitor.</span></span> <span data-ttu-id="a80f5-143">Koncentrator może być samodzielny lub napędzany przez magistralę.</span><span class="sxs-lookup"><span data-stu-id="a80f5-143">A hub can be self-powered or bus-powered.</span></span> <span data-ttu-id="a80f5-144">Koncentratory zasilane magistralą mają maksymalnie cztery porty podrzędne i mogą zezwalać tylko na połączenia urządzeń, które są urządzeniami samoobsługowymi lub magistrali, które używają mniej niż 100mA zasilania.</span><span class="sxs-lookup"><span data-stu-id="a80f5-144">Bus-powered hubs have a maximum of four downstream ports and can only allow for the connection of devices that are either self-powered or bus-powered devices that use less than 100mA of power.</span></span> <span data-ttu-id="a80f5-145">Centra można kaskadowo.</span><span class="sxs-lookup"><span data-stu-id="a80f5-145">Hubs can be cascaded.</span></span> <span data-ttu-id="a80f5-146">Maksymalnie pięć centrów można połączyć ze sobą.</span><span class="sxs-lookup"><span data-stu-id="a80f5-146">Up to five hubs can be connected to one another.</span></span>

### <a name="usb-host-stack"></a><span data-ttu-id="a80f5-147">Stos hosta USB</span><span class="sxs-lookup"><span data-stu-id="a80f5-147">USB Host Stack</span></span>

<span data-ttu-id="a80f5-148">Stos hosta USB to filarem USBX.</span><span class="sxs-lookup"><span data-stu-id="a80f5-148">The USB host stack is the centerpiece of USBX.</span></span> <span data-ttu-id="a80f5-149">Ma trzy główne funkcje.</span><span class="sxs-lookup"><span data-stu-id="a80f5-149">It has three main functions.</span></span>

- <span data-ttu-id="a80f5-150">Zarządzanie topologią USB.</span><span class="sxs-lookup"><span data-stu-id="a80f5-150">Manage the topology of the USB.</span></span>
- <span data-ttu-id="a80f5-151">Powiąż urządzenie USB z jedną lub wieloma klasami.</span><span class="sxs-lookup"><span data-stu-id="a80f5-151">Bind a USB device to one or more classes.</span></span>
- <span data-ttu-id="a80f5-152">Podaj interfejs API do klas, aby wykonać transportowe i transfery za pośrednictwem deskryptora urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-152">Provide an API to classes to perform device descriptor interrogation and USB transfers.</span></span>

### <a name="topology-manager"></a><span data-ttu-id="a80f5-153">Menedżer topologii</span><span class="sxs-lookup"><span data-stu-id="a80f5-153">Topology Manager</span></span>

<span data-ttu-id="a80f5-154">Wątek topologii stosu USB jest wyłączany, gdy nowe urządzenie jest połączone lub gdy urządzenie zostało odłączone.</span><span class="sxs-lookup"><span data-stu-id="a80f5-154">The USB stack topology thread is awakened when a new device is connected or when a device has been disconnected.</span></span> <span data-ttu-id="a80f5-155">Koncentrator główny lub zwykłe centrum może akceptować połączenia urządzeń.</span><span class="sxs-lookup"><span data-stu-id="a80f5-155">Either the root hub or a regular hub can accept device connections.</span></span> <span data-ttu-id="a80f5-156">Po połączeniu urządzenia z urządzeniem USB Menedżer topologii pobierze deskryptora urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-156">Once a device has been connected to the USB, the topology manager will retrieve the device descriptor.</span></span> <span data-ttu-id="a80f5-157">Ten deskryptor będzie zawierać liczbę możliwych konfiguracji dostępnych dla tego urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-157">This descriptor will contain the number of possible configurations available for this device.</span></span> <span data-ttu-id="a80f5-158">Większość urządzeń ma tylko jedną konfigurację.</span><span class="sxs-lookup"><span data-stu-id="a80f5-158">Most devices have one configuration only.</span></span> <span data-ttu-id="a80f5-159">Niektóre urządzenia mogą działać inaczej, zgodnie z dostępną mocą dostępną na porcie, do którego jest podłączony.</span><span class="sxs-lookup"><span data-stu-id="a80f5-159">Some devices can operate differently according to the available power available on the port where it is connected.</span></span> <span data-ttu-id="a80f5-160">W takim przypadku urządzenie będzie miało wiele konfiguracji, które można wybrać w zależności od dostępnej mocy.</span><span class="sxs-lookup"><span data-stu-id="a80f5-160">If this is the case, the device will have multiple configurations that can be selected depending on the available power.</span></span> <span data-ttu-id="a80f5-161">Gdy urządzenie jest skonfigurowane przez Menedżera topologii, jest to dozwolone do narysowania ilości mocy określonej w deskryptorze konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="a80f5-161">When the device is configured by the topology manager, it is then allowed to draw the amount of power specified in its configuration descriptor.</span></span>

## <a name="usb-class-binding"></a><span data-ttu-id="a80f5-162">Powiązanie klasy USB</span><span class="sxs-lookup"><span data-stu-id="a80f5-162">USB Class Binding</span></span>

<span data-ttu-id="a80f5-163">Po skonfigurowaniu urządzenia Menedżer topologii zezwoli, aby Menedżer klas kontynuował odnajdywanie urządzeń, przeglądając deskryptory interfejsu urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-163">When the device is configured, the topology manager will let the class manager continue the device discovery by looking at the device interface descriptors.</span></span> <span data-ttu-id="a80f5-164">Urządzenie może mieć co najmniej jeden deskryptor interfejsu.</span><span class="sxs-lookup"><span data-stu-id="a80f5-164">A device can have one or more interface descriptors.</span></span>

<span data-ttu-id="a80f5-165">Interfejs reprezentuje funkcję w urządzeniu.</span><span class="sxs-lookup"><span data-stu-id="a80f5-165">An interface represents a function in a device.</span></span> <span data-ttu-id="a80f5-166">Na przykład głośnik USB ma trzy interfejsy, jeden do przesyłania strumieniowego audio, jeden dla kontrolki audio i jeden do zarządzania różnymi przyciskami głośników.</span><span class="sxs-lookup"><span data-stu-id="a80f5-166">For instance, a USB speaker has three interfaces, one for audio streaming, one for audio control, and one to manage the various speaker buttons.</span></span>

<span data-ttu-id="a80f5-167">Menedżer klas ma dwa mechanizmy przyłączania interfejsów urządzenia do jednej lub kilku klas.</span><span class="sxs-lookup"><span data-stu-id="a80f5-167">The class manager has two mechanisms to join the device interface(s) to one or more classes.</span></span> <span data-ttu-id="a80f5-168">Może użyć kombinacji identyfikatora PID/VID (identyfikator produktu i identyfikator dostawcy) znajdującego się w deskryptorze interfejsu lub kombinacji klasy/podklasy/protokołu.</span><span class="sxs-lookup"><span data-stu-id="a80f5-168">It can either use the combination of a PID/VID (product ID and vendor ID) found in the interface descriptor or the combination of Class/Subclass/Protocol.</span></span>

<span data-ttu-id="a80f5-169">Kombinacja identyfikatora PID/VID jest prawidłowa dla interfejsów, które nie mogą być sterowane przez klasę generyczną.</span><span class="sxs-lookup"><span data-stu-id="a80f5-169">The PID/VID combination is valid for interfaces that cannot be driven by a generic class.</span></span> <span data-ttu-id="a80f5-170">Kombinacja klasy/podklasy/protokołu jest używana przez interfejsy należące do klasy certyfikowanej USB, takiej jak drukarka, Hub, Storage, audio lub HID.</span><span class="sxs-lookup"><span data-stu-id="a80f5-170">The Class/Subclass/Protocol combination is used by interfaces that belong to a USB-IF certified class such as a printer, hub, storage, audio, or HID.</span></span>

<span data-ttu-id="a80f5-171">Menedżer klas zawiera listę zarejestrowanych klas z inicjalizacji USBX.</span><span class="sxs-lookup"><span data-stu-id="a80f5-171">The class manager contains a list of registered classes from the initialization of USBX.</span></span> <span data-ttu-id="a80f5-172">Menedżer klas będzie wywoływał każdą klasę pojedynczo do momentu zaakceptowania przez jedną klasę do zarządzania interfejsem dla tego urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-172">The class manager will call each class one at a time until one class accepts to manage the interface for that device.</span></span> <span data-ttu-id="a80f5-173">Klasa może zarządzać tylko jednym interfejsem.</span><span class="sxs-lookup"><span data-stu-id="a80f5-173">A class can only manage one interface.</span></span> <span data-ttu-id="a80f5-174">Na przykład głośnika audio USB Menedżer klas wywoła wszystkie klasy dla każdego z interfejsów.</span><span class="sxs-lookup"><span data-stu-id="a80f5-174">For the example of the USB audio speaker, the class manager will call all the classes for each of the interfaces.</span></span>

<span data-ttu-id="a80f5-175">Gdy Klasa akceptuje interfejs, tworzone jest nowe wystąpienie tej klasy.</span><span class="sxs-lookup"><span data-stu-id="a80f5-175">Once a class accepts an interface, a new instance of that class is created.</span></span> <span data-ttu-id="a80f5-176">Menedżer klas będzie następnie szukać domyślnego ustawienia alternatywnego dla interfejsu.</span><span class="sxs-lookup"><span data-stu-id="a80f5-176">The class manager will then search for the default alternate setting for the interface.</span></span> <span data-ttu-id="a80f5-177">Urządzenie może mieć co najmniej jedno alternatywne ustawienia dla każdego interfejsu.</span><span class="sxs-lookup"><span data-stu-id="a80f5-177">A device may have one or more alternate settings for each interface.</span></span> <span data-ttu-id="a80f5-178">Ustawienie alternatywne 0 będzie używane domyślnie do momentu, gdy Klasa zdecyduje się ją zmienić.</span><span class="sxs-lookup"><span data-stu-id="a80f5-178">The alternate setting 0 will be the on used by default until a class decides to change it.</span></span>

<span data-ttu-id="a80f5-179">W przypadku domyślnego ustawienia alternatywnego Menedżer klas zainstaluje wszystkie punkty końcowe zawarte w ustawieniu alternatywnym.</span><span class="sxs-lookup"><span data-stu-id="a80f5-179">For the default alternate setting, the class manager will mount all the endpoints contained in the alternate setting.</span></span> <span data-ttu-id="a80f5-180">W przypadku pomyślnego zamontowania każdego punktu końcowego Menedżer klas ukończy zadanie, zwracając do klasy, która ukończy inicjalizację interfejsu.</span><span class="sxs-lookup"><span data-stu-id="a80f5-180">If the mounting of each endpoint is successful, the class manager will complete its job by returning to the class that will finish the initialization of the interface.</span></span>

### <a name="usbx-apis"></a><span data-ttu-id="a80f5-181">Interfejsy API USBX</span><span class="sxs-lookup"><span data-stu-id="a80f5-181">USBX APIs</span></span>

<span data-ttu-id="a80f5-182">Stos USB eksportuje określoną liczbę interfejsów API dla klas USB, aby przełączać urządzenia i transfery USB w określonych punktach końcowych.</span><span class="sxs-lookup"><span data-stu-id="a80f5-182">The USB stack exports a certain number of APIs for the USB classes to perform interrogation on the device and USB transfers on specific endpoints.</span></span> <span data-ttu-id="a80f5-183">Te funkcje interfejsu API są szczegółowo opisane w tym podręczniku.</span><span class="sxs-lookup"><span data-stu-id="a80f5-183">These API functions are described in detail in this reference manual.</span></span>

### <a name="host-controller"></a><span data-ttu-id="a80f5-184">Kontroler hosta</span><span class="sxs-lookup"><span data-stu-id="a80f5-184">Host Controller</span></span>

<span data-ttu-id="a80f5-185">Sterownik kontrolera hosta jest odpowiedzialny za kierowanie określonego typu kontrolera USB.</span><span class="sxs-lookup"><span data-stu-id="a80f5-185">The host controller driver is responsible for driving a specific type of USB controller.</span></span> <span data-ttu-id="a80f5-186">Kontroler hosta USB może mieć wiele kontrolerów wewnątrz.</span><span class="sxs-lookup"><span data-stu-id="a80f5-186">A USB host controller can have multiple controllers inside.</span></span> <span data-ttu-id="a80f5-187">Na przykład niektóre chipsety PC firmy Intel zawierają dwa kontrolery UHCI.</span><span class="sxs-lookup"><span data-stu-id="a80f5-187">For instance, certain Intel PC chipset contain two UHCI controllers.</span></span> <span data-ttu-id="a80f5-188">Niektóre kontrolery USB 2,0 zawierają wiele wystąpień kontrolera OHCI oprócz jednego wystąpienia kontrolera EHCI.</span><span class="sxs-lookup"><span data-stu-id="a80f5-188">Some USB 2.0 controllers contain multiple instances of an OHCI controller in addition to one instance of the EHCI controller.</span></span>

<span data-ttu-id="a80f5-189">Kontroler hosta będzie zarządzać wieloma wystąpieniami tylko tego samego kontrolera.</span><span class="sxs-lookup"><span data-stu-id="a80f5-189">The Host controller will manage multiple instance of the same controller only.</span></span> <span data-ttu-id="a80f5-190">Aby można było uzyskać większość kontrolerów hosta USB 2,0, będzie wymagane zainicjowanie kontrolera OCHI i kontrolera EHCI podczas inicjowania USBX.</span><span class="sxs-lookup"><span data-stu-id="a80f5-190">In order to drive most USB 2.0 host controllers, it will be required to initialize both the OCHI controller and the EHCI controller during the initialization of USBX.</span></span>

<span data-ttu-id="a80f5-191">Kontroler hosta jest odpowiedzialny za zarządzanie następującymi.</span><span class="sxs-lookup"><span data-stu-id="a80f5-191">The host controller is responsible for managing the following.</span></span>

- <span data-ttu-id="a80f5-192">Główny koncentrator</span><span class="sxs-lookup"><span data-stu-id="a80f5-192">Root Hub</span></span>
- <span data-ttu-id="a80f5-193">Zarządzanie energią</span><span class="sxs-lookup"><span data-stu-id="a80f5-193">Power Management</span></span>
- <span data-ttu-id="a80f5-194">Punkty końcowe</span><span class="sxs-lookup"><span data-stu-id="a80f5-194">Endpoints</span></span>
- <span data-ttu-id="a80f5-195">Sunięcia</span><span class="sxs-lookup"><span data-stu-id="a80f5-195">Transfers</span></span>

### <a name="root-hub"></a><span data-ttu-id="a80f5-196">Główny koncentrator</span><span class="sxs-lookup"><span data-stu-id="a80f5-196">Root Hub</span></span>

<span data-ttu-id="a80f5-197">Główne Zarządzanie centrami jest odpowiedzialne za działanie wszystkich portów kontrolera i określanie, czy urządzenie zostało wstawione.</span><span class="sxs-lookup"><span data-stu-id="a80f5-197">The root hub management is responsible for the powering up of each controller port and determining if there is a device inserted or not.</span></span> <span data-ttu-id="a80f5-198">Ta funkcja jest używana przez USBX Generic Root Hub do przejrzeć portów podrzędnych kontrolera.</span><span class="sxs-lookup"><span data-stu-id="a80f5-198">This functionality is used by the USBX generic root hub to interrogate the controller downstream ports.</span></span>

### <a name="power-management"></a><span data-ttu-id="a80f5-199">Zarządzanie energią</span><span class="sxs-lookup"><span data-stu-id="a80f5-199">Power Management</span></span>

<span data-ttu-id="a80f5-200">Przetwarzanie zarządzania mocą zapewnia obsługę sygnałów zawieszenia/wznowienia w trybie gang, w związku z czym ma wpływ na wszystkie porty podrzędne kontrolera w tym samym czasie lub indywidualnie, Jeśli kontroler oferuje tę funkcję.</span><span class="sxs-lookup"><span data-stu-id="a80f5-200">The power management processing provides for the handling of suspend/resume signals either in gang mode, therefore affecting all controller downstream ports at the same time, or individually if the controller offers this functionality.</span></span>

### <a name="endpoints"></a><span data-ttu-id="a80f5-201">Punkty końcowe</span><span class="sxs-lookup"><span data-stu-id="a80f5-201">Endpoints</span></span>

<span data-ttu-id="a80f5-202">Zarządzanie punktami końcowymi umożliwia tworzenie i niszczenie fizycznych punktów końcowych do kontrolera.</span><span class="sxs-lookup"><span data-stu-id="a80f5-202">The endpoint management provides for the creation or destruction of physical endpoints to the controller.</span></span> <span data-ttu-id="a80f5-203">Fizyczne punkty końcowe są jednostkami pamięci, które są analizowane przez kontroler, Jeśli kontroler obsługuje główny serwer DMA lub jest zapisany w kontrolerze.</span><span class="sxs-lookup"><span data-stu-id="a80f5-203">The physical endpoints are memory entities that are parsed by the controller if the controller supports master DMA or that are written in the controller.</span></span> <span data-ttu-id="a80f5-204">Fizyczne punkty końcowe zawierają informacje o transakcjach, które mają być wykonywane przez kontroler.</span><span class="sxs-lookup"><span data-stu-id="a80f5-204">The physical endpoints contain transactions information to be performed by the controller.</span></span>

### <a name="transfers"></a><span data-ttu-id="a80f5-205">Sunięcia</span><span class="sxs-lookup"><span data-stu-id="a80f5-205">Transfers</span></span>

<span data-ttu-id="a80f5-206">Zarządzanie transferem zapewnia klasy do wykonywania transakcji na wszystkich utworzonych punktach końcowych.</span><span class="sxs-lookup"><span data-stu-id="a80f5-206">Transfer management provides for a class to perform a transaction on each of the endpoints that have been created.</span></span> <span data-ttu-id="a80f5-207">Każdy logiczny punkt końcowy zawiera składnik o nazwie żądanie transferu dla żądań transferu USB.</span><span class="sxs-lookup"><span data-stu-id="a80f5-207">Each logical endpoint contains a component called TRANSFER REQUEST for USB transfer requests.</span></span> <span data-ttu-id="a80f5-208">ŻĄDANIE transferu jest używane przez stos do opisywania transakcji.</span><span class="sxs-lookup"><span data-stu-id="a80f5-208">The TRANSFER REQUEST is used by the stack to describe the transaction.</span></span> <span data-ttu-id="a80f5-209">To żądanie transferu jest następnie przekazywane do stosu i do kontrolera, co może podzielić go na kilka transakcji podrzędnych w zależności od możliwości kontrolera.</span><span class="sxs-lookup"><span data-stu-id="a80f5-209">This TRANSFER REQUEST is then passed to the stack and to the controller, which may divide it into several sub transactions depending on the capabilities of the controller.</span></span>

## <a name="usb-device-framework"></a><span data-ttu-id="a80f5-210">Architektura urządzenia USB</span><span class="sxs-lookup"><span data-stu-id="a80f5-210">USB Device Framework</span></span>

<span data-ttu-id="a80f5-211">Urządzenie USB jest reprezentowane przez drzewo deskryptorów.</span><span class="sxs-lookup"><span data-stu-id="a80f5-211">A USB device is represented by a tree of descriptors.</span></span> <span data-ttu-id="a80f5-212">Istnieje sześć głównych typów deskryptorów.</span><span class="sxs-lookup"><span data-stu-id="a80f5-212">There are six main types of descriptors.</span></span>

- <span data-ttu-id="a80f5-213">Deskryptory urządzeń</span><span class="sxs-lookup"><span data-stu-id="a80f5-213">Device descriptors</span></span>
- <span data-ttu-id="a80f5-214">Deskryptory konfiguracji</span><span class="sxs-lookup"><span data-stu-id="a80f5-214">Configuration descriptors</span></span>
- <span data-ttu-id="a80f5-215">Deskryptory interfejsów</span><span class="sxs-lookup"><span data-stu-id="a80f5-215">Interface descriptors</span></span>
- <span data-ttu-id="a80f5-216">Deskryptory punktów końcowych</span><span class="sxs-lookup"><span data-stu-id="a80f5-216">Endpoint descriptors</span></span>
- <span data-ttu-id="a80f5-217">Deskryptory ciągów</span><span class="sxs-lookup"><span data-stu-id="a80f5-217">String descriptors</span></span>
- <span data-ttu-id="a80f5-218">Deskryptory funkcjonalne</span><span class="sxs-lookup"><span data-stu-id="a80f5-218">Functional descriptors</span></span>

<span data-ttu-id="a80f5-219">Urządzenie USB może mieć bardzo prosty opis i wygląda następująco.</span><span class="sxs-lookup"><span data-stu-id="a80f5-219">A USB device may have a very simple description and looks like this.</span></span>
<span data-ttu-id="a80f5-220">![Proste urządzenie USB](./media/usbx-host-stack/usb-device-simple.png)</span><span class="sxs-lookup"><span data-stu-id="a80f5-220">![Simple USB device](./media/usbx-host-stack/usb-device-simple.png)</span></span>

<span data-ttu-id="a80f5-221">Na powyższej ilustracji urządzenie ma tylko jedną konfigurację.</span><span class="sxs-lookup"><span data-stu-id="a80f5-221">In the above illustration, the device has only one configuration.</span></span> <span data-ttu-id="a80f5-222">Do tej konfiguracji jest dołączony pojedynczy interfejs wskazujący, że urządzenie ma tylko jedną funkcję i ma tylko jeden punkt końcowy.</span><span class="sxs-lookup"><span data-stu-id="a80f5-222">A single interface is attached to this configuration, indicating that the device has only one function, and it has one endpoint only.</span></span> <span data-ttu-id="a80f5-223">Dołączony do deskryptora urządzenia jest deskryptorem ciągu dostarczającym widoczną identyfikację urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-223">Attached to the device descriptor is a string descriptor providing a visible identification of the device.</span></span>

<span data-ttu-id="a80f5-224">Jednak urządzenie może być bardziej skomplikowane i może wyglądać w następujący sposób.</span><span class="sxs-lookup"><span data-stu-id="a80f5-224">However, a device may be more complex and may appear as follows.</span></span>

![Złożone urządzenie USB](./media/usbx-host-stack/usb-device-complex.png)

<span data-ttu-id="a80f5-226">Na powyższej ilustracji urządzenie ma dwa deskryptory konfiguracji dołączone do deskryptora urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-226">In the above illustration, the device has two configuration descriptors attached to the device descriptor.</span></span> <span data-ttu-id="a80f5-227">To urządzenie może wskazywać, że ma dwa tryby zasilające lub mogą być sterowane przez klasy standardowe lub własnościowe klasy.</span><span class="sxs-lookup"><span data-stu-id="a80f5-227">This device may indicate that it has two power modes or can be driven by either standard classes or proprietary classes.</span></span>

<span data-ttu-id="a80f5-228">Dołączone do pierwszej konfiguracji są dwa interfejsy wskazujące, że urządzenie ma dwie funkcje logiczne.</span><span class="sxs-lookup"><span data-stu-id="a80f5-228">Attached to the first configuration are two interfaces indicating that the device has two logical functions.</span></span> <span data-ttu-id="a80f5-229">Pierwsza funkcja ma 3 deskryptory punktów końcowych i deskryptor funkcjonalny.</span><span class="sxs-lookup"><span data-stu-id="a80f5-229">The first function has 3 endpoint descriptors and a functional descriptor.</span></span> <span data-ttu-id="a80f5-230">Deskryptor funkcjonalny może być używany przez klasę odpowiedzialną za interfejs, aby uzyskać dodatkowe informacje o tym interfejsie, które zwykle nie są dostępne przez deskryptor generyczny.</span><span class="sxs-lookup"><span data-stu-id="a80f5-230">The functional descriptor may be used by the class responsible to drive the interface to obtain further information about this interface normally not found by a generic descriptor.</span></span>

### <a name="device-descriptors"></a><span data-ttu-id="a80f5-231">Deskryptory urządzeń</span><span class="sxs-lookup"><span data-stu-id="a80f5-231">Device Descriptors</span></span>

<span data-ttu-id="a80f5-232">Każde urządzenie USB ma jeden deskryptor jednego urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-232">Each USB device has one single device descriptor.</span></span> <span data-ttu-id="a80f5-233">Ten deskryptor zawiera identyfikator urządzenia, liczbę obsługiwanych konfiguracji oraz charakterystykę domyślnego punktu końcowego sterowania używanego do konfigurowania urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-233">This descriptor contains the device identification, the number of configurations supported, and the characteristics of the default control endpoint used for configuring the device.</span></span>

| <span data-ttu-id="a80f5-234">Przesunięcie</span><span class="sxs-lookup"><span data-stu-id="a80f5-234">Offset</span></span> | <span data-ttu-id="a80f5-235">Pole</span><span class="sxs-lookup"><span data-stu-id="a80f5-235">Field</span></span>              | <span data-ttu-id="a80f5-236">Rozmiar</span><span class="sxs-lookup"><span data-stu-id="a80f5-236">Size</span></span> | <span data-ttu-id="a80f5-237">Wartość</span><span class="sxs-lookup"><span data-stu-id="a80f5-237">Value</span></span>    | <span data-ttu-id="a80f5-238">Opis</span><span class="sxs-lookup"><span data-stu-id="a80f5-238">Description</span></span>                             |
| ------ | ------------------ | ---- | -------- | --------------------------------------- |
| <span data-ttu-id="a80f5-239">0</span><span class="sxs-lookup"><span data-stu-id="a80f5-239">0</span></span>      | <span data-ttu-id="a80f5-240">BLength</span><span class="sxs-lookup"><span data-stu-id="a80f5-240">BLength</span></span>            | <span data-ttu-id="a80f5-241">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-241">1</span></span>    | <span data-ttu-id="a80f5-242">Liczba</span><span class="sxs-lookup"><span data-stu-id="a80f5-242">Number</span></span>   | <span data-ttu-id="a80f5-243">Rozmiar tego deskryptora w bajtach</span><span class="sxs-lookup"><span data-stu-id="a80f5-243">Size of this descriptor in bytes</span></span> |
| <span data-ttu-id="a80f5-244">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-244">1</span></span>      | <span data-ttu-id="a80f5-245">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="a80f5-245">bDescriptorType</span></span>    | <span data-ttu-id="a80f5-246">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-246">1</span></span>    | <span data-ttu-id="a80f5-247">Stała</span><span class="sxs-lookup"><span data-stu-id="a80f5-247">Constant</span></span> | <span data-ttu-id="a80f5-248">Typ deskryptora urządzenia</span><span class="sxs-lookup"><span data-stu-id="a80f5-248">DEVICE Descriptor Type</span></span> |
| <span data-ttu-id="a80f5-249">2</span><span class="sxs-lookup"><span data-stu-id="a80f5-249">2</span></span>      | <span data-ttu-id="a80f5-250">bcdUSB</span><span class="sxs-lookup"><span data-stu-id="a80f5-250">bcdUSB</span></span>             | <span data-ttu-id="a80f5-251">2</span><span class="sxs-lookup"><span data-stu-id="a80f5-251">2</span></span>    | <span data-ttu-id="a80f5-252">MAGAZYNU</span><span class="sxs-lookup"><span data-stu-id="a80f5-252">BCD</span></span>      | <span data-ttu-id="a80f5-253">Numer wydania specyfikacji USB w BinaryCoded gru</span><span class="sxs-lookup"><span data-stu-id="a80f5-253">USB Specification Release Number in BinaryCoded Dec</span></span><br /><span data-ttu-id="a80f5-254">Przykład: 2,10 jest równoważne 0x210.</span><span class="sxs-lookup"><span data-stu-id="a80f5-254">Example: 2.10 is equivalent to 0x210.</span></span> <span data-ttu-id="a80f5-255">To pole Identyfikuje wydanie specyfikacji USB, z którą urządzenie i jego deskryptory są zgodne.</span><span class="sxs-lookup"><span data-stu-id="a80f5-255">This field identifies the release of the USB Specification that the device and its descriptors are compliant with.</span></span> |
| <span data-ttu-id="a80f5-256">4</span><span class="sxs-lookup"><span data-stu-id="a80f5-256">4</span></span>      | <span data-ttu-id="a80f5-257">bDeviceClass</span><span class="sxs-lookup"><span data-stu-id="a80f5-257">bDeviceClass</span></span>       | <span data-ttu-id="a80f5-258">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-258">1</span></span>    | <span data-ttu-id="a80f5-259">Klasa</span><span class="sxs-lookup"><span data-stu-id="a80f5-259">Class</span></span>    | <span data-ttu-id="a80f5-260">Kod klasy (przypisany przez USB-IF).</span><span class="sxs-lookup"><span data-stu-id="a80f5-260">Class code (assigned by USB-IF).</span></span><br /><span data-ttu-id="a80f5-261">Jeśli to pole zostanie zresetowane do wartości 0, każdy interfejs w ramach konfiguracji określa własne informacje o klasie i różne interfejsy działają niezależnie.</span><span class="sxs-lookup"><span data-stu-id="a80f5-261">If this field is reset to 0, each interface within a configuration specifies its own class information and the various interfaces operate independently.</span></span><br /><span data-ttu-id="a80f5-262">Jeśli to pole jest ustawione na wartość z zakresu od 1 do 0xFE, urządzenie obsługuje inne specyfikacje klasy w różnych interfejsach, a interfejsy mogą nie działać niezależnie.</span><span class="sxs-lookup"><span data-stu-id="a80f5-262">If this field is set to a value between 1 and 0xFE, the device supports different class specifications on different interfaces and the interfaces may not operate independently.</span></span> <span data-ttu-id="a80f5-263">Ta wartość Określa definicję klasy używaną dla interfejsów agregujących.</span><span class="sxs-lookup"><span data-stu-id="a80f5-263">This value identifies the class definition used for the aggregate interfaces.</span></span><br /><span data-ttu-id="a80f5-264">Jeśli to pole jest ustawione na wartość 0xFF, Klasa urządzenia jest specyficzna dla dostawcy.</span><span class="sxs-lookup"><span data-stu-id="a80f5-264">If this field is set to 0xFF, the device class is vendor specific.</span></span> |
| <span data-ttu-id="a80f5-265">5</span><span class="sxs-lookup"><span data-stu-id="a80f5-265">5</span></span>      | <span data-ttu-id="a80f5-266">bDeviceSubClass</span><span class="sxs-lookup"><span data-stu-id="a80f5-266">bDeviceSubClass</span></span>    | <span data-ttu-id="a80f5-267">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-267">1</span></span>    | <span data-ttu-id="a80f5-268">Podklasa</span><span class="sxs-lookup"><span data-stu-id="a80f5-268">SubClass</span></span> | <span data-ttu-id="a80f5-269">Kod podklasy (przypisany przez USB-IF).</span><span class="sxs-lookup"><span data-stu-id="a80f5-269">Subclass code (assigned by USB-IF).</span></span><br /><span data-ttu-id="a80f5-270">Te kody są kwalifikowane przez wartość pola bDeviceClass.</span><span class="sxs-lookup"><span data-stu-id="a80f5-270">These codes are qualified by the value of the bDeviceClass field.</span></span> <span data-ttu-id="a80f5-271">Jeśli pole bDeviceClass zostanie zresetowane do wartości 0, to pole musi również zostać zresetowane do wartości 0.</span><span class="sxs-lookup"><span data-stu-id="a80f5-271">If the bDeviceClass field is reset to 0, this field must also be reset to 0.</span></span> <span data-ttu-id="a80f5-272">Jeśli pole bDeviceClass nie jest ustawione na wartość 0xFF, wszystkie wartości są zastrzeżone do przypisania przez USB.</span><span class="sxs-lookup"><span data-stu-id="a80f5-272">If the bDeviceClass field is not set to 0xFF, all values are reserved for assignment by USB.</span></span> |
| <span data-ttu-id="a80f5-273">6</span><span class="sxs-lookup"><span data-stu-id="a80f5-273">6</span></span>      | <span data-ttu-id="a80f5-274">bDeviceProtocol</span><span class="sxs-lookup"><span data-stu-id="a80f5-274">bDeviceProtocol</span></span>    | <span data-ttu-id="a80f5-275">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-275">1</span></span>    | <span data-ttu-id="a80f5-276">Protokół</span><span class="sxs-lookup"><span data-stu-id="a80f5-276">Protocol</span></span> | <span data-ttu-id="a80f5-277">Kod protokołu (przypisany przez USB-IF).</span><span class="sxs-lookup"><span data-stu-id="a80f5-277">Protocol code (assigned by USB-IF).</span></span><br /><span data-ttu-id="a80f5-278">Kody te są kwalifikowane przez wartość bDeviceClass i pola bDeviceSubClass.</span><span class="sxs-lookup"><span data-stu-id="a80f5-278">These codes are qualified by the value of the bDeviceClass and the bDeviceSubClass fields.</span></span> <span data-ttu-id="a80f5-279">Jeśli urządzenie obsługuje protokoły specyficzne dla klasy na podstawie urządzenia, a nie na podstawie interfejsu, ten kod identyfikuje protokoły używane przez urządzenie zgodnie ze specyfikacją klasy urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-279">If a device supports class-specific protocols on a device basis as opposed to an interface basis, this code identifies the protocols that the device uses as defined by the specification of the device class.</span></span> <span data-ttu-id="a80f5-280">Jeśli to pole zostanie zresetowane do wartości 0, urządzenie nie korzysta z protokołów określonych dla klasy na podstawie urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-280">If this field is reset to 0, the device does not use class specific protocols on a device basis.</span></span><br /><span data-ttu-id="a80f5-281">Może jednak używać protokołów specyficznych dla klasy na podstawie interfejsu.</span><span class="sxs-lookup"><span data-stu-id="a80f5-281">However, it may use class specific protocols on an interface basis.</span></span><br /><span data-ttu-id="a80f5-282">Jeśli to pole jest ustawione na wartość 0xFF, urządzenie używa protokołu określonego dla dostawcy na podstawie urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-282">If this field is set to 0xFF, the device uses a vendor specific protocol on a device basis.</span></span> |
| <span data-ttu-id="a80f5-283">7</span><span class="sxs-lookup"><span data-stu-id="a80f5-283">7</span></span>      | <span data-ttu-id="a80f5-284">bMaxPacketSize0</span><span class="sxs-lookup"><span data-stu-id="a80f5-284">bMaxPacketSize0</span></span>    | <span data-ttu-id="a80f5-285">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-285">1</span></span>    | <span data-ttu-id="a80f5-286">Liczba</span><span class="sxs-lookup"><span data-stu-id="a80f5-286">Number</span></span>   | <span data-ttu-id="a80f5-287">Maksymalny rozmiar pakietu dla punktu końcowego zero (prawidłowe rozmiary to 8, 16, 32 lub 64)</span><span class="sxs-lookup"><span data-stu-id="a80f5-287">Maximum packet size for endpoint zero (only byte sizes of 8, 16, 32, or 64 are valid)</span></span> |
| <span data-ttu-id="a80f5-288">8</span><span class="sxs-lookup"><span data-stu-id="a80f5-288">8</span></span>      | <span data-ttu-id="a80f5-289">idVendor</span><span class="sxs-lookup"><span data-stu-id="a80f5-289">idVendor</span></span>           | <span data-ttu-id="a80f5-290">2</span><span class="sxs-lookup"><span data-stu-id="a80f5-290">2</span></span>    | <span data-ttu-id="a80f5-291">ID (Identyfikator)</span><span class="sxs-lookup"><span data-stu-id="a80f5-291">ID</span></span>       | <span data-ttu-id="a80f5-292">Identyfikator dostawcy (przypisany przez USB — Jeśli)</span><span class="sxs-lookup"><span data-stu-id="a80f5-292">Vendor ID (assigned by USB-IF)</span></span> |
| <span data-ttu-id="a80f5-293">10</span><span class="sxs-lookup"><span data-stu-id="a80f5-293">10</span></span>     | <span data-ttu-id="a80f5-294">idProduct</span><span class="sxs-lookup"><span data-stu-id="a80f5-294">idProduct</span></span>          | <span data-ttu-id="a80f5-295">2</span><span class="sxs-lookup"><span data-stu-id="a80f5-295">2</span></span>    | <span data-ttu-id="a80f5-296">ID (Identyfikator)</span><span class="sxs-lookup"><span data-stu-id="a80f5-296">ID</span></span>       | <span data-ttu-id="a80f5-297">Identyfikator produktu (przypisany przez producenta)</span><span class="sxs-lookup"><span data-stu-id="a80f5-297">Product ID (assigned by the Manufacturer)</span></span> |
| <span data-ttu-id="a80f5-298">12</span><span class="sxs-lookup"><span data-stu-id="a80f5-298">12</span></span>     | <span data-ttu-id="a80f5-299">bcdDevice</span><span class="sxs-lookup"><span data-stu-id="a80f5-299">bcdDevice</span></span>          | <span data-ttu-id="a80f5-300">2</span><span class="sxs-lookup"><span data-stu-id="a80f5-300">2</span></span>    | <span data-ttu-id="a80f5-301">MAGAZYNU</span><span class="sxs-lookup"><span data-stu-id="a80f5-301">BCD</span></span>      | <span data-ttu-id="a80f5-302">Numer wydania urządzenia w postaci dziesiętnej kodowanej binarnie</span><span class="sxs-lookup"><span data-stu-id="a80f5-302">Device release number in binary-coded decimal</span></span> |
| <span data-ttu-id="a80f5-303">14</span><span class="sxs-lookup"><span data-stu-id="a80f5-303">14</span></span>     | <span data-ttu-id="a80f5-304">iManufacturer</span><span class="sxs-lookup"><span data-stu-id="a80f5-304">iManufacturer</span></span>      | <span data-ttu-id="a80f5-305">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-305">1</span></span>    | <span data-ttu-id="a80f5-306">Indeks</span><span class="sxs-lookup"><span data-stu-id="a80f5-306">Index</span></span>    | <span data-ttu-id="a80f5-307">Indeks deskryptora ciągu opisujący producenta</span><span class="sxs-lookup"><span data-stu-id="a80f5-307">Index of string descriptor describing manufacturer</span></span> |
| <span data-ttu-id="a80f5-308">15</span><span class="sxs-lookup"><span data-stu-id="a80f5-308">15</span></span>     | <span data-ttu-id="a80f5-309">iProduct</span><span class="sxs-lookup"><span data-stu-id="a80f5-309">iProduct</span></span>           | <span data-ttu-id="a80f5-310">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-310">1</span></span>    | <span data-ttu-id="a80f5-311">Indeks</span><span class="sxs-lookup"><span data-stu-id="a80f5-311">Index</span></span>    | <span data-ttu-id="a80f5-312">Indeks deskryptora ciągu opisujący produkt</span><span class="sxs-lookup"><span data-stu-id="a80f5-312">Index of string descriptor describing product</span></span> |
| <span data-ttu-id="a80f5-313">16</span><span class="sxs-lookup"><span data-stu-id="a80f5-313">16</span></span>     | <span data-ttu-id="a80f5-314">iSerialNumbe</span><span class="sxs-lookup"><span data-stu-id="a80f5-314">iSerialNumbe</span></span>       | <span data-ttu-id="a80f5-315">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-315">1</span></span>    | <span data-ttu-id="a80f5-316">Indeks</span><span class="sxs-lookup"><span data-stu-id="a80f5-316">Index</span></span>    | <span data-ttu-id="a80f5-317">Indeks deskryptora ciągu opisujący numer seryjny urządzenia</span><span class="sxs-lookup"><span data-stu-id="a80f5-317">Index of string descriptor describing the device's serial number</span></span> |
| <span data-ttu-id="a80f5-318">17</span><span class="sxs-lookup"><span data-stu-id="a80f5-318">17</span></span>     | <span data-ttu-id="a80f5-319">bNumConfigurations</span><span class="sxs-lookup"><span data-stu-id="a80f5-319">bNumConfigurations</span></span> | <span data-ttu-id="a80f5-320">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-320">1</span></span>    | <span data-ttu-id="a80f5-321">Liczba</span><span class="sxs-lookup"><span data-stu-id="a80f5-321">Number</span></span>   | <span data-ttu-id="a80f5-322">Liczba możliwych konfiguracji</span><span class="sxs-lookup"><span data-stu-id="a80f5-322">Number of possible configurations</span></span> |

<span data-ttu-id="a80f5-323">USBX definiuje deskryptor urządzenia USB w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="a80f5-323">USBX defines a USB device descriptor as follows:</span></span>

```c
typedef struct UX_DEVICE_DESCRIPTOR_STRUCT
{
    UINT      bLength;
    UINT      bDescriptorType;
    USHORT    bcdUSB;
    UINT      bDeviceClass;
    UINT      bDeviceSubClass;
    UINT      bDeviceProtocol;
    UINT      bMaxPacketSize0;
    USHORT    idVendor;
    USHORT    idProduct;
    USHORT    bcdDevice;
    UINT      iManufacturer;
    UINT      iProduct;
    UINT      iSerialNumber;
    UINT      bNumConfigurations;
} UX_DEVICE_DESCRIPTOR;
```

<span data-ttu-id="a80f5-324">Deskryptor urządzenia USB jest częścią kontenera urządzenia opisanego jako:</span><span class="sxs-lookup"><span data-stu-id="a80f5-324">The USB device descriptor is part of a device container described as:</span></span>

```c
typedef struct UX_DEVICE_STRUCT
{
    ULONG ux_device_handle;
    ULONG ux_device_type;
    ULONG ux_device_state;
    ULONG ux_device_address;
    ULONG ux_device_speed;
    ULONG ux_device_port_location;
    ULONG ux_device_max_power;
    ULONG ux_device_power_source;
    UINT ux_device_current_configuration;

    TX_SEMAPHORE ux_device_protection_semaphore;
    struct UX_DEVICE_STRUCT *ux_device_parent; 
    struct UX_HOST_CLASS_STRUCT *ux_device_class; 
    VOID *ux_device_class_instance;
    struct UX_HCD_STRUCT *ux_device_hcd;
    struct UX_CONFIGURATION_STRUCT *ux_device_first_configuration; 
    struct UX_DEVICE_STRUCT *ux_device_next_device;
    struct UX_DEVICE_DESCRIPTOR_STRUCT ux_device_descriptor;
    struct UX_ENDPOINT_STRUCT ux_device_control_endpoint;
    struct UX_HUB_TT_STRUCT ux_device_hub_tt[UX_MAX_TT];
} UX_DEVICE;
```

- <span data-ttu-id="a80f5-325">**ux_device_handle**: uchwyt urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-325">**ux_device_handle**: Handle of the device.</span></span> <span data-ttu-id="a80f5-326">Jest to zazwyczaj adres wystąpienia tej struktury dla urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-326">This is typically the address of the instance of this structure for the device.</span></span>
- <span data-ttu-id="a80f5-327">**ux_device_type**: wartość przestarzała.</span><span class="sxs-lookup"><span data-stu-id="a80f5-327">**ux_device_type**: Obsolete value.</span></span> <span data-ttu-id="a80f5-328">Nieużywany.</span><span class="sxs-lookup"><span data-stu-id="a80f5-328">Unused.</span></span>
- <span data-ttu-id="a80f5-329">**ux_device_state**: stan urządzenia, który może mieć jedną z następujących wartości:</span><span class="sxs-lookup"><span data-stu-id="a80f5-329">**ux_device_state**: Device State, which can have one of the following values:</span></span>
    - <span data-ttu-id="a80f5-330">**UX_DEVICE_RESET**                0</span><span class="sxs-lookup"><span data-stu-id="a80f5-330">**UX_DEVICE_RESET**                0</span></span>
    - <span data-ttu-id="a80f5-331">**UX_DEVICE_ATTACHED**             1</span><span class="sxs-lookup"><span data-stu-id="a80f5-331">**UX_DEVICE_ATTACHED**             1</span></span>
    - <span data-ttu-id="a80f5-332">**UX_DEVICE_ADDRESSED**            2</span><span class="sxs-lookup"><span data-stu-id="a80f5-332">**UX_DEVICE_ADDRESSED**            2</span></span>
    - <span data-ttu-id="a80f5-333">**UX_DEVICE_CONFIGURED**           3</span><span class="sxs-lookup"><span data-stu-id="a80f5-333">**UX_DEVICE_CONFIGURED**           3</span></span>
    - <span data-ttu-id="a80f5-334">**UX_DEVICE_SUSPENDED**            4</span><span class="sxs-lookup"><span data-stu-id="a80f5-334">**UX_DEVICE_SUSPENDED**            4</span></span>
    - <span data-ttu-id="a80f5-335">**UX_DEVICE_RESUMED**              5</span><span class="sxs-lookup"><span data-stu-id="a80f5-335">**UX_DEVICE_RESUMED**              5</span></span>
    - <span data-ttu-id="a80f5-336">**UX_DEVICE_SELF_POWERED_STATE**   6</span><span class="sxs-lookup"><span data-stu-id="a80f5-336">**UX_DEVICE_SELF_POWERED_STATE**   6</span></span>
    - <span data-ttu-id="a80f5-337">**UX_DEVICE_SELF_POWERED_STATE**   7</span><span class="sxs-lookup"><span data-stu-id="a80f5-337">**UX_DEVICE_SELF_POWERED_STATE**   7</span></span>
    - <span data-ttu-id="a80f5-338">**UX_DEVICE_REMOTE_WAKEUP**        8</span><span class="sxs-lookup"><span data-stu-id="a80f5-338">**UX_DEVICE_REMOTE_WAKEUP**        8</span></span>
    - <span data-ttu-id="a80f5-339">**UX_DEVICE_BUS_RESET_COMPLETED**  9</span><span class="sxs-lookup"><span data-stu-id="a80f5-339">**UX_DEVICE_BUS_RESET_COMPLETED**  9</span></span>
    - <span data-ttu-id="a80f5-340">**UX_DEVICE_REMOVED**              10</span><span class="sxs-lookup"><span data-stu-id="a80f5-340">**UX_DEVICE_REMOVED**              10</span></span>
    - <span data-ttu-id="a80f5-341">**UX_DEVICE_FORCE_DISCONNECT**     11</span><span class="sxs-lookup"><span data-stu-id="a80f5-341">**UX_DEVICE_FORCE_DISCONNECT**     11</span></span>
- <span data-ttu-id="a80f5-342">**ux_device_address**: adres urządzenia po zaakceptowaniu polecenia **SET_ADDRESS** (od 1 do 127).</span><span class="sxs-lookup"><span data-stu-id="a80f5-342">**ux_device_address**: Address of the device after the **SET_ADDRESS** command has been accepted (from 1 to 127).</span></span>
- <span data-ttu-id="a80f5-343">**ux_device_speed**: szybkość urządzenia:</span><span class="sxs-lookup"><span data-stu-id="a80f5-343">**ux_device_speed**: Speed of the device:</span></span>
    - <span data-ttu-id="a80f5-344">**UX_LOW_SPEED_DEVICE**      0</span><span class="sxs-lookup"><span data-stu-id="a80f5-344">**UX_LOW_SPEED_DEVICE**      0</span></span>
    - <span data-ttu-id="a80f5-345">**UX_FULL_SPEED_DEVICE**     1</span><span class="sxs-lookup"><span data-stu-id="a80f5-345">**UX_FULL_SPEED_DEVICE**     1</span></span>
    - <span data-ttu-id="a80f5-346">**UX_HIGH_SPEED_DEVICE**     2</span><span class="sxs-lookup"><span data-stu-id="a80f5-346">**UX_HIGH_SPEED_DEVICE**     2</span></span>
- <span data-ttu-id="a80f5-347">**ux_device_port_location**: indeks portu urządzenia nadrzędnego (głównego koncentratora lub koncentratora).</span><span class="sxs-lookup"><span data-stu-id="a80f5-347">**ux_device_port_location**: Index of the port of the parent device (root hub or hub).</span></span>
- <span data-ttu-id="a80f5-348">**ux_device_max_power**: Maksymalna moc w przypadku, gdy urządzenie może przyjąć wybraną konfigurację.</span><span class="sxs-lookup"><span data-stu-id="a80f5-348">**ux_device_max_power**: Maximum power in mA that the device may take in the selected configuration.</span></span>
- <span data-ttu-id="a80f5-349">**ux_device_power_source**: może być jedną z dwóch następujących wartości:</span><span class="sxs-lookup"><span data-stu-id="a80f5-349">**ux_device_power_source**: Can be one of the two following values:</span></span>
    - <span data-ttu-id="a80f5-350">**UX_DEVICE_BUS_POWERED**     1</span><span class="sxs-lookup"><span data-stu-id="a80f5-350">**UX_DEVICE_BUS_POWERED**     1</span></span>
    - <span data-ttu-id="a80f5-351">**UX_DEVICE_SELF_POWERED**    2</span><span class="sxs-lookup"><span data-stu-id="a80f5-351">**UX_DEVICE_SELF_POWERED**    2</span></span>
- <span data-ttu-id="a80f5-352">**ux_device_current_configuration**: indeks bieżącej konfiguracji używanej przez to urządzenie.</span><span class="sxs-lookup"><span data-stu-id="a80f5-352">**ux_device_current_configuration**: Index of the current configuration being used by this device.</span></span>
- <span data-ttu-id="a80f5-353">**ux_device_parent**: wskaźnik kontenera urządzenia nadrzędnego dla tego urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-353">**ux_device_parent**: Device container pointer of the parent of this device.</span></span> <span data-ttu-id="a80f5-354">Jeśli wskaźnik ma wartość null, obiekt nadrzędny jest głównym koncentratorem kontrolera.</span><span class="sxs-lookup"><span data-stu-id="a80f5-354">If the pointer is null, the parent is the root hub of the controller.</span></span>
- <span data-ttu-id="a80f5-355">**ux_device_class**: wskaźnik do typu klasy, który jest właścicielem tego urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-355">**ux_device_class**: Pointer to the class type that owns this device.</span></span>
- <span data-ttu-id="a80f5-356">**ux_device_class_instance**: wskaźnik do wystąpienia klasy należącej do tego urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-356">**ux_device_class_instance**: Pointer to the instance of the class that owns this device.</span></span>
- <span data-ttu-id="a80f5-357">**ux_device_hcd**: wystąpienie kontrolera hosta USB, z którym jest dołączone to urządzenie.</span><span class="sxs-lookup"><span data-stu-id="a80f5-357">**ux_device_hcd**: USB Host Controller Instance where this device is attached.</span></span>
- <span data-ttu-id="a80f5-358">**ux_device_first_configuration**: wskaźnik do pierwszego kontenera konfiguracji dla tego urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-358">**ux_device_first_configuration**: Pointer to the first configuration container for this device.</span></span>
- <span data-ttu-id="a80f5-359">**ux_device_next_device**: wskaźnik do następnego urządzenia na liście urządzeń na dowolnej magistrali wykrytej przez USBX.</span><span class="sxs-lookup"><span data-stu-id="a80f5-359">**ux_device_next_device**: Pointer to the next device in the list of device on any of the buses detected by USBX.</span></span>
- <span data-ttu-id="a80f5-360">**ux_device_descriptor**: deskryptor urządzenia USB.</span><span class="sxs-lookup"><span data-stu-id="a80f5-360">**ux_device_descriptor**: USB device descriptor.</span></span>
- <span data-ttu-id="a80f5-361">**ux_device_control_endpoint**: deskryptor domyślnego punktu końcowego kontrolki używanego przez to urządzenie.</span><span class="sxs-lookup"><span data-stu-id="a80f5-361">**ux_device_control_endpoint**: Descriptor of the default control endpoint used by this device.</span></span>
- <span data-ttu-id="a80f5-362">**ux_device_hub_tt**: tablica TTs usługi Hub dla urządzenia</span><span class="sxs-lookup"><span data-stu-id="a80f5-362">**ux_device_hub_tt**: Array of Hub TTs for the device</span></span>

### <a name="configuration-descriptors"></a><span data-ttu-id="a80f5-363">Deskryptory konfiguracji</span><span class="sxs-lookup"><span data-stu-id="a80f5-363">Configuration Descriptors</span></span>

<span data-ttu-id="a80f5-364">Deskryptor konfiguracji zawiera informacje dotyczące konkretnej konfiguracji urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-364">The configuration descriptor describes information about a specific device configuration.</span></span> <span data-ttu-id="a80f5-365">Urządzenie USB może zawierać co najmniej jeden deskryptor konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="a80f5-365">A USB device may contain one or more configuration descriptors.</span></span> <span data-ttu-id="a80f5-366">Pole **bNumConfigurations** w deskryptorze urządzenia wskazuje liczbę deskryptorów konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="a80f5-366">The **bNumConfigurations** field in the device descriptor indicates the number of configuration descriptors.</span></span> <span data-ttu-id="a80f5-367">Deskryptor zawiera pole **bConfigurationValue** o wartości, która, gdy jest używany jako parametr do żądania konfiguracji zestawu, powoduje, że urządzenie przyjmuje opisaną konfigurację.</span><span class="sxs-lookup"><span data-stu-id="a80f5-367">The descriptor contains a **bConfigurationValue** field with a value that, when used as a parameter to the Set Configuration request, causes the device to assume the described configuration.</span></span>

<span data-ttu-id="a80f5-368">Deskryptor opisuje liczbę interfejsów dostarczonych przez konfigurację.</span><span class="sxs-lookup"><span data-stu-id="a80f5-368">The descriptor describes the number of interfaces provided by the configuration.</span></span> <span data-ttu-id="a80f5-369">Każdy interfejs reprezentuje funkcję logiczną w urządzeniu i może działać niezależnie.</span><span class="sxs-lookup"><span data-stu-id="a80f5-369">Each interface represents a logical function within the device and may operate independently.</span></span> <span data-ttu-id="a80f5-370">Na przykład głośniki audio USB mogą mieć trzy interfejsy, jeden do przesyłania strumieniowego audio, jeden dla kontrolki audio i jeden interfejs HID do zarządzania przyciskami głośników.</span><span class="sxs-lookup"><span data-stu-id="a80f5-370">For instance a USB audio speaker may have three interfaces, one for audio streaming, one for audio control, and one HID interface to manage the speaker's buttons.</span></span>

<span data-ttu-id="a80f5-371">Gdy host wystawia żądanie GET_DESCRIPTOR dla deskryptora konfiguracji, zwracane są wszystkie powiązane deskryptory interfejsu i punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="a80f5-371">When the host issues a GET_DESCRIPTOR request for the configuration descriptor, all related interface and endpoint descriptors are returned.</span></span>

| <span data-ttu-id="a80f5-372">Przesunięcie</span><span class="sxs-lookup"><span data-stu-id="a80f5-372">Offset</span></span> | <span data-ttu-id="a80f5-373">Pole</span><span class="sxs-lookup"><span data-stu-id="a80f5-373">Field</span></span>               | <span data-ttu-id="a80f5-374">Rozmiar</span><span class="sxs-lookup"><span data-stu-id="a80f5-374">Size</span></span> | <span data-ttu-id="a80f5-375">Wartość</span><span class="sxs-lookup"><span data-stu-id="a80f5-375">Value</span></span>    | <span data-ttu-id="a80f5-376">Opis</span><span class="sxs-lookup"><span data-stu-id="a80f5-376">Description</span></span>                       |
| ------ | ------------------- | ---- | -------- | --------------------------------- |
| <span data-ttu-id="a80f5-377">0</span><span class="sxs-lookup"><span data-stu-id="a80f5-377">0</span></span>      | <span data-ttu-id="a80f5-378">bLength</span><span class="sxs-lookup"><span data-stu-id="a80f5-378">bLength</span></span>             | <span data-ttu-id="a80f5-379">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-379">1</span></span>    | <span data-ttu-id="a80f5-380">Liczba</span><span class="sxs-lookup"><span data-stu-id="a80f5-380">Number</span></span>   | <span data-ttu-id="a80f5-381">Rozmiar tego deskryptora w bajtach.</span><span class="sxs-lookup"><span data-stu-id="a80f5-381">Size of this descriptor in bytes.</span></span> |
| <span data-ttu-id="a80f5-382">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-382">1</span></span>      | <span data-ttu-id="a80f5-383">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="a80f5-383">bDescriptorType</span></span>     | <span data-ttu-id="a80f5-384">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-384">1</span></span>    | <span data-ttu-id="a80f5-385">Stała</span><span class="sxs-lookup"><span data-stu-id="a80f5-385">Constant</span></span> | <span data-ttu-id="a80f5-386">KONFIGURACJA</span><span class="sxs-lookup"><span data-stu-id="a80f5-386">CONFIGURATION</span></span>                     |
| <span data-ttu-id="a80f5-387">2</span><span class="sxs-lookup"><span data-stu-id="a80f5-387">2</span></span>      | <span data-ttu-id="a80f5-388">wTotalLength</span><span class="sxs-lookup"><span data-stu-id="a80f5-388">wTotalLength</span></span>        | <span data-ttu-id="a80f5-389">2</span><span class="sxs-lookup"><span data-stu-id="a80f5-389">2</span></span>    | <span data-ttu-id="a80f5-390">Liczba</span><span class="sxs-lookup"><span data-stu-id="a80f5-390">Number</span></span>   | <span data-ttu-id="a80f5-391">Łączna długość danych zwróconych dla tej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="a80f5-391">Total length of data returned for this configuration.</span></span> <span data-ttu-id="a80f5-392">Obejmuje łączną długość wszystkich deskryptorów (konfiguracji, interfejsu, punktu końcowego i konkretnej klasy lub dostawcy) zwróconych dla tej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="a80f5-392">Includes the combined length of all descriptors (configuration, interface, endpoint, and class or vendor specific) returned for this configuration.</span></span> |
| <span data-ttu-id="a80f5-393">4</span><span class="sxs-lookup"><span data-stu-id="a80f5-393">4</span></span>      | <span data-ttu-id="a80f5-394">bNumInterfaces</span><span class="sxs-lookup"><span data-stu-id="a80f5-394">bNumInterfaces</span></span>      | <span data-ttu-id="a80f5-395">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-395">1</span></span>    | <span data-ttu-id="a80f5-396">Liczba</span><span class="sxs-lookup"><span data-stu-id="a80f5-396">Number</span></span>   | <span data-ttu-id="a80f5-397">Liczba interfejsów obsługiwanych przez tę konfigurację.</span><span class="sxs-lookup"><span data-stu-id="a80f5-397">Number of interfaces supported by this configuration.</span></span> |
| <span data-ttu-id="a80f5-398">5</span><span class="sxs-lookup"><span data-stu-id="a80f5-398">5</span></span>      | <span data-ttu-id="a80f5-399">bConfigurationValue</span><span class="sxs-lookup"><span data-stu-id="a80f5-399">bConfigurationValue</span></span> | <span data-ttu-id="a80f5-400">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-400">1</span></span>    | <span data-ttu-id="a80f5-401">Liczba</span><span class="sxs-lookup"><span data-stu-id="a80f5-401">Number</span></span>   | <span data-ttu-id="a80f5-402">Wartość, która ma być używana jako argument do ustawienia</span><span class="sxs-lookup"><span data-stu-id="a80f5-402">Value to use as an argument to Set</span></span><br/><span data-ttu-id="a80f5-403">Konfiguracja, aby wybrać tę konfigurację.</span><span class="sxs-lookup"><span data-stu-id="a80f5-403">Configuration to select this configuration.</span></span> |
| <span data-ttu-id="a80f5-404">6</span><span class="sxs-lookup"><span data-stu-id="a80f5-404">6</span></span>      | <span data-ttu-id="a80f5-405">iConfiguration</span><span class="sxs-lookup"><span data-stu-id="a80f5-405">iConfiguration</span></span>      | <span data-ttu-id="a80f5-406">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-406">1</span></span>    | <span data-ttu-id="a80f5-407">Indeks</span><span class="sxs-lookup"><span data-stu-id="a80f5-407">Index</span></span>    | <span data-ttu-id="a80f5-408">Indeks deskryptora ciągu opisujący tę konfigurację.</span><span class="sxs-lookup"><span data-stu-id="a80f5-408">Index of string descriptor describing this configuration.</span></span> |
| <span data-ttu-id="a80f5-409">7</span><span class="sxs-lookup"><span data-stu-id="a80f5-409">7</span></span>      | <span data-ttu-id="a80f5-410">bMAttributes</span><span class="sxs-lookup"><span data-stu-id="a80f5-410">bMAttributes</span></span>        | <span data-ttu-id="a80f5-411">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-411">1</span></span>    | <span data-ttu-id="a80f5-412">Mapy</span><span class="sxs-lookup"><span data-stu-id="a80f5-412">Bitmap</span></span>   | <span data-ttu-id="a80f5-413">Charakterystyki konfiguracji D7 magistrali</span><span class="sxs-lookup"><span data-stu-id="a80f5-413">Configuration characteristics D7 Bus Powered</span></span><br /><span data-ttu-id="a80f5-414">D6 samoobsługowy</span><span class="sxs-lookup"><span data-stu-id="a80f5-414">D6 Self Powered</span></span><br /><span data-ttu-id="a80f5-415">Zdalne wznowienie nabudzenia</span><span class="sxs-lookup"><span data-stu-id="a80f5-415">D5 Remote Wakeup</span></span><br /><span data-ttu-id="a80f5-416">D4.. 0 zarezerwowane (Resetowanie do 0)</span><span class="sxs-lookup"><span data-stu-id="a80f5-416">D4..0 Reserved (reset to 0)</span></span><br /><span data-ttu-id="a80f5-417">Konfiguracja urządzenia korzystająca z mocy z magistrali i lokalnych źródeł ustawia zarówno D7, jak i D6.</span><span class="sxs-lookup"><span data-stu-id="a80f5-417">A device configuration that uses power from the bus and a local source sets both D7 and D6.</span></span> <span data-ttu-id="a80f5-418">Rzeczywiste źródło napięcia w środowisku uruchomieniowym można określić przy użyciu żądania pobrania stanu urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-418">The actual power source at runtime may be determined using the Get Status device request.</span></span><br /><span data-ttu-id="a80f5-419">Jeśli konfiguracja urządzenia obsługuje wznawianie zdalne, nadano wartość 1.</span><span class="sxs-lookup"><span data-stu-id="a80f5-419">If a device configuration supports remote wakeup, D5 is set to 1.</span></span> |
| <span data-ttu-id="a80f5-420">8</span><span class="sxs-lookup"><span data-stu-id="a80f5-420">8</span></span>      | <span data-ttu-id="a80f5-421">MaxPower</span><span class="sxs-lookup"><span data-stu-id="a80f5-421">MaxPower</span></span>            | <span data-ttu-id="a80f5-422">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-422">1</span></span>    | <span data-ttu-id="a80f5-423">Ruchom</span><span class="sxs-lookup"><span data-stu-id="a80f5-423">mA</span></span>       | <span data-ttu-id="a80f5-424">Maksymalne zużycie mocy przez urządzenie USB z magistrali w tej konkretnej konfiguracji, gdy urządzenie jest w pełni funkcjonalne.</span><span class="sxs-lookup"><span data-stu-id="a80f5-424">Maximum power consumption of USB device from the bus in this specific configuration when the device is fully operational.</span></span><br /><span data-ttu-id="a80f5-425">Wyrażony w 2 jednostkach (np. 50 = 100 mA).</span><span class="sxs-lookup"><span data-stu-id="a80f5-425">Expressed in 2 mA units (e.g., 50 = 100 mA).</span></span><br /><span data-ttu-id="a80f5-426">Uwaga: Konfiguracja urządzenia wskazuje, czy konfiguracja jest napędzana magistralą, czy samodzielna.</span><span class="sxs-lookup"><span data-stu-id="a80f5-426">Note: A device configuration reports whether the configuration is bus-powered or self-powered.</span></span><br /><span data-ttu-id="a80f5-427">Stan urządzenia informuje o tym, czy urządzenie jest obecnie zasilane samoobsługowo.</span><span class="sxs-lookup"><span data-stu-id="a80f5-427">Device status reports whether the device is currently self-powered.</span></span> <span data-ttu-id="a80f5-428">Jeśli urządzenie zostanie odłączone od jego zewnętrznego źródła zasilania, aktualizuje stan urządzenia, aby wskazać, że nie jest on już samodzielny.</span><span class="sxs-lookup"><span data-stu-id="a80f5-428">If a device is disconnected from its external power source, it updates device status to indicate that it is no longer self-powered.</span></span> |

<span data-ttu-id="a80f5-429">USBX definiuje deskryptor konfiguracji USB w następujący sposób.</span><span class="sxs-lookup"><span data-stu-id="a80f5-429">USBX defines a USB configuration descriptor as follows.</span></span>

```c
typedef struct UX_CONFIGURATION_DESCRIPTOR_STRUCT
{
    UINT bLength;
    UINT bDescriptorType;
    USHORT wTotalLength;
    UINT bNumInterfaces;
    UINT bConfigurationValue;
    UINT iConfiguration;
    UINT bmAttributes;
    UINT MaxPower;
} UX_CONFIGURATION_DESCRIPTOR;
```

<span data-ttu-id="a80f5-430">Deskryptor konfiguracji USB jest częścią kontenera konfiguracji opisanego poniżej.</span><span class="sxs-lookup"><span data-stu-id="a80f5-430">The USB configuration descriptor is part of a configuration container described as shown below.</span></span>

```c
typedef struct UX_CONFIGURATION_STRUCT
{
    ULONG ux_configuration_handle;
    ULONG ux_configuration_state;
    struct UX_CONFIGURATION_DESCRIPTOR_STRUCT ux_configuration_descriptor;
    struct UX_INTERFACE_STRUCT *ux_configuration_first_interface;
    struct UX_CONFIGURATION_STRUCT *ux_configuration_next_configuration;
    struct UX_DEVICE_STRUCT *ux_configuration_device;
} UX_CONFIGURATION;
```

- <span data-ttu-id="a80f5-431">**ux_configuration_handle**: dojście do konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="a80f5-431">**ux_configuration_handle**: Handle of the configuration.</span></span> <span data-ttu-id="a80f5-432">Jest to zazwyczaj adres wystąpienia tej struktury dla konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="a80f5-432">This is typically the address of the instance of this structure for the configuration.</span></span>
- <span data-ttu-id="a80f5-433">**ux_configuration_state**: stan konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="a80f5-433">**ux_configuration_state**: State of the configuration.</span></span>
- <span data-ttu-id="a80f5-434">**ux_configuration_descriptor**: deskryptor urządzenia USB.</span><span class="sxs-lookup"><span data-stu-id="a80f5-434">**ux_configuration_descriptor**: USB device descriptor.</span></span>
- <span data-ttu-id="a80f5-435">**ux_configuration_first_interface**: wskaźnik do pierwszego interfejsu dla tej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="a80f5-435">**ux_configuration_first_interface**: Pointer to the first interface for this configuration.</span></span>
- <span data-ttu-id="a80f5-436">**ux_configuration_next_configuration**: wskaźnik do następnej konfiguracji dla tego samego urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-436">**ux_configuration_next_configuration**: Pointer to the next configuration for the same device.</span></span>
- <span data-ttu-id="a80f5-437">**ux_configuration_device**: wskaźnik do właściciela urządzenia w tej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="a80f5-437">**ux_configuration_device**: Pointer to the device owner of this configuration.</span></span>

### <a name="interface-descriptors"></a><span data-ttu-id="a80f5-438">Deskryptory interfejsów</span><span class="sxs-lookup"><span data-stu-id="a80f5-438">Interface Descriptors</span></span>

<span data-ttu-id="a80f5-439">Deskryptor interfejsu opisuje określony interfejs w konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="a80f5-439">The interface descriptor describes a specific interface within a configuration.</span></span> <span data-ttu-id="a80f5-440">Interfejs jest funkcją logiczną na urządzeniu USB.</span><span class="sxs-lookup"><span data-stu-id="a80f5-440">An interface is a logical function within a USB device.</span></span> <span data-ttu-id="a80f5-441">Konfiguracja zawiera jeden lub więcej interfejsów, z których każdy ma zero lub więcej deskryptorów punktów końcowych opisujących unikatowy zestaw punktów końcowych w ramach konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="a80f5-441">A configuration provides one or more interfaces, each with zero or more endpoint descriptors describing a unique set of endpoints within the configuration.</span></span> <span data-ttu-id="a80f5-442">Jeśli konfiguracja obsługuje więcej niż jeden interfejs, deskryptory punktów końcowych dla określonego interfejsu są zgodne ze skryptem interfejsu w danych zwróconych przez żądanie **GET_DESCRIPTOR** dla określonej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="a80f5-442">When a configuration supports more than one interface, the endpoint descriptors for a particular interface follow the interface descriptor in the data returned by the **GET_DESCRIPTOR** request for the specified configuration.</span></span>

<span data-ttu-id="a80f5-443">Deskryptor interfejsu jest zawsze zwracany jako część deskryptora konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="a80f5-443">An interface descriptor is always returned as part of a configuration descriptor.</span></span> <span data-ttu-id="a80f5-444">Deskryptora interfejsu nie można uzyskać dostępu bezpośrednio przez żądanie GET_DESCRIPTOR.</span><span class="sxs-lookup"><span data-stu-id="a80f5-444">An interface descriptor cannot be directly access by a GET_DESCRIPTOR request.</span></span>

<span data-ttu-id="a80f5-445">Interfejs może zawierać alternatywne ustawienia, które pozwalają zmieniać punkty końcowe i/lub ich charakterystyki po skonfigurowaniu urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-445">An interface may include alternate settings that allow the endpoints and/or their characteristics to be varied after the device has been configured.</span></span> <span data-ttu-id="a80f5-446">Ustawienie domyślne dla interfejsu zawsze jest alternatywnym ustawieniem zero.</span><span class="sxs-lookup"><span data-stu-id="a80f5-446">The default setting for an interface is always alternate setting zero.</span></span> <span data-ttu-id="a80f5-447">Klasa może wybrać zmianę bieżącego ustawienia alternatywnego, aby zmienić zachowanie interfejsu i charakterystykę skojarzonych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="a80f5-447">A class can select to change the current alternate setting to change the interface behavior and the characteristics of the associated endpoints.</span></span> <span data-ttu-id="a80f5-448">Żądanie SET_INTERFACE służy do wybrania alternatywnego ustawienia lub przywrócenia ustawienia domyślnego.</span><span class="sxs-lookup"><span data-stu-id="a80f5-448">The SET_INTERFACE request is used to select an alternate setting or to return to the default setting.</span></span>

<span data-ttu-id="a80f5-449">Ustawienia alternatywne umożliwiają zróżnicowanie konfiguracji urządzenia, gdy inne interfejsy pozostają w działaniu.</span><span class="sxs-lookup"><span data-stu-id="a80f5-449">Alternate settings allow a portion of the device configuration to be varied while other interfaces remain in operation.</span></span> <span data-ttu-id="a80f5-450">Jeśli konfiguracja ma alternatywne ustawienia dla co najmniej jednego z jego interfejsów, dla każdego ustawienia są uwzględniane oddzielne deskryptory interfejsu i skojarzone z nimi punkty końcowe.</span><span class="sxs-lookup"><span data-stu-id="a80f5-450">If a configuration has alternate settings for one or more of its interfaces, a separate interface descriptor and its associated endpoints are included for each setting.</span></span>

<span data-ttu-id="a80f5-451">Jeśli konfiguracja urządzenia zawiera jeden interfejs z dwoma ustawieniami alternatywnymi, żądanie GET_DESCRIPTOR dla konfiguracji zwróci deskryptor konfiguracji, a następnie deskryptora interfejsu z polami **bInterfaceNumber** i **bAlternateSetting** ustawioną na zero, a następnie dla tego ustawienia, po którym następuje inny deskryptor interfejsu i skojarzone z nim kodery punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="a80f5-451">If a device configuration contains a single interface with two alternate settings, the GET_DESCRIPTOR request for the configuration would return the configuration descriptor, then the interface descriptor with the **bInterfaceNumber** and **bAlternateSetting** fields set to zero and then the endpoint descriptors for that setting, followed by another interface descriptor and its associated endpoint descriptors.</span></span> <span data-ttu-id="a80f5-452">W drugim polu **bInterfaceNumber** deskryptora interfejsu zostanie również ustawiona wartość zero, ale w polu **bAlternateSetting** drugiego deskryptora interfejsu zostanie ustawiona wartość 1 wskazująca, że to ustawienie alternatywne należy do pierwszego interfejsu.</span><span class="sxs-lookup"><span data-stu-id="a80f5-452">The second interface descriptor's **bInterfaceNumber** field would also be set to zero, but the **bAlternateSetting** field of the second interface descriptor would be set to 1 indicating that this alternate setting belongs to the first interface.</span></span>

<span data-ttu-id="a80f5-453">Z interfejsem nie są skojarzone żadne punkty końcowe, w takim przypadku tylko domyślny punkt końcowy kontrolki jest prawidłowy dla tego interfejsu.</span><span class="sxs-lookup"><span data-stu-id="a80f5-453">An interface may not have any endpoints associated with it, in which case only the default control endpoint is valid for that interface.</span></span>

<span data-ttu-id="a80f5-454">Ustawienia alternatywne są używane głównie do zmiany wymaganej przepustowości dla okresowych punktów końcowych skojarzonych z interfejsem.</span><span class="sxs-lookup"><span data-stu-id="a80f5-454">Alternate settings are used mainly to change the requested bandwidth for periodic endpoints associated with the interface.</span></span> <span data-ttu-id="a80f5-455">Na przykład interfejs przesyłania strumieniowego dla głośników USB powinien mieć pierwsze ustawienie alternatywne z przepustowością 0 w punkcie końcowym Isochronous.</span><span class="sxs-lookup"><span data-stu-id="a80f5-455">For example, a USB speaker streaming interface should have the first alternate setting with a 0 bandwidth demand on its isochronous endpoint.</span></span> <span data-ttu-id="a80f5-456">Inne ustawienia alternatywne mogą wybrać różne wymagania dotyczące przepustowości w zależności od częstotliwości przesyłania strumieniowego audio.</span><span class="sxs-lookup"><span data-stu-id="a80f5-456">Other alternate settings may select different bandwidth requirements depending on the audio streaming frequency.</span></span>

<span data-ttu-id="a80f5-457">Deskryptor USB dla interfejsu jest następujący:</span><span class="sxs-lookup"><span data-stu-id="a80f5-457">The USB descriptor for the interface is as follows:</span></span>

| <span data-ttu-id="a80f5-458">Przesunięcie</span><span class="sxs-lookup"><span data-stu-id="a80f5-458">Offset</span></span> | <span data-ttu-id="a80f5-459">Pole</span><span class="sxs-lookup"><span data-stu-id="a80f5-459">Field</span></span>              | <span data-ttu-id="a80f5-460">Rozmiar</span><span class="sxs-lookup"><span data-stu-id="a80f5-460">Size</span></span> | <span data-ttu-id="a80f5-461">Wartość</span><span class="sxs-lookup"><span data-stu-id="a80f5-461">Value</span></span>     | <span data-ttu-id="a80f5-462">Opis</span><span class="sxs-lookup"><span data-stu-id="a80f5-462">Descriptor</span></span>                              |
| ------ | ------------------ | ---- | --------- | --------------------------------------- |
| <span data-ttu-id="a80f5-463">0</span><span class="sxs-lookup"><span data-stu-id="a80f5-463">0</span></span>      | <span data-ttu-id="a80f5-464">bLength</span><span class="sxs-lookup"><span data-stu-id="a80f5-464">bLength</span></span>            | <span data-ttu-id="a80f5-465">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-465">1</span></span>    | <span data-ttu-id="a80f5-466">Liczba</span><span class="sxs-lookup"><span data-stu-id="a80f5-466">Number</span></span>    | <span data-ttu-id="a80f5-467">Rozmiar tego deskryptora w bajtach.</span><span class="sxs-lookup"><span data-stu-id="a80f5-467">Size of this descriptor in bytes.</span></span>       |
| <span data-ttu-id="a80f5-468">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-468">1</span></span>      | <span data-ttu-id="a80f5-469">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="a80f5-469">bDescriptorType</span></span>    | <span data-ttu-id="a80f5-470">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-470">1</span></span>    | <span data-ttu-id="a80f5-471">Stała</span><span class="sxs-lookup"><span data-stu-id="a80f5-471">Constant</span></span>  | <span data-ttu-id="a80f5-472">Typ deskryptora interfejsu</span><span class="sxs-lookup"><span data-stu-id="a80f5-472">INTERFACE Descriptor Type</span></span>               |
| <span data-ttu-id="a80f5-473">2</span><span class="sxs-lookup"><span data-stu-id="a80f5-473">2</span></span>      | <span data-ttu-id="a80f5-474">bInterfaceNumber</span><span class="sxs-lookup"><span data-stu-id="a80f5-474">bInterfaceNumber</span></span>   | <span data-ttu-id="a80f5-475">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-475">1</span></span>    | <span data-ttu-id="a80f5-476">Liczba</span><span class="sxs-lookup"><span data-stu-id="a80f5-476">Number</span></span>    | <span data-ttu-id="a80f5-477">Liczba interfejsów.</span><span class="sxs-lookup"><span data-stu-id="a80f5-477">Number of interface.</span></span> <span data-ttu-id="a80f5-478">Wartość zerowa, identyfikująca indeks w tablicy współbieżnych interfejsów obsługiwanych przez tę konfigurację.</span><span class="sxs-lookup"><span data-stu-id="a80f5-478">Zero-based value identifying the index in the array of concurrent interfaces supported by this configuration.</span></span> |
| <span data-ttu-id="a80f5-479">3</span><span class="sxs-lookup"><span data-stu-id="a80f5-479">3</span></span>      | <span data-ttu-id="a80f5-480">bAltenateSetting</span><span class="sxs-lookup"><span data-stu-id="a80f5-480">bAltenateSetting</span></span>   | <span data-ttu-id="a80f5-481">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-481">1</span></span>    | <span data-ttu-id="a80f5-482">Liczba</span><span class="sxs-lookup"><span data-stu-id="a80f5-482">Number</span></span>    | <span data-ttu-id="a80f5-483">Wartość używana do wybrania alternatywnego ustawienia dla interfejsu zidentyfikowanego w poprzednim polu.</span><span class="sxs-lookup"><span data-stu-id="a80f5-483">Value used to select alternate setting for the interface identified in the prior field.</span></span> |
| <span data-ttu-id="a80f5-484">4</span><span class="sxs-lookup"><span data-stu-id="a80f5-484">4</span></span>      | <span data-ttu-id="a80f5-485">bNumEndpoints</span><span class="sxs-lookup"><span data-stu-id="a80f5-485">bNumEndpoints</span></span>      | <span data-ttu-id="a80f5-486">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-486">1</span></span>    | <span data-ttu-id="a80f5-487">Liczba</span><span class="sxs-lookup"><span data-stu-id="a80f5-487">Number</span></span>    | <span data-ttu-id="a80f5-488">Liczba punktów końcowych używanych przez ten interfejs (z wyjątkiem punktu końcowego zero).</span><span class="sxs-lookup"><span data-stu-id="a80f5-488">Number of endpoints used by this interface (excluding endpoint zero).</span></span> <span data-ttu-id="a80f5-489">Jeśli ta wartość wynosi 0, ten interfejs używa tylko punktu końcowego zero.</span><span class="sxs-lookup"><span data-stu-id="a80f5-489">If this value is 0, this interface only uses endpoint zero.</span></span> |
| <span data-ttu-id="a80f5-490">5</span><span class="sxs-lookup"><span data-stu-id="a80f5-490">5</span></span>      | <span data-ttu-id="a80f5-491">bInterfaceClass</span><span class="sxs-lookup"><span data-stu-id="a80f5-491">bInterfaceClass</span></span>    | <span data-ttu-id="a80f5-492">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-492">1</span></span>    | <span data-ttu-id="a80f5-493">Klasa</span><span class="sxs-lookup"><span data-stu-id="a80f5-493">Class</span></span>     | <span data-ttu-id="a80f5-494">Kod klasy (przypisany przez USB)</span><span class="sxs-lookup"><span data-stu-id="a80f5-494">Class code (assigned by USB)</span></span><br /><span data-ttu-id="a80f5-495">Jeśli to pole zostanie zresetowane do wartości 0, interfejs nie należy do żadnej określonej klasy urządzeń USB.</span><span class="sxs-lookup"><span data-stu-id="a80f5-495">If this field is reset to 0, the interface does not belong to any USB specified device class.</span></span><br /><span data-ttu-id="a80f5-496">Jeśli to pole jest ustawione na wartość 0xFF, Klasa interfejsu jest specyficzna dla dostawcy.</span><span class="sxs-lookup"><span data-stu-id="a80f5-496">If this field is set to 0xFF, the interface class is vendor specific.</span></span><br /><span data-ttu-id="a80f5-497">Wszystkie inne wartości są zastrzeżone do przypisania przez USB.</span><span class="sxs-lookup"><span data-stu-id="a80f5-497">All other values are reserved for assignment by USB.</span></span> |
| <span data-ttu-id="a80f5-498">6</span><span class="sxs-lookup"><span data-stu-id="a80f5-498">6</span></span>      | <span data-ttu-id="a80f5-499">bInterfaceSubClass</span><span class="sxs-lookup"><span data-stu-id="a80f5-499">bInterfaceSubClass</span></span> | <span data-ttu-id="a80f5-500">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-500">1</span></span>    | <span data-ttu-id="a80f5-501">Podklasa</span><span class="sxs-lookup"><span data-stu-id="a80f5-501">SubClass</span></span>  | <span data-ttu-id="a80f5-502">Kod podklasy (przypisany przez USB).</span><span class="sxs-lookup"><span data-stu-id="a80f5-502">Subclass code (assigned by USB).</span></span><br /><span data-ttu-id="a80f5-503">Te kody są kwalifikowane przez wartość pola bInterfaceClass.</span><span class="sxs-lookup"><span data-stu-id="a80f5-503">These codes are qualified by the value of the bInterfaceClass field.</span></span> <span data-ttu-id="a80f5-504">Jeśli pole bInterfaceClass zostanie zresetowane do wartości 0, to pole musi również zostać zresetowane do wartości 0.</span><span class="sxs-lookup"><span data-stu-id="a80f5-504">If the bInterfaceClass field is reset to 0, this field must also be reset to 0.</span></span> <span data-ttu-id="a80f5-505">Jeśli pole bInterfaceClass nie jest ustawione na wartość 0xFF, wszystkie wartości są zastrzeżone do przypisania przez USB.</span><span class="sxs-lookup"><span data-stu-id="a80f5-505">If the bInterfaceClass field is not set to 0xFF, all values are reserved for assignment by USB.</span></span> |
| <span data-ttu-id="a80f5-506">7</span><span class="sxs-lookup"><span data-stu-id="a80f5-506">7</span></span>      | <span data-ttu-id="a80f5-507">bInterfaceProtocol</span><span class="sxs-lookup"><span data-stu-id="a80f5-507">bInterfaceProtocol</span></span> | <span data-ttu-id="a80f5-508">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-508">1</span></span>    | <span data-ttu-id="a80f5-509">Protokół</span><span class="sxs-lookup"><span data-stu-id="a80f5-509">Protocol</span></span>  | <span data-ttu-id="a80f5-510">Kod protokołu (przypisany przez USB).</span><span class="sxs-lookup"><span data-stu-id="a80f5-510">Protocol code (assigned by USB).</span></span> <span data-ttu-id="a80f5-511">Kody te są kwalifikowane przez wartość bInterfaceClass i pola bInterfaceSubClass.</span><span class="sxs-lookup"><span data-stu-id="a80f5-511">These codes are qualified by the value of the bInterfaceClass and the bInterfaceSubClass fields.</span></span> <span data-ttu-id="a80f5-512">Jeśli interfejs obsługuje żądania specyficzne dla klasy, ten kod identyfikuje protokoły używane przez urządzenie zgodnie ze specyfikacją klasy urządzenia.</span><span class="sxs-lookup"><span data-stu-id="a80f5-512">If an interface supports class-specific requests, this code identifies the protocols that the device uses as defined by the specification of the device class.</span></span><br /><span data-ttu-id="a80f5-513">W przypadku zresetowania tego pola do wartości 0 urządzenie nie korzysta z protokołu określonego dla klasy w tym interfejsie.</span><span class="sxs-lookup"><span data-stu-id="a80f5-513">If this field is reset to 0, the device does not use a class specific protocol on this interface.</span></span> <span data-ttu-id="a80f5-514">Jeśli to pole jest ustawione na wartość 0xFF, urządzenie używa protokołu określonego dla dostawcy dla tego interfejsu.</span><span class="sxs-lookup"><span data-stu-id="a80f5-514">If this field is set to 0xFF, the device uses a vendor specific protocol for this interface.</span></span> |
| <span data-ttu-id="a80f5-515">8</span><span class="sxs-lookup"><span data-stu-id="a80f5-515">8</span></span>      | <span data-ttu-id="a80f5-516">iInterface</span><span class="sxs-lookup"><span data-stu-id="a80f5-516">iInterface</span></span>         | <span data-ttu-id="a80f5-517">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-517">1</span></span>    | <span data-ttu-id="a80f5-518">Indeks</span><span class="sxs-lookup"><span data-stu-id="a80f5-518">Index</span></span>     | <span data-ttu-id="a80f5-519">Indeks deskryptora ciągu opisujący ten interfejs.</span><span class="sxs-lookup"><span data-stu-id="a80f5-519">Index of string descriptor describing this interface.</span></span> |

<span data-ttu-id="a80f5-520">USBX definiuje deskryptor interfejsu USB w następujący sposób.</span><span class="sxs-lookup"><span data-stu-id="a80f5-520">USBX defines a USB interface descriptor as follows.</span></span>

```c
typedef struct UX_INTERFACE_DESCRIPTOR_STRUCT
{
    UINT bLength;
    UINT bDescriptorType;
    UINT bInterfaceNumber;
    UINT bAlternateSetting;
    UINT bNumEndpoints;
    UINT bInterfaceClass
    UINT bInterfaceSubClass;
    UINT bInterfaceProtocol;
    UINT iInterface;
} UX_INTERFACE_DESCRIPTOR;
```

<span data-ttu-id="a80f5-521">Deskryptor interfejsu USB jest częścią kontenera interfejsu opisanego w następujący sposób.</span><span class="sxs-lookup"><span data-stu-id="a80f5-521">The USB interface descriptor is part of an interface container described as follows.</span></span>

```c
typedef struct UX_INTERFACE_STRUCT
{
    ULONG ux_interface_handle;
    ULONG ux_interface_state;
    ULONG ux_interface_current_alternate_setting;
    struct UX_INTERFACE_DESCRIPTOR_STRUCT ux_interface_descriptor;
    struct UX_HOST_CLASS_STRUCT    *ux_interface_class;
    VOID    *ux_interface_class_instance;
    struct UX_ENDPOINT_STRUCT    *ux_interface_first_endpoint;
    struct UX_INTERFACE_STRUCT    *ux_interface_next_interface;
    struct UX_CONFIGURATION_STRUCT    *ux_interface_configuration;
} UX_INTERFACE;
```

- <span data-ttu-id="a80f5-522">**ux_interface_handle**: uchwyt interfejsu.</span><span class="sxs-lookup"><span data-stu-id="a80f5-522">**ux_interface_handle**: Handle of the interface.</span></span> <span data-ttu-id="a80f5-523">Jest to zazwyczaj adres wystąpienia tej struktury dla interfejsu.</span><span class="sxs-lookup"><span data-stu-id="a80f5-523">This is typically the address of the instance of this structure for the interface.</span></span>
- <span data-ttu-id="a80f5-524">**ux_interface_state**: stan interfejsu.</span><span class="sxs-lookup"><span data-stu-id="a80f5-524">**ux_interface_state**: State of the interface.</span></span>
- <span data-ttu-id="a80f5-525">**ux_interface_descriptor**: deskryptor interfejsu USB.</span><span class="sxs-lookup"><span data-stu-id="a80f5-525">**ux_interface_descriptor**: USB interface descriptor.</span></span>
- <span data-ttu-id="a80f5-526">**ux_interface_class**: wskaźnik do typu klasy, który jest właścicielem tego interfejsu.</span><span class="sxs-lookup"><span data-stu-id="a80f5-526">**ux_interface_class**: Pointer to the class type that owns this interface.</span></span>
- <span data-ttu-id="a80f5-527">**ux_interface_class_instance**: wskaźnik do wystąpienia klasy, która jest właścicielem tego interfejsu.</span><span class="sxs-lookup"><span data-stu-id="a80f5-527">**ux_interface_class_instance**: Pointer to the instance of the class that owns this interface.</span></span>
- <span data-ttu-id="a80f5-528">**ux_interface_first_endpoint**: wskaźnik do pierwszego punktu końcowego zarejestrowanego w tym interfejsie.</span><span class="sxs-lookup"><span data-stu-id="a80f5-528">**ux_interface_first_endpoint**: Pointer to the first endpoint registered with this interface.</span></span>
- <span data-ttu-id="a80f5-529">**ux_interface_next_interface**: wskaźnik do następnego interfejsu skojarzonego z konfiguracją.</span><span class="sxs-lookup"><span data-stu-id="a80f5-529">**ux_interface_next_interface**: Pointer to the next interface associated with the configuration.</span></span>
- <span data-ttu-id="a80f5-530">**ux_interface_configuration**: wskaźnik do właściciela konfiguracji tego interfejsu.</span><span class="sxs-lookup"><span data-stu-id="a80f5-530">**ux_interface_configuration**: Pointer to the configuration owner of this interface.</span></span>

### <a name="endpoint-descriptors"></a><span data-ttu-id="a80f5-531">Deskryptory punktów końcowych</span><span class="sxs-lookup"><span data-stu-id="a80f5-531">Endpoint Descriptors</span></span>

<span data-ttu-id="a80f5-532">Każdy punkt końcowy skojarzony z interfejsem ma swój własny deskryptor punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="a80f5-532">Each endpoint associated with an interface has its own endpoint descriptor.</span></span> <span data-ttu-id="a80f5-533">Ten deskryptor zawiera informacje wymagane przez stos hosta do określenia wymagań dotyczących przepustowości dla każdego punktu końcowego, maksymalnego ładunku skojarzonego z punktem końcowym, jego okresowości i kierunku.</span><span class="sxs-lookup"><span data-stu-id="a80f5-533">This descriptor contains the information required by the host stack to determine the bandwidth requirements of each endpoint, the maximum payload associated with the endpoint, its periodicity, and its direction.</span></span> <span data-ttu-id="a80f5-534">Deskryptor punktu końcowego jest zawsze zwracany przez GET_DESCRIPTOR polecenie dla konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="a80f5-534">An endpoint descriptor is always returned by a GET_DESCRIPTOR command for the configuration.</span></span>

<span data-ttu-id="a80f5-535">Domyślny punkt końcowy sterowania skojarzony z deskryptorem urządzenia nie jest liczony jako część punktów końcowych skojarzonych z interfejsem i w związku z tym nie są zwracane w tym deskryptorze.</span><span class="sxs-lookup"><span data-stu-id="a80f5-535">The default control endpoint associated with the device descriptor is not counted as part of the endpoint(s) associated with the interface and therefore not returned in this descriptor.</span></span>

<span data-ttu-id="a80f5-536">Gdy oprogramowanie hosta żąda zmiany ustawienia alternatywnego dla interfejsu, wszystkie skojarzone punkty końcowe i ich zasoby USB są modyfikowane zgodnie z nowym ustawieniem alternatywnym.</span><span class="sxs-lookup"><span data-stu-id="a80f5-536">When the host software requests a change of the alternate setting for an interface, all the associated endpoints and their USB resources are modified according to the new alternate setting.</span></span>

<span data-ttu-id="a80f5-537">Poza domyślnymi punktami końcowymi kontrolek punkty końcowe nie mogą być współużytkowane między interfejsami.</span><span class="sxs-lookup"><span data-stu-id="a80f5-537">Except for the default control endpoints, endpoints cannot be share between interfaces.</span></span>

| <span data-ttu-id="a80f5-538">Przesunięcie</span><span class="sxs-lookup"><span data-stu-id="a80f5-538">Offset</span></span> | <span data-ttu-id="a80f5-539">Pole</span><span class="sxs-lookup"><span data-stu-id="a80f5-539">Field</span></span>            | <span data-ttu-id="a80f5-540">Rozmiar</span><span class="sxs-lookup"><span data-stu-id="a80f5-540">Size</span></span> | <span data-ttu-id="a80f5-541">Wartość</span><span class="sxs-lookup"><span data-stu-id="a80f5-541">Value</span></span>    | <span data-ttu-id="a80f5-542">Opis</span><span class="sxs-lookup"><span data-stu-id="a80f5-542">Description</span></span>                       |
| ------ | ---------------- | ---- | -------- | --------------------------------- |
| <span data-ttu-id="a80f5-543">0</span><span class="sxs-lookup"><span data-stu-id="a80f5-543">0</span></span>      | <span data-ttu-id="a80f5-544">bLength</span><span class="sxs-lookup"><span data-stu-id="a80f5-544">bLength</span></span>          | <span data-ttu-id="a80f5-545">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-545">1</span></span>    | <span data-ttu-id="a80f5-546">Liczba</span><span class="sxs-lookup"><span data-stu-id="a80f5-546">Number</span></span>   | <span data-ttu-id="a80f5-547">Rozmiar tego deskryptora w bajtach.</span><span class="sxs-lookup"><span data-stu-id="a80f5-547">Size of this descriptor in bytes.</span></span> |
| <span data-ttu-id="a80f5-548">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-548">1</span></span>      | <span data-ttu-id="a80f5-549">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="a80f5-549">bDescriptorType</span></span>  | <span data-ttu-id="a80f5-550">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-550">1</span></span>    | <span data-ttu-id="a80f5-551">Stała</span><span class="sxs-lookup"><span data-stu-id="a80f5-551">Constant</span></span> | <span data-ttu-id="a80f5-552">Typ deskryptora punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="a80f5-552">ENDPOINT Descriptor Type.</span></span> |
| <span data-ttu-id="a80f5-553">2</span><span class="sxs-lookup"><span data-stu-id="a80f5-553">2</span></span>      | <span data-ttu-id="a80f5-554">bEndpointAddress</span><span class="sxs-lookup"><span data-stu-id="a80f5-554">bEndpointAddress</span></span> | <span data-ttu-id="a80f5-555">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-555">1</span></span>    | <span data-ttu-id="a80f5-556">Punkt końcowy</span><span class="sxs-lookup"><span data-stu-id="a80f5-556">Endpoint</span></span> | <span data-ttu-id="a80f5-557">Adres punktu końcowego na urządzeniu USB opisany przez ten deskryptor.</span><span class="sxs-lookup"><span data-stu-id="a80f5-557">The address of the endpoint on the USB device described by this descriptor.</span></span> <span data-ttu-id="a80f5-558">Adres jest zakodowany w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="a80f5-558">The address is encoded as follows:</span></span><br /><span data-ttu-id="a80f5-559">Bit 3... 0: numer punktu końcowego</span><span class="sxs-lookup"><span data-stu-id="a80f5-559">Bit 3...0: The endpoint number</span></span><br /><span data-ttu-id="a80f5-560">Bit 6... 4: zarezerwowany, Reset do zera</span><span class="sxs-lookup"><span data-stu-id="a80f5-560">Bit 6...4: Reserved, reset to zero</span></span><br /><span data-ttu-id="a80f5-561">Bit 7: kierunek ignorowany dla punktów końcowych kontrolki</span><span class="sxs-lookup"><span data-stu-id="a80f5-561">Bit 7: Direction, ignored for control endpoints</span></span><br /><span data-ttu-id="a80f5-562">0 = punkt końcowy OUT</span><span class="sxs-lookup"><span data-stu-id="a80f5-562">0 = OUT endpoint</span></span><br /><span data-ttu-id="a80f5-563">1 = w punkcie końcowym</span><span class="sxs-lookup"><span data-stu-id="a80f5-563">1 = IN endpoint</span></span> |
| <span data-ttu-id="a80f5-564">3</span><span class="sxs-lookup"><span data-stu-id="a80f5-564">3</span></span>      | <span data-ttu-id="a80f5-565">bmAttributes</span><span class="sxs-lookup"><span data-stu-id="a80f5-565">bmAttributes</span></span>     | <span data-ttu-id="a80f5-566">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-566">1</span></span>    | <span data-ttu-id="a80f5-567">Mapy</span><span class="sxs-lookup"><span data-stu-id="a80f5-567">Bitmap</span></span>   | <span data-ttu-id="a80f5-568">W tym polu opisano atrybuty punktu końcowego, gdy jest on konfigurowany przy użyciu pola **bConfigurationValue** .</span><span class="sxs-lookup"><span data-stu-id="a80f5-568">This field describes the endpoint's attributes when it is configured using the **bConfigurationValue** field.</span></span> <span data-ttu-id="a80f5-569">Bity 1.. 0: typ transferu</span><span class="sxs-lookup"><span data-stu-id="a80f5-569">Bits 1..0: Transfer Type</span></span><br /><span data-ttu-id="a80f5-570">00 = kontrolka</span><span class="sxs-lookup"><span data-stu-id="a80f5-570">00 = Control</span></span><br /><span data-ttu-id="a80f5-571">01 = Isochronous</span><span class="sxs-lookup"><span data-stu-id="a80f5-571">01 = Isochronous</span></span><br /><span data-ttu-id="a80f5-572">10 = bulk</span><span class="sxs-lookup"><span data-stu-id="a80f5-572">10 = Bulk</span></span><br /><span data-ttu-id="a80f5-573">11 = przerwanie</span><span class="sxs-lookup"><span data-stu-id="a80f5-573">11 = Interrupt</span></span><br /><span data-ttu-id="a80f5-574">Jeśli nie jest punktem końcowym Isochronous, bity 5.. 2 są zarezerwowane i muszą mieć wartość zero.</span><span class="sxs-lookup"><span data-stu-id="a80f5-574">If not an isochronous endpoint, bits 5..2 are reserved and must be set to zero.</span></span> <span data-ttu-id="a80f5-575">Jeśli Isochronous, są one zdefiniowane w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="a80f5-575">If isochronous, they are defined as follows:</span></span><br /><span data-ttu-id="a80f5-576">Bity 3.. 2: typ synchronizacji</span><span class="sxs-lookup"><span data-stu-id="a80f5-576">Bits 3..2: Synchronization Type</span></span><br /><span data-ttu-id="a80f5-577">00 = brak synchronizacji</span><span class="sxs-lookup"><span data-stu-id="a80f5-577">00 = No Synchronization</span></span><br /><span data-ttu-id="a80f5-578">01 = asynchroniczny</span><span class="sxs-lookup"><span data-stu-id="a80f5-578">01 = Asynchronous</span></span><br /><span data-ttu-id="a80f5-579">10 = adaptacyjne</span><span class="sxs-lookup"><span data-stu-id="a80f5-579">10 = Adaptive</span></span><br /><span data-ttu-id="a80f5-580">11 = synchroniczne</span><span class="sxs-lookup"><span data-stu-id="a80f5-580">11 = Synchronous</span></span><br /><span data-ttu-id="a80f5-581">Bity 5.. 4: typ użycia</span><span class="sxs-lookup"><span data-stu-id="a80f5-581">Bits 5..4: Usage Type</span></span><br /><span data-ttu-id="a80f5-582">00 = punkt końcowy danych</span><span class="sxs-lookup"><span data-stu-id="a80f5-582">00 = Data endpoint</span></span><br /><span data-ttu-id="a80f5-583">01 = punkt końcowy opinii</span><span class="sxs-lookup"><span data-stu-id="a80f5-583">01 = Feedback endpoint</span></span><br /><span data-ttu-id="a80f5-584">10 = niejawny punkt końcowy danych opinii</span><span class="sxs-lookup"><span data-stu-id="a80f5-584">10 = Implicit feedback data endpoint</span></span><br /><span data-ttu-id="a80f5-585">11 = zarezerwowane</span><span class="sxs-lookup"><span data-stu-id="a80f5-585">11 = Reserved</span></span> |
| <span data-ttu-id="a80f5-586">4</span><span class="sxs-lookup"><span data-stu-id="a80f5-586">4</span></span>      | <span data-ttu-id="a80f5-587">wMaxPacketSize</span><span class="sxs-lookup"><span data-stu-id="a80f5-587">wMaxPacketSize</span></span>   | <span data-ttu-id="a80f5-588">2</span><span class="sxs-lookup"><span data-stu-id="a80f5-588">2</span></span>    | <span data-ttu-id="a80f5-589">Liczba</span><span class="sxs-lookup"><span data-stu-id="a80f5-589">Number</span></span>   | <span data-ttu-id="a80f5-590">Maksymalny rozmiar pakietu, który ten punkt końcowy może wysłać lub odebrać, gdy ta konfiguracja jest wybrana.</span><span class="sxs-lookup"><span data-stu-id="a80f5-590">Maximum packet size this endpoint is capable of sending or receiving when this configuration is selected.</span></span><br /><span data-ttu-id="a80f5-591">W przypadku punktów końcowych Isochronous ta wartość jest używana w celu zarezerwowania czasu magistrali zgodnie z harmonogramem, który jest wymagany dla ładunków danych ramek na (mikro).</span><span class="sxs-lookup"><span data-stu-id="a80f5-591">For isochronous endpoints, this value is used to reserve the bus time in the schedule, required for the per-(micro)frame data payloads.</span></span> <span data-ttu-id="a80f5-592">Potok może, na bieżąco, faktycznie używać mniejszej przepustowości niż zarezerwowana.</span><span class="sxs-lookup"><span data-stu-id="a80f5-592">The pipe may, on an ongoing basis, actually use less bandwidth than that reserved.</span></span> <span data-ttu-id="a80f5-593">Urządzenie zgłasza, w razie potrzeby, rzeczywistą przepustowość używaną przez normalne mechanizmy, które nie są zdefiniowane przez USB.</span><span class="sxs-lookup"><span data-stu-id="a80f5-593">The device reports, if necessary, the actual bandwidth used via its normal, non-USB defined mechanisms.</span></span><br /><span data-ttu-id="a80f5-594">Dla wszystkich punktów końcowych usługa BITS 10.0 określa maksymalny rozmiar pakietu (w bajtach).</span><span class="sxs-lookup"><span data-stu-id="a80f5-594">For all endpoints, bits 10..0 specify the maximum packet size (in bytes).</span></span><br /><span data-ttu-id="a80f5-595">Dla szybkich punktów końcowych Isochronous i przerwań:</span><span class="sxs-lookup"><span data-stu-id="a80f5-595">For high-speed isochronous and interrupt endpoints:</span></span><br /><span data-ttu-id="a80f5-596">Bity 12.. 11 Określ liczbę dodatkowych możliwości transakcji na mikroramkę: 00 = Brak (1 transakcja na mikroramkę)</span><span class="sxs-lookup"><span data-stu-id="a80f5-596">Bits 12..11 specify the number of additional transaction opportunities per microframe: 00 = None (1 transaction per microframe)</span></span><br /><span data-ttu-id="a80f5-597">01 = 1 dodatkowe (2 na mikroramkę)</span><span class="sxs-lookup"><span data-stu-id="a80f5-597">01 = 1 additional (2 per microframe)</span></span><br /><span data-ttu-id="a80f5-598">10 = 2 dodatkowe (3 na mikroramkę)</span><span class="sxs-lookup"><span data-stu-id="a80f5-598">10 = 2 additional (3 per microframe)</span></span><br /><span data-ttu-id="a80f5-599">11 = zarezerwowane</span><span class="sxs-lookup"><span data-stu-id="a80f5-599">11 = Reserved</span></span><br /><span data-ttu-id="a80f5-600">Bity 15.13 są zarezerwowane i muszą mieć wartość zero.</span><span class="sxs-lookup"><span data-stu-id="a80f5-600">Bits 15..13 are reserved and must be set to zero.</span></span> |
| <span data-ttu-id="a80f5-601">6</span><span class="sxs-lookup"><span data-stu-id="a80f5-601">6</span></span>      | <span data-ttu-id="a80f5-602">bInterval</span><span class="sxs-lookup"><span data-stu-id="a80f5-602">bInterval</span></span>        | <span data-ttu-id="a80f5-603">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-603">1</span></span>     | <span data-ttu-id="a80f5-604">Liczba</span><span class="sxs-lookup"><span data-stu-id="a80f5-604">Number</span></span>   | <span data-ttu-id="a80f5-605">Interwał liczby punktów końcowych sondowania dla transferów danych.</span><span class="sxs-lookup"><span data-stu-id="a80f5-605">Number interval for polling endpoint for data transfers.</span></span><br /><span data-ttu-id="a80f5-606">Wyrażony w klatkach lub mikroramkach w zależności od szybkości działania urządzenia (tj. 1 milisekund lub 125 s).</span><span class="sxs-lookup"><span data-stu-id="a80f5-606">Expressed in frames or microframes depending on the device operating speed (i.e., either 1 millisecond or 125 µs units).</span></span><br /><span data-ttu-id="a80f5-607">W przypadku punktów końcowych pełnej/High-Speed Isochronous ta wartość musi należeć do zakresu od 1 do 16.</span><span class="sxs-lookup"><span data-stu-id="a80f5-607">For full-/high-speed isochronous endpoints, this value must be in the range from 1 to 16.</span></span> <span data-ttu-id="a80f5-608">**BInterval** jest używany jako wykładnik dla wartości 2bInterval-1; np. **bInterval** 4 oznacza okres 8 (24-1).</span><span class="sxs-lookup"><span data-stu-id="a80f5-608">The **bInterval** is used as the exponent for a 2bInterval-1 value; e.g., a **bInterval** 4 means a period of 8 (24-1).</span></span><br /><span data-ttu-id="a80f5-609">W przypadku punktów końcowych przerwań/Low-Speed wartość tego pola może wynosić od 1 do 255.</span><span class="sxs-lookup"><span data-stu-id="a80f5-609">For full-/low-speed interrupt endpoints, the value of this field may be from 1 to 255.</span></span><br /><span data-ttu-id="a80f5-610">Dla punktów końcowych przerwań o dużej szybkości **bInterval** jest używany jako wykładnik dla wartości 2bInterval-1; np. **bInterval** 4 oznacza okres 8 (24-1).</span><span class="sxs-lookup"><span data-stu-id="a80f5-610">For high-speed interrupt endpoints, the **bInterval** is used as the exponent for a 2bInterval-1 value; e.g., a **bInterval** 4 means a period of 8 (24-1).</span></span> <span data-ttu-id="a80f5-611">Ta wartość musi należeć do przemieścić od 1 do 16.</span><span class="sxs-lookup"><span data-stu-id="a80f5-611">This value must be from 1 to 16.</span></span><br /><span data-ttu-id="a80f5-612">W przypadku przepływów końcowych o dużej szybkości zbiorczej/kontroli **bInterval** określa maksymalną nak punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="a80f5-612">For high-speed bulk/control OUT endpoints, the **bInterval** specify the maximum NAK rate of the endpoint.</span></span> <span data-ttu-id="a80f5-613">Wartość 0 oznacza, że punkt końcowy nigdy nie NAKs.</span><span class="sxs-lookup"><span data-stu-id="a80f5-613">A value of 0 indicates the endpoint never NAKs.</span></span> <span data-ttu-id="a80f5-614">Inne wartości wskazują maksymalnie jedną NAK każdego **bInterval** mikroramek.</span><span class="sxs-lookup"><span data-stu-id="a80f5-614">Other values indicate at most one NAK each **bInterval** of microframes.</span></span><br /><span data-ttu-id="a80f5-615">Ta wartość musi należeć do zakresu od 0 do 255.</span><span class="sxs-lookup"><span data-stu-id="a80f5-615">This value must be in the range from 0 to 255.</span></span> |

<span data-ttu-id="a80f5-616">USBX definiuje deskryptor punktu końcowego USB w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="a80f5-616">USBX defines a USB endpoint descriptor as follows:</span></span>

```c
typedef struct UX_ENDPOINT_DESCRIPTOR_STRUCT
{
    UINT bLength;
    UINT bDescriptorType;
    UINT bEndpointAddress;
    UINT bmAttributes;
    USHORT wMaxPacketSize;
    UINT bInterval;
} UX_ENDPOINT_DESCRIPTOR;
```

<span data-ttu-id="a80f5-617">Deskryptor punktu końcowego USB jest częścią kontenera punktów końcowych, który został opisany w następujący sposób.</span><span class="sxs-lookup"><span data-stu-id="a80f5-617">The USB endpoint descriptor is part of an endpoint container, which is described as follows.</span></span>

```c
typedef struct UX_ENDPOINT_STRUCT {
    ULONG    ux_endpoint_handle;
    ULONG    ux_endpoint_state;
    VOID    *ux_endpoint_ed;
    struct UX_ENDPOINT_DESCRIPTOR_STRUCT    ux_endpoint_descriptor;
    struct UX_ENDPOINT_STRUCT    *ux_endpoint_next_endpoint;
    struct UX_INTERFACE_STRUCT    *ux_endpoint_interface;
    struct UX_DEVICE_STRUCT    *ux_endpoint_device;
    struct UX_TRANSFER REQUEST_STRUCT    ux_endpoint_transfer request;
} UX_ENDPOINT;

```

- <span data-ttu-id="a80f5-618">**ux_endpoint_handle**: uchwyt punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="a80f5-618">**ux_endpoint_handle**: Handle of the endpoint.</span></span> <span data-ttu-id="a80f5-619">Jest to zazwyczaj adres wystąpienia tej struktury dla punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="a80f5-619">This is typically the address of the instance of this structure for the endpoint.</span></span>
- <span data-ttu-id="a80f5-620">**ux_endpoint_state**: stan punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="a80f5-620">**ux_endpoint_state**: State of the endpoint.</span></span>
- <span data-ttu-id="a80f5-621">**ux_endpoint_ed**: wskaźnik do fizycznego punktu końcowego w warstwie kontrolera hosta.</span><span class="sxs-lookup"><span data-stu-id="a80f5-621">**ux_endpoint_ed**: Pointer to the physical endpoint at the host controller layer.</span></span>
- <span data-ttu-id="a80f5-622">**ux_endpoint_descriptor**: deskryptor punktu końcowego USB.</span><span class="sxs-lookup"><span data-stu-id="a80f5-622">**ux_endpoint_descriptor**: USB endpoint descriptor.</span></span>
- <span data-ttu-id="a80f5-623">**ux_endpoint_next_endpoint**: wskaźnik do następnego punktu końcowego, który należy do tego samego interfejsu.</span><span class="sxs-lookup"><span data-stu-id="a80f5-623">**ux_endpoint_next_endpoint**: Pointer to the next endpoint that belongs to the same interface.</span></span>
- <span data-ttu-id="a80f5-624">**ux_endpoint_interface**: wskaźnik do interfejsu, który jest właścicielem tego interfejsu punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="a80f5-624">**ux_endpoint_interface**: Pointer to the interface that owns this endpoint interface.</span></span>
- <span data-ttu-id="a80f5-625">**ux_endpoint_device**: wskaźnik do kontenera urządzeń nadrzędnych.</span><span class="sxs-lookup"><span data-stu-id="a80f5-625">**ux_endpoint_device**: Pointer to the parent device container.</span></span>
- <span data-ttu-id="a80f5-626">**żądanie ux_endpoint_transfer**: żądanie transferu USB używane do wysyłania/odbierania danych z urządzenia na urządzenie.</span><span class="sxs-lookup"><span data-stu-id="a80f5-626">**ux_endpoint_transfer request**: USB transfer request used to send/receive data from to/from the device.</span></span>

### <a name="string-descriptors"></a><span data-ttu-id="a80f5-627">Deskryptory ciągów</span><span class="sxs-lookup"><span data-stu-id="a80f5-627">String descriptors</span></span>

<span data-ttu-id="a80f5-628">Deskryptory ciągów są opcjonalne.</span><span class="sxs-lookup"><span data-stu-id="a80f5-628">String descriptors are optional.</span></span> <span data-ttu-id="a80f5-629">Jeśli urządzenie nie obsługuje deskryptorów ciągów, wszystkie odwołania do deskryptorów ciągów w obrębie urządzeń, konfiguracji i deskryptorów interfejsów muszą zostać zresetowane do zera.</span><span class="sxs-lookup"><span data-stu-id="a80f5-629">If a device does not support string descriptors, all references to string descriptors within device, configuration, and interface descriptors must be reset to zero.</span></span>

<span data-ttu-id="a80f5-630">Deskryptory ciągów używają kodowania UNICODE, dzięki czemu można obsługiwać kilka zestawów znaków.</span><span class="sxs-lookup"><span data-stu-id="a80f5-630">String descriptors use UNICODE encoding, thus allowing the support for several character sets.</span></span> <span data-ttu-id="a80f5-631">Ciągi na urządzeniu USB mogą obsługiwać wiele języków.</span><span class="sxs-lookup"><span data-stu-id="a80f5-631">The strings in a USB device may support multiple languages.</span></span> <span data-ttu-id="a80f5-632">Podczas żądania deskryptora ciągu Obiekt żądający określa żądany język przy użyciu identyfikatora języka zdefiniowanego przez port USB.</span><span class="sxs-lookup"><span data-stu-id="a80f5-632">When requesting a string descriptor, the requester specifies the desired language using a language ID defined by the USB-IF.</span></span> <span data-ttu-id="a80f5-633">Listę obecnie zdefiniowanych LANGIDs USB można znaleźć w dodatku USBX??.</span><span class="sxs-lookup"><span data-stu-id="a80f5-633">The list of currently defined USB LANGIDs can be found in the USBX appendix ??.</span></span>
<span data-ttu-id="a80f5-634">Indeks ciągu zero dla wszystkich języków zwraca deskryptor ciągu, który zawiera tablicę kodów LANGID dwubajtowych obsługiwanych przez urządzenie.</span><span class="sxs-lookup"><span data-stu-id="a80f5-634">String index zero for all languages returns a string descriptor that contains an array of two-byte LANGID codes supported by the device.</span></span> <span data-ttu-id="a80f5-635">Należy zauważyć, że ciąg UNICODE nie jest zakończony zerem.</span><span class="sxs-lookup"><span data-stu-id="a80f5-635">It should be noted that the UNICODE string is not 0 terminated.</span></span> <span data-ttu-id="a80f5-636">Zamiast tego rozmiar tablicy ciągów jest obliczany przez odjęcie dwóch od rozmiaru tablicy zawartej w pierwszym bajcie deskryptora.</span><span class="sxs-lookup"><span data-stu-id="a80f5-636">Instead, the size of the string array is computed by subtracting two from the size of the array contained in the first byte of the descriptor.</span></span>

<span data-ttu-id="a80f5-637">Deskryptor ciągu USB 0 jest zakodowany w następujący sposób.</span><span class="sxs-lookup"><span data-stu-id="a80f5-637">The USB string descriptor 0 is encoded as follows.</span></span>

| <span data-ttu-id="a80f5-638">Przesunięcie</span><span class="sxs-lookup"><span data-stu-id="a80f5-638">Offset</span></span> | <span data-ttu-id="a80f5-639">Pole</span><span class="sxs-lookup"><span data-stu-id="a80f5-639">Field</span></span>           | <span data-ttu-id="a80f5-640">Rozmiar</span><span class="sxs-lookup"><span data-stu-id="a80f5-640">Size</span></span> | <span data-ttu-id="a80f5-641">Wartość</span><span class="sxs-lookup"><span data-stu-id="a80f5-641">Value</span></span>    | <span data-ttu-id="a80f5-642">Opis</span><span class="sxs-lookup"><span data-stu-id="a80f5-642">Description</span></span>                      |
| ------ | --------------- | ---- | -------- | -------------------------------- |
| <span data-ttu-id="a80f5-643">0</span><span class="sxs-lookup"><span data-stu-id="a80f5-643">0</span></span>      | <span data-ttu-id="a80f5-644">bLength</span><span class="sxs-lookup"><span data-stu-id="a80f5-644">bLength</span></span>         | <span data-ttu-id="a80f5-645">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-645">1</span></span>    | <span data-ttu-id="a80f5-646">N + 2</span><span class="sxs-lookup"><span data-stu-id="a80f5-646">N+2</span></span>      | <span data-ttu-id="a80f5-647">Rozmiar tego deskryptora w bajtach</span><span class="sxs-lookup"><span data-stu-id="a80f5-647">Size of this descriptor in bytes</span></span> |
| <span data-ttu-id="a80f5-648">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-648">1</span></span>      | <span data-ttu-id="a80f5-649">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="a80f5-649">bDescriptorType</span></span> | <span data-ttu-id="a80f5-650">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-650">1</span></span>    | <span data-ttu-id="a80f5-651">Stała</span><span class="sxs-lookup"><span data-stu-id="a80f5-651">Constant</span></span> | <span data-ttu-id="a80f5-652">Typ deskryptora ciągu</span><span class="sxs-lookup"><span data-stu-id="a80f5-652">STRING Descriptor Type</span></span>           |
| <span data-ttu-id="a80f5-653">2</span><span class="sxs-lookup"><span data-stu-id="a80f5-653">2</span></span>      | <span data-ttu-id="a80f5-654">wLANGID [0]</span><span class="sxs-lookup"><span data-stu-id="a80f5-654">wLANGID[0]</span></span>      | <span data-ttu-id="a80f5-655">2</span><span class="sxs-lookup"><span data-stu-id="a80f5-655">2</span></span>    | <span data-ttu-id="a80f5-656">Liczba</span><span class="sxs-lookup"><span data-stu-id="a80f5-656">Number</span></span>   | <span data-ttu-id="a80f5-657">Kod LANGID 0</span><span class="sxs-lookup"><span data-stu-id="a80f5-657">LANGID code 0</span></span>                    |
| <span data-ttu-id="a80f5-658">...</span><span class="sxs-lookup"><span data-stu-id="a80f5-658">...</span></span>    | <span data-ttu-id="a80f5-659">...]</span><span class="sxs-lookup"><span data-stu-id="a80f5-659">...]</span></span>            | <span data-ttu-id="a80f5-660">...</span><span class="sxs-lookup"><span data-stu-id="a80f5-660">...</span></span>  | <span data-ttu-id="a80f5-661">...</span><span class="sxs-lookup"><span data-stu-id="a80f5-661">...</span></span>      | <span data-ttu-id="a80f5-662">...</span><span class="sxs-lookup"><span data-stu-id="a80f5-662">...</span></span>                              |
| <span data-ttu-id="a80f5-663">N</span><span class="sxs-lookup"><span data-stu-id="a80f5-663">N</span></span>      | <span data-ttu-id="a80f5-664">wLANGID [n]</span><span class="sxs-lookup"><span data-stu-id="a80f5-664">wLANGID[n]</span></span>      | <span data-ttu-id="a80f5-665">2</span><span class="sxs-lookup"><span data-stu-id="a80f5-665">2</span></span>    | <span data-ttu-id="a80f5-666">Liczba</span><span class="sxs-lookup"><span data-stu-id="a80f5-666">Number</span></span>   | <span data-ttu-id="a80f5-667">Kod LANGID n</span><span class="sxs-lookup"><span data-stu-id="a80f5-667">LANGID code n</span></span>                    |

<span data-ttu-id="a80f5-668">Inne deskryptory ciągu USB są kodowane w następujący sposób.</span><span class="sxs-lookup"><span data-stu-id="a80f5-668">Other USB string descriptors are encoded as follows.</span></span>

| <span data-ttu-id="a80f5-669">Przesunięcie</span><span class="sxs-lookup"><span data-stu-id="a80f5-669">Offset</span></span> | <span data-ttu-id="a80f5-670">Pole</span><span class="sxs-lookup"><span data-stu-id="a80f5-670">Field</span></span>           | <span data-ttu-id="a80f5-671">Rozmiar</span><span class="sxs-lookup"><span data-stu-id="a80f5-671">Size</span></span> | <span data-ttu-id="a80f5-672">Wartość</span><span class="sxs-lookup"><span data-stu-id="a80f5-672">Value</span></span>    | <span data-ttu-id="a80f5-673">Opis</span><span class="sxs-lookup"><span data-stu-id="a80f5-673">Description</span></span>                      |
| ------ | --------------- | ---- | -------- | -------------------------------- |
| <span data-ttu-id="a80f5-674">0</span><span class="sxs-lookup"><span data-stu-id="a80f5-674">0</span></span>      | <span data-ttu-id="a80f5-675">bLength</span><span class="sxs-lookup"><span data-stu-id="a80f5-675">bLength</span></span>         | <span data-ttu-id="a80f5-676">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-676">1</span></span>    | <span data-ttu-id="a80f5-677">Liczba</span><span class="sxs-lookup"><span data-stu-id="a80f5-677">Number</span></span>   | <span data-ttu-id="a80f5-678">Rozmiar tego deskryptora w bajtach</span><span class="sxs-lookup"><span data-stu-id="a80f5-678">Size of this descriptor in bytes</span></span> |
| <span data-ttu-id="a80f5-679">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-679">1</span></span>      | <span data-ttu-id="a80f5-680">bDescriptorType</span><span class="sxs-lookup"><span data-stu-id="a80f5-680">bDescriptorType</span></span> | <span data-ttu-id="a80f5-681">1</span><span class="sxs-lookup"><span data-stu-id="a80f5-681">1</span></span>    | <span data-ttu-id="a80f5-682">Stała</span><span class="sxs-lookup"><span data-stu-id="a80f5-682">Constant</span></span> | <span data-ttu-id="a80f5-683">Typ deskryptora ciągu</span><span class="sxs-lookup"><span data-stu-id="a80f5-683">STRING Descriptor Type</span></span>           |
| <span data-ttu-id="a80f5-684">2</span><span class="sxs-lookup"><span data-stu-id="a80f5-684">2</span></span>      | <span data-ttu-id="a80f5-685">bStre</span><span class="sxs-lookup"><span data-stu-id="a80f5-685">bString</span></span>         | <span data-ttu-id="a80f5-686">n</span><span class="sxs-lookup"><span data-stu-id="a80f5-686">n</span></span>    | <span data-ttu-id="a80f5-687">Liczba</span><span class="sxs-lookup"><span data-stu-id="a80f5-687">Number</span></span>   | <span data-ttu-id="a80f5-688">Ciąg zakodowany w formacie UNICODE</span><span class="sxs-lookup"><span data-stu-id="a80f5-688">UNICODE encoded string</span></span>           |

<span data-ttu-id="a80f5-689">USBX definiuje deskryptor ciągu USB o wartości innej niż zero w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="a80f5-689">USBX defines a non-zero length USB string descriptor as follows:</span></span>

```c
typedef struct UX_STRING_DESCRIPTOR_STRUCT
{
    UINT bLength;
    UINT bDescriptorType;
    USHORT bString[1];
} UX_STRING_DESCRIPTOR;
```

### <a name="functional-descriptors"></a><span data-ttu-id="a80f5-690">Deskryptory funkcjonalne</span><span class="sxs-lookup"><span data-stu-id="a80f5-690">Functional Descriptors</span></span>

<span data-ttu-id="a80f5-691">Deskryptory funkcjonalne są również znane jako deskryptory charakterystyczne dla klasy.</span><span class="sxs-lookup"><span data-stu-id="a80f5-691">Functional descriptors are also known as class-specific descriptors.</span></span> <span data-ttu-id="a80f5-692">Zwykle wykorzystują one te same podstawowe struktury jako ogólne deskryptory i umożliwiają udostępnienie dodatkowych informacji dla klasy.</span><span class="sxs-lookup"><span data-stu-id="a80f5-692">They normally use the same basic structures as generic descriptors and allow for additional information to be available to the class.</span></span> <span data-ttu-id="a80f5-693">Na przykład w przypadku głośnika audio USB, specyficzne dla klasy deskryptory umożliwiają pobranie klasy audio dla każdego alternatywnego ustawienia Typ obsługiwanej częstotliwości audio.</span><span class="sxs-lookup"><span data-stu-id="a80f5-693">For example, in the case of the USB audio speaker, class specific descriptors allow the audio class to retrieve for each alternate setting the type of audio frequency supported.</span></span>

### <a name="usbx-device-descriptor-framework-in-memory"></a><span data-ttu-id="a80f5-694">Struktura deskryptora urządzenia USBX w pamięci</span><span class="sxs-lookup"><span data-stu-id="a80f5-694">USBX Device Descriptor Framework in Memory</span></span>

<span data-ttu-id="a80f5-695">USBX utrzymuje większość deskryptorów urządzeń w pamięci, czyli wszystkie deskryptory oprócz deskryptorów ciągów i funkcjonalnych.</span><span class="sxs-lookup"><span data-stu-id="a80f5-695">USBX maintains most device descriptors in memory, that is, all descriptors except the string and functional descriptors.</span></span> <span data-ttu-id="a80f5-696">Na poniższym diagramie przedstawiono, w jaki sposób te deskryptory są przechowywane i powiązane.</span><span class="sxs-lookup"><span data-stu-id="a80f5-696">The following diagram shows how these descriptors are stored and related.</span></span>

![Struktura deskryptora urządzenia USBX w pamięci](./media/usbx-host-stack/usbx-device-descriptor-framework.png)
